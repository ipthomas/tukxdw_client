2022/11/07 09:40:53.655755 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 09:40:53.655811 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 09:40:53.655844 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 09:40:53.657557 main.go:193: Loaded subscribe.xml 
2022/11/07 09:40:53.657602 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 09:40:53.657722 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/07 09:40:53.729611 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 09:40:53.748979 main.go:193: Loaded brokerack.xml 
2022/11/07 09:40:53.749049 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 09:40:53.749103 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 09:40:53.757191 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 09:40:53.761033 main.go:193: Loaded cancel.xml 
2022/11/07 09:40:53.761081 main.go:153: Persisting XML Template cancel.xml
2022/11/07 09:40:53.761130 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 09:40:53.765553 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 09:40:53.771977 main.go:193: Loaded stsrst.xml 
2022/11/07 09:40:53.772018 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 09:40:53.772056 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 09:40:53.776818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/07 09:40:53.781386 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 09:40:53.781418 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 09:40:53.781448 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 09:40:53.786631 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/07 09:40:53.798531 main.go:193: Loaded xdsodd.xml 
2022/11/07 09:40:53.798561 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 09:40:53.798593 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 09:40:53.800929 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 09:40:53.806439 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 09:40:53.806467 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 09:40:53.806494 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 09:40:53.810793 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 09:40:53.814356 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 09:40:53.814391 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 09:40:53.814448 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 09:40:53.818982 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 09:40:53.822915 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 09:40:53.822953 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 09:40:53.823005 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/07 09:40:53.826288 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 09:40:53.834295 main.go:193: Loaded pathwayoptions.html 
2022/11/07 09:40:53.834327 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 09:40:53.834375 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/07 09:40:53.837112 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/07 09:40:53.844212 main.go:193: Loaded pixmpatient.html 
2022/11/07 09:40:53.844244 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 09:40:53.844289 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 09:40:53.846531 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 09:40:53.850996 main.go:193: Loaded subscriptions.html 
2022/11/07 09:40:53.851024 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 09:40:53.851051 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 09:40:53.853486 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 09:40:53.857149 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 09:40:53.857174 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 09:40:53.857210 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 09:40:53.860504 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/07 09:40:53.864313 main.go:193: Loaded workflowtasks.html 
2022/11/07 09:40:53.864347 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 09:40:53.864381 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 09:40:53.867129 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 09:40:53.871222 main.go:193: Loaded dashboardwidget.html 
2022/11/07 09:40:53.871249 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 09:40:53.871277 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 09:40:53.875786 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 09:40:53.882092 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 09:40:53.882125 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 09:40:53.882166 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 09:40:53.884596 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 09:40:53.888726 main.go:193: Loaded notificationwidget.html 
2022/11/07 09:40:53.888758 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 09:40:53.888791 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 09:40:53.891471 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 09:40:53.897217 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 09:40:53.897244 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 09:40:53.897272 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 09:40:53.901673 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 09:40:53.905327 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 09:40:53.905357 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 09:40:53.905392 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 09:40:53.909977 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 09:40:53.916392 main.go:193: Loaded workflows.html 
2022/11/07 09:40:53.916421 main.go:171: Persisting HTML Template workflows.html
2022/11/07 09:40:53.916450 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 09:40:53.918549 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 09:40:53.921626 main.go:193: Loaded adminspawidget.html 
2022/11/07 09:40:53.921657 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 09:40:53.921685 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/07 09:40:53.922952 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 09:40:53.925722 main.go:193: Loaded spawidget.html 
2022/11/07 09:40:53.925760 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 09:40:53.925789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 09:40:53.927508 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Menu</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>   
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 09:40:53.933207 main.go:193: Loaded newworkflow.html 
2022/11/07 09:40:53.933237 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 09:40:53.933265 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 09:40:53.935389 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 09:40:53.937811 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 09:40:53.937842 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 09:40:53.937871 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 09:40:53.940148 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/07 09:40:53.943538 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 09:40:53.943566 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 09:40:53.943595 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 09:40:53.945705 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 09:40:53.947729 main.go:193: Loaded footer.html 
2022/11/07 09:40:53.947754 main.go:171: Persisting HTML Template footer.html
2022/11/07 09:40:53.947781 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 09:40:53.949794 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 09:40:53.952806 main.go:193: Loaded events.html 
2022/11/07 09:40:53.952843 main.go:171: Persisting HTML Template events.html
2022/11/07 09:40:53.952869 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 09:40:53.954911 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 09:40:53.957038 main.go:193: Loaded header.html 
2022/11/07 09:40:53.957067 main.go:171: Persisting HTML Template header.html
2022/11/07 09:40:53.957093 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 09:40:53.961159 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 09:40:53.965033 main.go:193: Loaded pixpatient.html 
2022/11/07 09:40:53.965061 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 09:40:53.965090 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 09:40:53.967233 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 09:40:53.977724 main.go:193: Loaded horizontalline.html 
2022/11/07 09:40:53.977875 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 09:40:53.977909 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/07 09:40:53.986761 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 09:40:53.991498 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 09:40:53.991540 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 09:40:53.991617 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 09:40:53.997781 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 09:40:53.999914 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 09:40:53.999943 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 09:40:53.999970 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 09:40:54.002040 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 09:40:54.005275 main.go:193: Loaded workflow.html 
2022/11/07 09:40:54.005298 main.go:171: Persisting HTML Template workflow.html
2022/11/07 09:40:54.005328 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 09:40:54.017272 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 09:40:54.021331 main.go:193: Loaded usereventform.html 
2022/11/07 09:40:54.021361 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 09:40:54.021388 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 09:40:54.022981 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 09:40:54.024643 main.go:193: Loaded wfconfig.html 
2022/11/07 09:40:54.024673 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 09:40:54.024700 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 09:40:54.027096 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 09:40:54.030862 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 09:40:54.030893 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 09:40:54.030981 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_timeline]
2022/11/07 09:40:54.034151 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 09:40:54.036672 main.go:193: Loaded timelinewidget.html 
2022/11/07 09:40:54.036716 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 09:40:54.036747 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 09:40:54.037931 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 12:52:26.435127 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 12:52:26.436457 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 12:52:26.436520 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 12:52:26.436625 main.go:112: Processing XDW Config Files
2022/11/07 12:52:26.440326 main.go:193: Loaded pathalert_meta.json 
2022/11/07 12:52:26.440411 tukxdw.go:1324: Persisting Workflow XDS Meta
2022/11/07 12:52:26.440535 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/07 12:52:26.483808 tukxdw.go:1384: Deleted Existing XDS Meta for Pathway pathalert
2022/11/07 12:52:26.483883 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert_meta %!s(bool=true) {
    "id": "pathalert_publish",
    "repositoryuniqueid": "",
    "registryoid": "",
    "languagecode": "en-GB",
    "docname": "Completed Pathology Alert Workflow",
    "docdesc": "Pathology Alert Workflow",
    "DocID": "",
    "Authorinstitution": "",
    "Authorperson": "",
    "classcode": "Workflow Management",
    "classcodescheme": "LPRES ClassCode",
    "classcodevalue": "Workflow Management",
    "typecode": "PathAlert_100",
    "typecodescheme": "TypeCode_LPRES_2018",
    "typecodevalue": "Patholgy Alert",
    "practicesettingcode": "Path-PS1",
    "practicesettingscheme": "PracticeSettingCode LPRES",
    "practicesettingvalue": "Path-PS1",
    "confcode": "N",
    "confcodescheme": "LPRES Confidentiality Codes",
    "confcodevalue": "Normal",
    "facilitycode": "path",
    "facilitycodescheme": "Healthcare Facility LPRES",
    "facilitycodevalue": "Pathology",
    "formatcode": "urn:ihe:iti:xdw:2011:workflowDoc",
    "formatcodescheme": "IHE",
    "formatcodevalue": "ITI XDW",
    "mimetype": "application/xml",
    "objecttype": "urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248"
}]
2022/11/07 12:52:26.495157 tukxdw.go:1389: Persisted Workflow XDS Meta for Pathway pathalert
2022/11/07 12:52:26.508001 main.go:193: Loaded pathalert_def.json 
2022/11/07 12:52:26.508046 tukxdw.go:1327: Registering Workflow Definition
2022/11/07 12:52:26.508480 tukdsub.go:187: Processing Cancel Subscriptions
2022/11/07 12:52:26.508526 tukdbint.go:919: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [pathalert]
2022/11/07 12:52:26.534404 tukxdw.go:1341: Cleaned Event Service Subscriptions for Pathway pathalert
2022/11/07 12:52:26.534486 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/07 12:52:26.541268 tukxdw.go:1400: Deleted Existing XDW Definition for Pathway pathalert
2022/11/07 12:52:26.541363 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (isxdsmeta, xdw, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {
    "ref": "pathalert",
    "name": "Pathology Anomaly Workflow",
    "confidentialitycode": "Normal",
    "startbytime": "hour(1)",
    "completebytime": "day(2)",
    "expirationtime": "day(3)",
    "completionBehavior": [{
        "completion": {
            "condition": "task(3)"
        }
    }],
    "tasks": [
        {   "id": "1",
            "tasktype": "NOTIFICATION",
            "name": "Lab_Report",
            "description": "Send Pathology Result Anomaly Alert for Claiming",
            "expirationtime": "hour(8)",
            "completebytime": "hour(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report)"
                }}
            ],
            "output": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }]
        },
        {   "id": "2",
            "tasktype": "Notification",
            "name": "Lab_Report_Claimed",
            "description": "Claim Pathology Result Anomaly",
            "expirationtime": "hour(8)",
            "completebytime": "hour(4)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report_Claimed)"
                }
            }],
            "input": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }],
            "output": [{
                "name": "Lab_Report_Claimed",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }]
        },
        {   "id": "3",
            "tasktype": "Task",
            "name": "Lab_Result_Published",
            "description": "Publish Lab Result for Pathology Anomaly",
            "expirationtime": "day(3)",
            "completebytime": "day(2)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Result^^TypeCode_LPRES_2018)"
                }
            }],
            "output": [{
                "name": "Lab_Result^^TypeCode_LPRES_2018",
                "contenttype": "text/xml",
                "accesstype": "urn:ihe:iti:xdw:2011:XDSregistered"
            }]
        }
    ]
} pathalert]
2022/11/07 12:52:26.548999 tukxdw.go:1405: Persisted New XDW Definition for Pathway pathalert
2022/11/07 12:52:26.549038 tukxdw.go:1344: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/11/07 12:52:26.549050 tukxdw.go:1356: Checking Output Task Lab_Report
2022/11/07 12:52:26.549060 tukxdw.go:1361: Output Task Lab_Report does not require a dsub broker subscription
2022/11/07 12:52:26.549069 tukxdw.go:1347: Checking Input Task Lab_Report
2022/11/07 12:52:26.549078 tukxdw.go:1352: Input Task Lab_Report does not require a dsub broker subscription
2022/11/07 12:52:26.549086 tukxdw.go:1356: Checking Output Task Lab_Report_Claimed
2022/11/07 12:52:26.549094 tukxdw.go:1361: Output Task Lab_Report_Claimed does not require a dsub broker subscription
2022/11/07 12:52:26.549102 tukxdw.go:1356: Checking Output Task Lab_Result^^TypeCode_LPRES_2018
2022/11/07 12:52:26.549118 tukxdw.go:1359: Task 3 Lab_Result_Published task output Lab_Result^^TypeCode_LPRES_2018 included in potential DSUB Broker subscriptions
2022/11/07 12:52:26.549138 tukxdw.go:1366: Found 1 potential DSUB Broker Subscriptions - map[Lab_Result^^TypeCode_LPRES_2018:pathalert]
2022/11/07 12:52:26.549148 tukdsub.go:184: Processing Create Subscriptions
2022/11/07 12:52:26.549159 tukdsub.go:387: Checking for existing Subscriptions for Expression Lab_Result^^TypeCode_LPRES_2018
2022/11/07 12:52:26.549188 tukdbint.go:919: Created Prepared Statement SELECT * FROM subscriptions WHERE pathway= ? AND topic= ? AND expression= ? - Values [pathalert $XDSDocumentEntryTypeCode Lab_Result^^TypeCode_LPRES_2018]
2022/11/07 12:52:26.549928 tukdsub.go:402: No Subscription for Pathway pathalert Topic $XDSDocumentEntryTypeCode Expression Lab_Result^^TypeCode_LPRES_2018 found
2022/11/07 12:52:26.550734 tukdsub.go:425: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/11/07 12:52:26.550827 tukhttp.go:215: SOAP Request Headers
2022/11/07 12:52:26.550900 tukutil.go:166: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/11/07 12:52:26.550921 tukhttp.go:217: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:dc0c9dee-dd37-46de-aa12-8da2e93c2589</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('Lab_Result^^TypeCode_LPRES_2018')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/11/07 12:52:31.551870 tukdsub.go:428: Post "http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub": context deadline exceeded
2022/11/07 12:53:58.310600 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 12:53:58.311996 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 12:53:58.312081 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 12:53:58.315587 main.go:193: Loaded subscribe.xml 
2022/11/07 12:53:58.315631 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 12:53:58.315758 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 12:53:58.338615 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 12:53:58.352005 main.go:193: Loaded brokerack.xml 
2022/11/07 12:53:58.352050 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 12:53:58.352100 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 12:53:58.356563 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack]
2022/11/07 12:53:58.361171 main.go:193: Loaded cancel.xml 
2022/11/07 12:53:58.361204 main.go:153: Persisting XML Template cancel.xml
2022/11/07 12:53:58.361237 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 12:53:58.365218 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 12:53:58.368735 main.go:193: Loaded stsrst.xml 
2022/11/07 12:53:58.368784 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 12:53:58.368816 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 12:53:58.373420 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/07 12:53:58.380317 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 12:53:58.380369 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 12:53:58.380430 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 12:53:58.384471 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:53:58.387827 main.go:193: Loaded xdsodd.xml 
2022/11/07 12:53:58.387857 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 12:53:58.387889 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 12:53:58.393252 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:53:58.404491 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 12:53:58.404526 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 12:53:58.404557 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 12:53:58.408782 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 12:53:58.413339 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 12:53:58.413383 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 12:53:58.413425 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 12:53:58.418757 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 12:53:58.424091 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 12:53:58.424139 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 12:53:58.424202 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 12:53:58.430049 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/07 12:53:58.433411 main.go:193: Loaded pathwayoptions.html 
2022/11/07 12:53:58.433442 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 12:53:58.433473 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 12:53:58.437714 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 12:53:58.443083 main.go:193: Loaded pixmpatient.html 
2022/11/07 12:53:58.443124 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 12:53:58.443166 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 12:53:58.447368 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 12:53:58.450372 main.go:193: Loaded subscriptions.html 
2022/11/07 12:53:58.450411 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 12:53:58.450450 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 12:53:58.455999 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:53:58.460604 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 12:53:58.460653 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 12:53:58.460693 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 12:53:58.468083 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 12:53:58.471601 main.go:193: Loaded workflowtasks.html 
2022/11/07 12:53:58.471633 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 12:53:58.471666 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 12:53:58.477694 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 12:53:58.483227 main.go:193: Loaded dashboardwidget.html 
2022/11/07 12:53:58.483267 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 12:53:58.483306 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 12:53:58.485720 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 12:53:58.496201 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 12:53:58.496233 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 12:53:58.496266 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 12:53:58.500590 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/07 12:53:58.504358 main.go:193: Loaded notificationwidget.html 
2022/11/07 12:53:58.504391 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 12:53:58.504440 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 12:53:58.508333 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 12:53:58.512705 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 12:53:58.512731 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 12:53:58.512767 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 12:53:58.516609 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 12:53:58.518936 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 12:53:58.518966 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 12:53:58.519007 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 12:53:58.521064 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 12:53:58.524485 main.go:193: Loaded workflows.html 
2022/11/07 12:53:58.524514 main.go:171: Persisting HTML Template workflows.html
2022/11/07 12:53:58.524548 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 12:53:58.527449 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:53:58.530709 main.go:193: Loaded adminspawidget.html 
2022/11/07 12:53:58.530737 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 12:53:58.530765 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 12:53:58.533812 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 12:53:58.538040 main.go:193: Loaded spawidget.html 
2022/11/07 12:53:58.538067 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 12:53:58.538107 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 12:53:58.540814 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Menu</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 12:53:58.543712 main.go:193: Loaded newworkflow.html 
2022/11/07 12:53:58.543742 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 12:53:58.543771 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 12:53:58.545111 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 12:53:58.548056 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 12:53:58.548086 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 12:53:58.548121 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 12:53:58.549199 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 12:53:58.553711 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 12:53:58.553738 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 12:53:58.553766 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 12:53:58.558029 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/07 12:53:58.565827 main.go:193: Loaded footer.html 
2022/11/07 12:53:58.565861 main.go:171: Persisting HTML Template footer.html
2022/11/07 12:53:58.565892 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 12:53:58.568284 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 12:53:58.572545 main.go:193: Loaded events.html 
2022/11/07 12:53:58.572572 main.go:171: Persisting HTML Template events.html
2022/11/07 12:53:58.572600 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 12:53:58.578228 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 12:53:58.581778 main.go:193: Loaded header.html 
2022/11/07 12:53:58.581803 main.go:171: Persisting HTML Template header.html
2022/11/07 12:53:58.581840 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 12:53:58.583813 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header]
2022/11/07 12:53:58.590716 main.go:193: Loaded pixpatient.html 
2022/11/07 12:53:58.590751 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 12:53:58.590784 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 12:53:58.603292 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 12:53:58.608321 main.go:193: Loaded horizontalline.html 
2022/11/07 12:53:58.608350 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 12:53:58.608379 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 12:53:58.610300 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 12:53:58.612613 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 12:53:58.612643 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 12:53:58.612669 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 12:53:58.615387 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 12:53:58.617819 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 12:53:58.617848 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 12:53:58.617874 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 12:53:58.619836 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 12:53:58.622242 main.go:193: Loaded workflow.html 
2022/11/07 12:53:58.622270 main.go:171: Persisting HTML Template workflow.html
2022/11/07 12:53:58.622297 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 12:53:58.624926 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/07 12:53:58.628746 main.go:193: Loaded usereventform.html 
2022/11/07 12:53:58.628772 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 12:53:58.628800 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/07 12:53:58.633035 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform %!s(bool=false)]
2022/11/07 12:53:58.637674 main.go:193: Loaded wfconfig.html 
2022/11/07 12:53:58.637701 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 12:53:58.637728 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 12:53:58.641065 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 12:53:58.643600 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 12:53:58.643629 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 12:53:58.643669 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 12:53:58.646362 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline]
2022/11/07 12:53:58.648764 main.go:193: Loaded timelinewidget.html 
2022/11/07 12:53:58.648794 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 12:53:58.648822 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/07 12:53:58.651107 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 12:55:33.079398 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 12:55:33.080633 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 12:55:33.080694 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 12:55:33.082464 main.go:193: Loaded subscribe.xml 
2022/11/07 12:55:33.082506 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 12:55:33.082638 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 12:55:33.107036 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 12:55:33.117320 main.go:193: Loaded brokerack.xml 
2022/11/07 12:55:33.117351 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 12:55:33.117382 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 12:55:33.119913 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 12:55:33.123658 main.go:193: Loaded cancel.xml 
2022/11/07 12:55:33.123690 main.go:153: Persisting XML Template cancel.xml
2022/11/07 12:55:33.123720 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 12:55:33.126171 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 12:55:33.130554 main.go:193: Loaded stsrst.xml 
2022/11/07 12:55:33.130587 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 12:55:33.130625 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/07 12:55:33.134757 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/07 12:55:33.138656 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 12:55:33.138683 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 12:55:33.138719 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 12:55:33.141162 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:55:33.144895 main.go:193: Loaded xdsodd.xml 
2022/11/07 12:55:33.144926 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 12:55:33.144972 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 12:55:33.150276 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:55:33.155696 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 12:55:33.155728 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 12:55:33.155768 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 12:55:33.160145 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 12:55:33.163873 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 12:55:33.163905 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 12:55:33.163947 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/07 12:55:33.168437 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 12:55:33.174541 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 12:55:33.174573 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 12:55:33.174620 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 12:55:33.181132 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 12:55:33.184352 main.go:193: Loaded pathwayoptions.html 
2022/11/07 12:55:33.184387 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 12:55:33.184416 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/07 12:55:33.186831 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions %!s(bool=false)]
2022/11/07 12:55:33.189405 main.go:193: Loaded pixmpatient.html 
2022/11/07 12:55:33.189435 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 12:55:33.189466 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 12:55:33.193053 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 12:55:33.200386 main.go:193: Loaded subscriptions.html 
2022/11/07 12:55:33.200426 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 12:55:33.200466 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 12:55:33.203020 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:55:33.206679 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 12:55:33.206710 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 12:55:33.206742 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 12:55:33.211036 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 12:55:33.214804 main.go:193: Loaded workflowtasks.html 
2022/11/07 12:55:33.214835 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 12:55:33.214869 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 12:55:33.221272 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 12:55:33.227561 main.go:193: Loaded dashboardwidget.html 
2022/11/07 12:55:33.227597 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 12:55:33.227640 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 12:55:33.230403 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/07 12:55:33.240561 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 12:55:33.240590 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 12:55:33.240617 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/07 12:55:33.245225 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 12:55:33.249497 main.go:193: Loaded notificationwidget.html 
2022/11/07 12:55:33.249551 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 12:55:33.249586 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 12:55:33.252204 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 12:55:33.254932 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 12:55:33.254969 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 12:55:33.255004 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 12:55:33.257170 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 12:55:33.260405 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 12:55:33.260438 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 12:55:33.260605 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 12:55:33.263163 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 12:55:33.266163 main.go:193: Loaded workflows.html 
2022/11/07 12:55:33.266189 main.go:171: Persisting HTML Template workflows.html
2022/11/07 12:55:33.266226 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 12:55:33.268442 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:55:33.271466 main.go:193: Loaded adminspawidget.html 
2022/11/07 12:55:33.271497 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 12:55:33.271543 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 12:55:33.272933 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 12:55:33.274900 main.go:193: Loaded spawidget.html 
2022/11/07 12:55:33.274931 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 12:55:33.274966 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 12:55:33.276393 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Menu</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 12:55:33.281042 main.go:193: Loaded newworkflow.html 
2022/11/07 12:55:33.281070 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 12:55:33.281098 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 12:55:33.283322 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 12:55:33.287584 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 12:55:33.287612 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 12:55:33.287642 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 12:55:33.291620 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/07 12:55:33.295403 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 12:55:33.295432 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 12:55:33.295461 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 12:55:33.297910 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 12:55:33.302069 main.go:193: Loaded footer.html 
2022/11/07 12:55:33.302098 main.go:171: Persisting HTML Template footer.html
2022/11/07 12:55:33.302125 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/07 12:55:33.304706 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 12:55:33.308675 main.go:193: Loaded events.html 
2022/11/07 12:55:33.308706 main.go:171: Persisting HTML Template events.html
2022/11/07 12:55:33.308735 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 12:55:33.310185 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 12:55:33.313990 main.go:193: Loaded header.html 
2022/11/07 12:55:33.314030 main.go:171: Persisting HTML Template header.html
2022/11/07 12:55:33.314073 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 12:55:33.316558 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 12:55:33.319091 main.go:193: Loaded pixpatient.html 
2022/11/07 12:55:33.319126 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 12:55:33.319161 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 12:55:33.323530 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 12:55:33.327554 main.go:193: Loaded horizontalline.html 
2022/11/07 12:55:33.327583 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 12:55:33.327611 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 12:55:33.330857 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 12:55:33.335038 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 12:55:33.335077 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 12:55:33.335107 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 12:55:33.337833 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 12:55:33.341551 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 12:55:33.341578 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 12:55:33.341604 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 12:55:33.344134 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/07 12:55:33.347178 main.go:193: Loaded workflow.html 
2022/11/07 12:55:33.347216 main.go:171: Persisting HTML Template workflow.html
2022/11/07 12:55:33.347267 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 12:55:33.350013 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 12:55:33.353428 main.go:193: Loaded usereventform.html 
2022/11/07 12:55:33.353504 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 12:55:33.353543 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 12:55:33.355298 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 12:55:33.358798 main.go:193: Loaded wfconfig.html 
2022/11/07 12:55:33.358826 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 12:55:33.358861 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 12:55:33.361415 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 12:55:33.365731 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 12:55:33.365758 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 12:55:33.365786 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 12:55:33.367688 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 12:55:33.373375 main.go:193: Loaded timelinewidget.html 
2022/11/07 12:55:33.373409 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 12:55:33.373438 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 12:55:33.378083 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 12:58:47.336775 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 12:58:47.338392 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 12:58:47.338464 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 12:58:47.339147 main.go:193: Loaded subscribe.xml 
2022/11/07 12:58:47.339181 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 12:58:47.339331 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 12:58:47.353412 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 12:58:47.365671 main.go:193: Loaded brokerack.xml 
2022/11/07 12:58:47.365715 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 12:58:47.365758 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) brokerack]
2022/11/07 12:58:47.373137 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 12:58:47.375697 main.go:193: Loaded cancel.xml 
2022/11/07 12:58:47.375741 main.go:153: Persisting XML Template cancel.xml
2022/11/07 12:58:47.375782 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/07 12:58:47.381388 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel]
2022/11/07 12:58:47.389379 main.go:193: Loaded stsrst.xml 
2022/11/07 12:58:47.389417 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 12:58:47.389469 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 12:58:47.391438 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 12:58:47.395556 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 12:58:47.395595 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 12:58:47.395640 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 12:58:47.399720 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:58:47.404474 main.go:193: Loaded xdsodd.xml 
2022/11/07 12:58:47.404511 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 12:58:47.404541 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 12:58:47.408711 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 12:58:47.415693 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 12:58:47.415741 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 12:58:47.415770 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 12:58:47.418943 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 12:58:47.424180 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 12:58:47.424220 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 12:58:47.424295 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 12:58:47.426271 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 12:58:47.430254 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 12:58:47.430318 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 12:58:47.430358 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 12:58:47.432814 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/07 12:58:47.437462 main.go:193: Loaded pathwayoptions.html 
2022/11/07 12:58:47.437513 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 12:58:47.437625 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 12:58:47.442341 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 12:58:47.446035 main.go:193: Loaded pixmpatient.html 
2022/11/07 12:58:47.446080 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 12:58:47.446107 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 12:58:47.450763 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 12:58:47.456617 main.go:193: Loaded subscriptions.html 
2022/11/07 12:58:47.456645 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 12:58:47.456674 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 12:58:47.460557 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:58:47.465719 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 12:58:47.465752 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 12:58:47.465789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 12:58:47.468716 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 12:58:47.475035 main.go:193: Loaded workflowtasks.html 
2022/11/07 12:58:47.475061 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 12:58:47.475100 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/07 12:58:47.480324 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 12:58:47.484950 main.go:193: Loaded dashboardwidget.html 
2022/11/07 12:58:47.484982 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 12:58:47.485010 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 12:58:47.491298 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 12:58:47.498305 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 12:58:47.498335 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 12:58:47.498370 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 12:58:47.506735 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 12:58:47.513889 main.go:193: Loaded notificationwidget.html 
2022/11/07 12:58:47.513930 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 12:58:47.513959 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 12:58:47.517528 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/07 12:58:47.525000 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 12:58:47.525031 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 12:58:47.525064 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 12:58:47.529507 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 12:58:47.532483 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 12:58:47.532524 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 12:58:47.532562 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 12:58:47.539554 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 12:58:47.544617 main.go:193: Loaded workflows.html 
2022/11/07 12:58:47.544650 main.go:171: Persisting HTML Template workflows.html
2022/11/07 12:58:47.544848 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 12:58:47.553683 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 12:58:47.557089 main.go:193: Loaded adminspawidget.html 
2022/11/07 12:58:47.557143 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 12:58:47.557193 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/07 12:58:47.561899 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget]
2022/11/07 12:58:47.580672 main.go:193: Loaded spawidget.html 
2022/11/07 12:58:47.580708 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 12:58:47.580746 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 12:58:47.601318 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Menu</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 12:58:47.610779 main.go:193: Loaded newworkflow.html 
2022/11/07 12:58:47.610807 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 12:58:47.610837 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) newworkflow]
2022/11/07 12:58:47.619115 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}} newworkflow]
2022/11/07 12:58:47.623605 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 12:58:47.623642 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 12:58:47.623675 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 12:58:47.627149 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 12:58:47.637366 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 12:58:47.637406 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 12:58:47.637437 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 12:58:47.642237 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 12:58:47.644413 main.go:193: Loaded footer.html 
2022/11/07 12:58:47.644443 main.go:171: Persisting HTML Template footer.html
2022/11/07 12:58:47.644471 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/07 12:58:47.650914 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 12:58:47.659676 main.go:193: Loaded events.html 
2022/11/07 12:58:47.659705 main.go:171: Persisting HTML Template events.html
2022/11/07 12:58:47.659734 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 12:58:47.664045 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 12:58:47.668888 main.go:193: Loaded header.html 
2022/11/07 12:58:47.668927 main.go:171: Persisting HTML Template header.html
2022/11/07 12:58:47.668974 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 12:58:47.670994 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 12:58:47.676016 main.go:193: Loaded pixpatient.html 
2022/11/07 12:58:47.676047 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 12:58:47.676095 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 12:58:47.678357 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 12:58:47.683561 main.go:193: Loaded horizontalline.html 
2022/11/07 12:58:47.683610 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 12:58:47.683700 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 12:58:47.686496 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/07 12:58:47.689281 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 12:58:47.689358 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 12:58:47.689444 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 12:58:47.690990 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/07 12:58:47.693397 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 12:58:47.693427 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 12:58:47.693462 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 12:58:47.695216 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 12:58:47.700192 main.go:193: Loaded workflow.html 
2022/11/07 12:58:47.700241 main.go:171: Persisting HTML Template workflow.html
2022/11/07 12:58:47.700282 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 12:58:47.702791 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 12:58:47.707850 main.go:193: Loaded usereventform.html 
2022/11/07 12:58:47.707881 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 12:58:47.707910 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 12:58:47.709269 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 12:58:47.713368 main.go:193: Loaded wfconfig.html 
2022/11/07 12:58:47.713406 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 12:58:47.713439 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 12:58:47.714853 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 12:58:47.718670 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 12:58:47.718707 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 12:58:47.718739 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 12:58:47.721615 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 12:58:47.725602 main.go:193: Loaded timelinewidget.html 
2022/11/07 12:58:47.725630 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 12:58:47.725660 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 12:58:47.728112 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 13:40:24.650595 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 13:40:24.652062 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 13:40:24.652144 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 13:40:24.653604 main.go:193: Loaded subscribe.xml 
2022/11/07 13:40:24.653649 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 13:40:24.653793 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 13:40:24.686240 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 13:40:24.700079 main.go:193: Loaded brokerack.xml 
2022/11/07 13:40:24.700126 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 13:40:24.700195 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) brokerack]
2022/11/07 13:40:24.706017 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 13:40:24.712056 main.go:193: Loaded cancel.xml 
2022/11/07 13:40:24.712117 main.go:153: Persisting XML Template cancel.xml
2022/11/07 13:40:24.712181 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 13:40:24.715978 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel %!s(bool=true)]
2022/11/07 13:40:24.720849 main.go:193: Loaded stsrst.xml 
2022/11/07 13:40:24.720908 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 13:40:24.720960 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/07 13:40:24.724772 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/07 13:40:24.728160 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 13:40:24.728204 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 13:40:24.728253 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 13:40:24.730575 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 13:40:24.732962 main.go:193: Loaded xdsodd.xml 
2022/11/07 13:40:24.733000 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 13:40:24.733031 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 13:40:24.738260 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 13:40:24.741980 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 13:40:24.742011 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 13:40:24.742037 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 13:40:24.743443 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 13:40:24.746150 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 13:40:24.746189 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 13:40:24.746236 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 13:40:24.748418 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 13:40:24.752177 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 13:40:24.752208 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 13:40:24.752259 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 13:40:24.755175 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 13:40:24.761294 main.go:193: Loaded pathwayoptions.html 
2022/11/07 13:40:24.761335 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 13:40:24.761376 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 13:40:24.764848 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 13:40:24.768254 main.go:193: Loaded pixmpatient.html 
2022/11/07 13:40:24.768287 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 13:40:24.768322 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 13:40:24.772745 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 13:40:24.778473 main.go:193: Loaded subscriptions.html 
2022/11/07 13:40:24.778504 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 13:40:24.778537 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 13:40:24.781156 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/07 13:40:24.783726 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 13:40:24.783764 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 13:40:24.783804 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 13:40:24.787900 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 13:40:24.792419 main.go:193: Loaded workflowtasks.html 
2022/11/07 13:40:24.792445 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 13:40:24.792471 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 13:40:24.794950 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 13:40:24.799392 main.go:193: Loaded dashboardwidget.html 
2022/11/07 13:40:24.799421 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 13:40:24.799448 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 13:40:24.803004 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 13:40:24.807571 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 13:40:24.807599 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 13:40:24.807627 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/07 13:40:24.809570 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/07 13:40:24.811645 main.go:193: Loaded notificationwidget.html 
2022/11/07 13:40:24.811673 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 13:40:24.811702 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 13:40:24.814220 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 13:40:24.818189 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 13:40:24.818221 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 13:40:24.818253 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 13:40:24.823010 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 13:40:24.825622 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 13:40:24.825660 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 13:40:24.825695 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 13:40:24.829859 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 13:40:24.833886 main.go:193: Loaded workflows.html 
2022/11/07 13:40:24.833920 main.go:171: Persisting HTML Template workflows.html
2022/11/07 13:40:24.833960 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 13:40:24.836760 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 13:40:24.840299 main.go:193: Loaded adminspawidget.html 
2022/11/07 13:40:24.840331 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 13:40:24.840412 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 13:40:24.844610 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 13:40:24.850793 main.go:193: Loaded spawidget.html 
2022/11/07 13:40:24.850841 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 13:40:24.850890 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/07 13:40:24.853508 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 13:40:24.856508 main.go:193: Loaded newworkflow.html 
2022/11/07 13:40:24.856533 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 13:40:24.856559 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 13:40:24.859667 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 13:40:24.861955 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 13:40:24.862004 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 13:40:24.862049 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 13:40:24.864466 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 13:40:24.868903 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 13:40:24.868935 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 13:40:24.868971 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 13:40:24.871820 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 13:40:24.874739 main.go:193: Loaded footer.html 
2022/11/07 13:40:24.874778 main.go:171: Persisting HTML Template footer.html
2022/11/07 13:40:24.874817 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/07 13:40:24.878173 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 13:40:24.882812 main.go:193: Loaded events.html 
2022/11/07 13:40:24.882845 main.go:171: Persisting HTML Template events.html
2022/11/07 13:40:24.882894 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 13:40:24.887099 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 13:40:24.891424 main.go:193: Loaded header.html 
2022/11/07 13:40:24.891463 main.go:171: Persisting HTML Template header.html
2022/11/07 13:40:24.891510 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 13:40:24.894065 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 13:40:24.897600 main.go:193: Loaded pixpatient.html 
2022/11/07 13:40:24.897628 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 13:40:24.897656 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 13:40:24.899326 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 13:40:24.902268 main.go:193: Loaded horizontalline.html 
2022/11/07 13:40:24.902306 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 13:40:24.902335 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 13:40:24.906296 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 13:40:24.908288 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 13:40:24.908315 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 13:40:24.908349 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 13:40:24.910314 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events %!s(bool=false)]
2022/11/07 13:40:24.912245 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 13:40:24.912272 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 13:40:24.912299 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 13:40:24.915301 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 13:40:24.916993 main.go:193: Loaded workflow.html 
2022/11/07 13:40:24.917024 main.go:171: Persisting HTML Template workflow.html
2022/11/07 13:40:24.917056 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 13:40:24.919335 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 13:40:24.921730 main.go:193: Loaded usereventform.html 
2022/11/07 13:40:24.921765 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 13:40:24.921795 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 13:40:24.923543 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform]
2022/11/07 13:40:24.925577 main.go:193: Loaded wfconfig.html 
2022/11/07 13:40:24.925607 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 13:40:24.925635 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 13:40:24.927687 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 13:40:24.930667 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 13:40:24.930696 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 13:40:24.930723 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 13:40:24.934092 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 13:40:24.936316 main.go:193: Loaded timelinewidget.html 
2022/11/07 13:40:24.936344 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 13:40:24.936371 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 13:40:24.937700 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/07 13:45:07.358841 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 13:45:07.360224 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 13:45:07.360285 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 13:45:07.367931 main.go:193: Loaded subscribe.xml 
2022/11/07 13:45:07.367976 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 13:45:07.368109 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 13:45:07.399604 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 13:45:07.408223 main.go:193: Loaded brokerack.xml 
2022/11/07 13:45:07.408261 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 13:45:07.408306 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 13:45:07.412134 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 13:45:07.416031 main.go:193: Loaded cancel.xml 
2022/11/07 13:45:07.416137 main.go:153: Persisting XML Template cancel.xml
2022/11/07 13:45:07.416209 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/07 13:45:07.423164 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 13:45:07.432208 main.go:193: Loaded stsrst.xml 
2022/11/07 13:45:07.432272 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 13:45:07.432316 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 13:45:07.443902 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 13:45:07.447748 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 13:45:07.447785 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 13:45:07.447828 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/07 13:45:07.452774 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 13:45:07.470579 main.go:193: Loaded xdsodd.xml 
2022/11/07 13:45:07.470612 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 13:45:07.470645 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 13:45:07.476764 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 13:45:07.480408 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 13:45:07.480440 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 13:45:07.480473 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 13:45:07.484796 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 13:45:07.488122 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 13:45:07.488155 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 13:45:07.488202 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 13:45:07.493727 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 13:45:07.497841 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 13:45:07.497873 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 13:45:07.497902 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 13:45:07.501369 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 13:45:07.505783 main.go:193: Loaded pathwayoptions.html 
2022/11/07 13:45:07.505811 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 13:45:07.505838 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 13:45:07.509826 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 13:45:07.513305 main.go:193: Loaded pixmpatient.html 
2022/11/07 13:45:07.513334 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 13:45:07.513361 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 13:45:07.518063 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 13:45:07.522792 main.go:193: Loaded subscriptions.html 
2022/11/07 13:45:07.522826 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 13:45:07.522855 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/07 13:45:07.528266 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 13:45:07.533086 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 13:45:07.533127 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 13:45:07.533159 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 13:45:07.536930 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 13:45:07.547827 main.go:193: Loaded workflowtasks.html 
2022/11/07 13:45:07.547935 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 13:45:07.547970 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 13:45:07.556816 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 13:45:07.561561 main.go:193: Loaded dashboardwidget.html 
2022/11/07 13:45:07.561610 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 13:45:07.561704 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 13:45:07.574746 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 13:45:07.596109 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 13:45:07.596160 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 13:45:07.596196 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/07 13:45:07.600120 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 13:45:07.640165 main.go:193: Loaded notificationwidget.html 
2022/11/07 13:45:07.640212 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 13:45:07.640249 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 13:45:07.647161 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 13:45:07.654728 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 13:45:07.654757 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 13:45:07.654785 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 13:45:07.660555 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 13:45:07.664083 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 13:45:07.664116 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 13:45:07.664159 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 13:45:07.667174 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 13:45:07.678606 main.go:193: Loaded workflows.html 
2022/11/07 13:45:07.678636 main.go:171: Persisting HTML Template workflows.html
2022/11/07 13:45:07.678665 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 13:45:07.682134 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 13:45:07.687224 main.go:193: Loaded adminspawidget.html 
2022/11/07 13:45:07.687260 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 13:45:07.687289 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 13:45:07.689726 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 13:45:07.697212 main.go:193: Loaded spawidget.html 
2022/11/07 13:45:07.697237 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 13:45:07.697264 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 13:45:07.699488 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 13:45:07.704809 main.go:193: Loaded newworkflow.html 
2022/11/07 13:45:07.704837 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 13:45:07.704865 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 13:45:07.706873 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 13:45:07.711122 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 13:45:07.711154 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 13:45:07.711204 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 13:45:07.715579 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 13:45:07.718326 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 13:45:07.718371 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 13:45:07.718403 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 13:45:07.721630 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 13:45:07.726094 main.go:193: Loaded footer.html 
2022/11/07 13:45:07.726132 main.go:171: Persisting HTML Template footer.html
2022/11/07 13:45:07.726172 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 13:45:07.728583 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 13:45:07.736231 main.go:193: Loaded events.html 
2022/11/07 13:45:07.736258 main.go:171: Persisting HTML Template events.html
2022/11/07 13:45:07.736287 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 13:45:07.740046 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 13:45:07.746295 main.go:193: Loaded header.html 
2022/11/07 13:45:07.746326 main.go:171: Persisting HTML Template header.html
2022/11/07 13:45:07.746400 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 13:45:07.748374 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 13:45:07.754131 main.go:193: Loaded pixpatient.html 
2022/11/07 13:45:07.754160 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 13:45:07.754187 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 13:45:07.756290 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient]
2022/11/07 13:45:07.760124 main.go:193: Loaded horizontalline.html 
2022/11/07 13:45:07.760154 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 13:45:07.760182 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 13:45:07.762304 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 13:45:07.765091 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 13:45:07.765119 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 13:45:07.765168 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 13:45:07.768488 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 13:45:07.771590 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 13:45:07.771619 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 13:45:07.771645 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 13:45:07.773608 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 13:45:07.779074 main.go:193: Loaded workflow.html 
2022/11/07 13:45:07.779106 main.go:171: Persisting HTML Template workflow.html
2022/11/07 13:45:07.779152 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 13:45:07.781681 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 13:45:07.786359 main.go:193: Loaded usereventform.html 
2022/11/07 13:45:07.786387 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 13:45:07.786414 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 13:45:07.788002 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform %!s(bool=false)]
2022/11/07 13:45:07.789903 main.go:193: Loaded wfconfig.html 
2022/11/07 13:45:07.789930 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 13:45:07.789972 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 13:45:07.792345 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/07 13:45:07.799336 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 13:45:07.799384 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 13:45:07.799424 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 13:45:07.802207 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 13:45:07.805553 main.go:193: Loaded timelinewidget.html 
2022/11/07 13:45:07.805580 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 13:45:07.805607 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/07 13:45:07.808122 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:08:12.397777 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:08:12.399402 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:08:12.399471 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:08:12.402107 main.go:193: Loaded subscribe.xml 
2022/11/07 15:08:12.402261 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:08:12.402449 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:08:12.440001 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/07 15:08:12.452017 main.go:193: Loaded brokerack.xml 
2022/11/07 15:08:12.452061 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:08:12.452599 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:08:12.455499 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:08:12.461627 main.go:193: Loaded cancel.xml 
2022/11/07 15:08:12.461663 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:08:12.461703 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:08:12.466332 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:08:12.471413 main.go:193: Loaded stsrst.xml 
2022/11/07 15:08:12.471449 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:08:12.471485 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:08:12.474102 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/07 15:08:12.479857 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:08:12.479889 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:08:12.479932 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:08:12.484416 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:08:12.490019 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:08:12.490059 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:08:12.490095 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:08:12.492898 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:08:12.500729 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:08:12.500772 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:08:12.500815 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/07 15:08:12.503258 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 15:08:12.510400 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:08:12.510434 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:08:12.510479 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:08:12.512979 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:08:12.517321 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:08:12.517354 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:08:12.517403 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:08:12.519922 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:08:12.525550 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:08:12.525593 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:08:12.525626 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:08:12.529970 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/07 15:08:12.535001 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:08:12.535031 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:08:12.535060 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 15:08:12.544457 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:08:12.551194 main.go:193: Loaded subscriptions.html 
2022/11/07 15:08:12.551220 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:08:12.551246 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:08:12.555437 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:08:12.560258 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:08:12.560304 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:08:12.560343 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:08:12.565226 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:08:12.570640 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:08:12.570683 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:08:12.570718 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:08:12.573621 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:08:12.580979 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:08:12.581015 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:08:12.581049 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/07 15:08:12.586808 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:08:12.596256 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:08:12.596286 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:08:12.596712 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:08:12.604551 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/07 15:08:12.615083 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:08:12.615112 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:08:12.615140 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:08:12.617895 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/07 15:08:12.623042 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:08:12.623075 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:08:12.623105 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:08:12.629907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/07 15:08:12.633167 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:08:12.633205 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:08:12.633232 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:08:12.639558 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:08:12.645028 main.go:193: Loaded workflows.html 
2022/11/07 15:08:12.645061 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:08:12.645089 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflows]
2022/11/07 15:08:12.647186 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 15:08:12.650289 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:08:12.650316 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:08:12.650344 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:08:12.653441 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:08:12.663208 main.go:193: Loaded spawidget.html 
2022/11/07 15:08:12.663241 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:08:12.663400 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:08:12.665548 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:08:12.668001 main.go:193: Loaded newworkflow.html 
2022/11/07 15:08:12.668030 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:08:12.668063 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:08:12.669098 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:08:12.675733 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:08:12.675783 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:08:12.675825 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:08:12.681779 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:08:12.685799 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:08:12.685824 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:08:12.685852 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:08:12.688454 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:08:12.694068 main.go:193: Loaded footer.html 
2022/11/07 15:08:12.694174 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:08:12.694218 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:08:12.697111 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 15:08:12.702605 main.go:193: Loaded events.html 
2022/11/07 15:08:12.702631 main.go:171: Persisting HTML Template events.html
2022/11/07 15:08:12.702660 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:08:12.704711 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events]
2022/11/07 15:08:12.712233 main.go:193: Loaded header.html 
2022/11/07 15:08:12.712273 main.go:171: Persisting HTML Template header.html
2022/11/07 15:08:12.712300 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:08:12.714312 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:08:12.720970 main.go:193: Loaded pixpatient.html 
2022/11/07 15:08:12.721003 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:08:12.721033 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 15:08:12.750218 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:08:12.764253 main.go:193: Loaded horizontalline.html 
2022/11/07 15:08:12.764310 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:08:12.764353 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:08:12.766346 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:08:12.768555 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:08:12.768585 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:08:12.768613 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:08:12.773155 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:08:12.778803 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:08:12.778871 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:08:12.778905 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:08:12.782901 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:08:12.785270 main.go:193: Loaded workflow.html 
2022/11/07 15:08:12.785300 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:08:12.785328 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:08:12.786463 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:08:12.794862 main.go:193: Loaded usereventform.html 
2022/11/07 15:08:12.794898 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:08:12.794928 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:08:12.798958 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:08:12.802139 main.go:193: Loaded wfconfig.html 
2022/11/07 15:08:12.802169 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:08:12.802201 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:08:12.806387 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:08:12.816747 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:08:12.816778 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:08:12.816807 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:08:12.818965 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:08:12.823383 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:08:12.823415 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:08:12.823443 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:08:12.828398 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:10:43.594235 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:10:43.595674 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:10:43.595749 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:10:43.598449 main.go:193: Loaded subscribe.xml 
2022/11/07 15:10:43.598489 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:10:43.598619 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:10:43.611681 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/07 15:10:43.620565 main.go:193: Loaded brokerack.xml 
2022/11/07 15:10:43.620700 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:10:43.620746 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:10:43.623343 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 15:10:43.626489 main.go:193: Loaded cancel.xml 
2022/11/07 15:10:43.626523 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:10:43.626578 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:10:43.628873 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:10:43.632061 main.go:193: Loaded stsrst.xml 
2022/11/07 15:10:43.632101 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:10:43.632135 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:10:43.634337 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 15:10:43.640044 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:10:43.640116 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:10:43.640157 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:10:43.645024 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:10:43.651617 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:10:43.651690 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:10:43.651756 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) xdsodd]
2022/11/07 15:10:43.654741 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:10:43.663526 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:10:43.663563 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:10:43.663592 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:10:43.666315 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:10:43.670834 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:10:43.670874 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:10:43.670913 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/07 15:10:43.675243 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:10:43.679167 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:10:43.679209 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:10:43.679248 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:10:43.683463 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:10:43.689104 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:10:43.689139 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:10:43.689170 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:10:43.691658 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/07 15:10:43.695173 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:10:43.695209 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:10:43.695245 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 15:10:43.697786 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient %!s(bool=false)]
2022/11/07 15:10:43.700490 main.go:193: Loaded subscriptions.html 
2022/11/07 15:10:43.700526 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:10:43.700614 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/07 15:10:43.703079 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:10:43.706688 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:10:43.706721 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:10:43.706751 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:10:43.708310 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:10:43.712210 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:10:43.712244 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:10:43.712295 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/07 15:10:43.716808 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:10:43.720553 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:10:43.720581 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:10:43.720615 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 15:10:43.723165 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/07 15:10:43.727071 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:10:43.727099 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:10:43.727130 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:10:43.729308 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 15:10:43.733307 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:10:43.733333 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:10:43.733362 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:10:43.735543 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 15:10:43.738107 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:10:43.738136 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:10:43.738164 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/07 15:10:43.740383 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/07 15:10:43.742558 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:10:43.742587 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:10:43.742613 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:10:43.743830 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:10:43.746188 main.go:193: Loaded workflows.html 
2022/11/07 15:10:43.746216 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:10:43.746245 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:10:43.750321 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:10:43.755149 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:10:43.755180 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:10:43.755210 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:10:43.757425 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:10:43.761003 main.go:193: Loaded spawidget.html 
2022/11/07 15:10:43.761031 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:10:43.761074 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:10:43.765318 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 15:10:43.768411 main.go:193: Loaded newworkflow.html 
2022/11/07 15:10:43.768439 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:10:43.768483 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:10:43.770655 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:10:43.775927 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:10:43.775956 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:10:43.776003 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:10:43.778032 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:10:43.780411 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:10:43.780442 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:10:43.780492 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event]
2022/11/07 15:10:43.781803 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:10:43.785088 main.go:193: Loaded footer.html 
2022/11/07 15:10:43.785118 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:10:43.785148 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:10:43.788013 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/07 15:10:43.791460 main.go:193: Loaded events.html 
2022/11/07 15:10:43.791491 main.go:171: Persisting HTML Template events.html
2022/11/07 15:10:43.791524 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:10:43.794251 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:10:43.796831 main.go:193: Loaded header.html 
2022/11/07 15:10:43.796861 main.go:171: Persisting HTML Template header.html
2022/11/07 15:10:43.796895 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:10:43.799367 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:10:43.802939 main.go:193: Loaded pixpatient.html 
2022/11/07 15:10:43.802969 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:10:43.803019 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:10:43.805200 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/07 15:10:43.808921 main.go:193: Loaded horizontalline.html 
2022/11/07 15:10:43.808952 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:10:43.808980 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:10:43.811069 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:10:43.813712 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:10:43.813741 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:10:43.813768 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_events]
2022/11/07 15:10:43.816150 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:10:43.819854 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:10:43.819888 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:10:43.819930 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:10:43.822595 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:10:43.826055 main.go:193: Loaded workflow.html 
2022/11/07 15:10:43.826091 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:10:43.826126 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:10:43.828661 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:10:43.832670 main.go:193: Loaded usereventform.html 
2022/11/07 15:10:43.832702 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:10:43.832754 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:10:43.835247 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:10:43.838124 main.go:193: Loaded wfconfig.html 
2022/11/07 15:10:43.838154 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:10:43.838182 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:10:43.840435 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:10:43.844457 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:10:43.844513 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:10:43.844568 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_timeline]
2022/11/07 15:10:43.847326 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:10:43.850521 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:10:43.850550 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:10:43.850581 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:10:43.853508 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:14:29.677051 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:14:29.678579 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:14:29.678649 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:14:29.681295 main.go:193: Loaded subscribe.xml 
2022/11/07 15:14:29.681346 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:14:29.681507 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:14:29.709543 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/07 15:14:29.726973 main.go:193: Loaded brokerack.xml 
2022/11/07 15:14:29.727017 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:14:29.727082 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:14:29.733810 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:14:29.739781 main.go:193: Loaded cancel.xml 
2022/11/07 15:14:29.740118 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:14:29.740196 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:14:29.745333 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:14:29.749513 main.go:193: Loaded stsrst.xml 
2022/11/07 15:14:29.749559 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:14:29.749600 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:14:29.753397 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 15:14:29.761465 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:14:29.761504 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:14:29.761544 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:14:29.764057 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:14:29.770676 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:14:29.770735 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:14:29.771155 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:14:29.773997 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:14:29.778348 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:14:29.778379 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:14:29.778417 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:14:29.781608 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 15:14:29.785897 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:14:29.785947 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:14:29.786004 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:14:29.788736 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:14:29.792762 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:14:29.792805 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:14:29.792855 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:14:29.795391 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/07 15:14:29.800740 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:14:29.800782 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:14:29.800816 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:14:29.804263 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:14:29.807272 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:14:29.807311 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:14:29.807349 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 15:14:29.809898 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:14:29.813694 main.go:193: Loaded subscriptions.html 
2022/11/07 15:14:29.813738 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:14:29.813776 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:14:29.816064 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:14:29.820451 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:14:29.820492 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:14:29.820529 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/07 15:14:29.823857 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:14:29.829579 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:14:29.829622 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:14:29.829670 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:14:29.833755 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:14:29.840077 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:14:29.840115 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:14:29.840147 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/07 15:14:29.842813 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:14:29.850298 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:14:29.850336 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:14:29.850373 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:14:29.853043 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 15:14:29.859249 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:14:29.859278 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:14:29.859305 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:14:29.860418 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 15:14:29.863528 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:14:29.863558 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:14:29.863600 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/07 15:14:29.867739 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/07 15:14:29.872537 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:14:29.872644 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:14:29.872714 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:14:29.878262 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:14:29.880472 main.go:193: Loaded workflows.html 
2022/11/07 15:14:29.880500 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:14:29.880530 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:14:29.882710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 15:14:29.889174 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:14:29.889203 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:14:29.889232 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/07 15:14:29.891690 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:14:29.895955 main.go:193: Loaded spawidget.html 
2022/11/07 15:14:29.895996 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:14:29.896043 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:14:29.898767 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:14:29.904528 main.go:193: Loaded newworkflow.html 
2022/11/07 15:14:29.904606 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:14:29.904651 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:14:29.909482 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}} newworkflow %!s(bool=false)]
2022/11/07 15:14:29.911478 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:14:29.911507 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:14:29.911543 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:14:29.913858 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:14:29.925824 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:14:29.925858 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:14:29.925891 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:14:29.928532 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/07 15:14:29.931226 main.go:193: Loaded footer.html 
2022/11/07 15:14:29.931256 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:14:29.931284 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:14:29.942779 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer]
2022/11/07 15:14:29.947055 main.go:193: Loaded events.html 
2022/11/07 15:14:29.947085 main.go:171: Persisting HTML Template events.html
2022/11/07 15:14:29.947113 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:14:29.959206 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:14:29.976774 main.go:193: Loaded header.html 
2022/11/07 15:14:29.976805 main.go:171: Persisting HTML Template header.html
2022/11/07 15:14:29.976835 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/07 15:14:29.978879 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:14:29.993320 main.go:193: Loaded pixpatient.html 
2022/11/07 15:14:29.993351 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:14:29.993379 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:14:29.996496 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:14:30.007452 main.go:193: Loaded horizontalline.html 
2022/11/07 15:14:30.007481 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:14:30.007511 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:14:30.009363 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:14:30.011543 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:14:30.011570 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:14:30.011599 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:14:30.014542 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:14:30.026187 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:14:30.026222 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:14:30.026273 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:14:30.029174 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/07 15:14:30.031728 main.go:193: Loaded workflow.html 
2022/11/07 15:14:30.031760 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:14:30.031799 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:14:30.039890 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:14:30.043344 main.go:193: Loaded usereventform.html 
2022/11/07 15:14:30.043377 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:14:30.043409 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:14:30.046577 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:14:30.050379 main.go:193: Loaded wfconfig.html 
2022/11/07 15:14:30.050423 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:14:30.050460 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:14:30.056091 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}} wfconfig]
2022/11/07 15:14:30.060021 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:14:30.060052 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:14:30.060080 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:14:30.063083 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:14:30.070611 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:14:30.070803 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:14:30.070879 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:14:30.074570 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:16:25.690648 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:16:25.692149 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:16:25.692207 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:16:25.694113 main.go:193: Loaded subscribe.xml 
2022/11/07 15:16:25.694151 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:16:25.694257 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:16:25.714167 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:16:25.723159 main.go:193: Loaded brokerack.xml 
2022/11/07 15:16:25.723199 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:16:25.723233 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:16:25.738970 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack]
2022/11/07 15:16:25.751019 main.go:193: Loaded cancel.xml 
2022/11/07 15:16:25.751204 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:16:25.751255 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:16:25.754525 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:16:25.756612 main.go:193: Loaded stsrst.xml 
2022/11/07 15:16:25.756646 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:16:25.756680 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:16:25.762154 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/07 15:16:25.770577 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:16:25.770611 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:16:25.770644 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:16:25.775807 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:16:25.780165 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:16:25.780201 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:16:25.780234 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:16:25.784376 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/07 15:16:25.789107 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:16:25.789141 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:16:25.789172 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:16:25.796519 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 15:16:25.800276 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:16:25.800369 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:16:25.800631 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:16:25.803528 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:16:25.807370 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:16:25.807424 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:16:25.807465 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:16:25.813517 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:16:25.821279 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:16:25.821322 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:16:25.821369 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:16:25.824265 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:16:25.830334 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:16:25.830377 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:16:25.830416 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 15:16:25.833317 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:16:25.838849 main.go:193: Loaded subscriptions.html 
2022/11/07 15:16:25.838883 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:16:25.838929 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:16:25.842952 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:16:25.846776 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:16:25.846820 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:16:25.846862 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:16:25.851172 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:16:25.856816 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:16:25.857274 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:16:25.857321 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/07 15:16:25.862798 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:16:25.871033 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:16:25.871067 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:16:25.871116 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 15:16:25.875191 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/07 15:16:25.887164 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:16:25.887201 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:16:25.887243 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:16:25.890930 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 15:16:25.894517 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:16:25.894548 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:16:25.894580 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:16:25.901287 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 15:16:25.904919 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:16:25.904963 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:16:25.904997 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:16:25.921745 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 15:16:25.935694 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:16:25.935734 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:16:25.935767 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:16:25.938170 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:16:25.941872 main.go:193: Loaded workflows.html 
2022/11/07 15:16:25.941909 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:16:25.941954 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:16:25.948086 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:16:25.951685 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:16:25.951722 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:16:25.951754 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:16:25.955144 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:16:25.959190 main.go:193: Loaded spawidget.html 
2022/11/07 15:16:25.959235 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:16:25.959267 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/07 15:16:25.961808 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:16:25.973658 main.go:193: Loaded newworkflow.html 
2022/11/07 15:16:25.973694 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:16:25.973726 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:16:25.976767 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:16:25.981454 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:16:25.981493 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:16:25.981537 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:16:25.983749 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:16:25.987570 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:16:25.987619 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:16:25.987651 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:16:25.989871 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:16:25.993717 main.go:193: Loaded footer.html 
2022/11/07 15:16:25.993749 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:16:25.993782 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:16:25.996004 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 15:16:25.998840 main.go:193: Loaded events.html 
2022/11/07 15:16:25.998880 main.go:171: Persisting HTML Template events.html
2022/11/07 15:16:25.998912 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:16:26.002443 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:16:26.006503 main.go:193: Loaded header.html 
2022/11/07 15:16:26.006536 main.go:171: Persisting HTML Template header.html
2022/11/07 15:16:26.006573 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:16:26.008620 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:16:26.012233 main.go:193: Loaded pixpatient.html 
2022/11/07 15:16:26.012265 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:16:26.012297 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:16:26.014953 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:16:26.017449 main.go:193: Loaded horizontalline.html 
2022/11/07 15:16:26.017482 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:16:26.017514 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/07 15:16:26.018776 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:16:26.022683 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:16:26.022717 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:16:26.022757 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:16:26.024607 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:16:26.027892 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:16:26.027943 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:16:26.027976 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:16:26.029215 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:16:26.031559 main.go:193: Loaded workflow.html 
2022/11/07 15:16:26.031593 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:16:26.031625 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:16:26.033596 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/07 15:16:26.035756 main.go:193: Loaded usereventform.html 
2022/11/07 15:16:26.035792 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:16:26.035823 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/07 15:16:26.038408 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:16:26.040727 main.go:193: Loaded wfconfig.html 
2022/11/07 15:16:26.040765 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:16:26.040803 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:16:26.042584 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:16:26.044899 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:16:26.044937 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:16:26.044971 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:16:26.046271 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline]
2022/11/07 15:16:26.049602 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:16:26.049639 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:16:26.049671 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:16:26.050877 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget]
2022/11/07 15:38:29.381300 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:38:29.382433 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:38:29.382501 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:38:29.386196 main.go:193: Loaded subscribe.xml 
2022/11/07 15:38:29.386246 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:38:29.386362 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:38:29.418919 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/07 15:38:29.451767 main.go:193: Loaded brokerack.xml 
2022/11/07 15:38:29.451980 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:38:29.452035 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:38:29.455370 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:38:29.467846 main.go:193: Loaded cancel.xml 
2022/11/07 15:38:29.467879 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:38:29.467926 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:38:29.470435 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:38:29.472728 main.go:193: Loaded stsrst.xml 
2022/11/07 15:38:29.472764 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:38:29.472797 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:38:29.476014 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 15:38:29.480274 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:38:29.480309 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:38:29.480352 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:38:29.482748 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:38:29.487435 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:38:29.487471 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:38:29.487507 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:38:29.490341 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/07 15:38:29.497677 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:38:29.497710 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:38:29.497742 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:38:29.501044 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:38:29.504776 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:38:29.504814 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:38:29.504860 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:38:29.507194 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:38:29.510902 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:38:29.510941 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:38:29.510984 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:38:29.513127 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:38:29.517873 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:38:29.517907 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:38:29.517940 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:38:29.520103 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:38:29.525086 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:38:29.525160 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:38:29.525212 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 15:38:29.528063 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:38:29.530584 main.go:193: Loaded subscriptions.html 
2022/11/07 15:38:29.530620 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:38:29.530651 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:38:29.533207 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:38:29.536963 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:38:29.537007 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:38:29.537042 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:38:29.542322 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:38:29.544586 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:38:29.544622 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:38:29.544654 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:38:29.547319 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:38:29.552917 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:38:29.552958 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:38:29.553004 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/07 15:38:29.555927 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:38:29.561227 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:38:29.561264 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:38:29.561312 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:38:29.563972 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 15:38:29.566873 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:38:29.566921 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:38:29.566953 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:38:29.570539 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 15:38:29.573227 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:38:29.573264 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:38:29.573344 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/07 15:38:29.575468 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 15:38:29.578967 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:38:29.579003 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:38:29.579045 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:38:29.581361 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:38:29.584798 main.go:193: Loaded workflows.html 
2022/11/07 15:38:29.584834 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:38:29.585269 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:38:29.588785 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:38:29.593639 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:38:29.593675 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:38:29.593712 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:38:29.596015 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:38:29.606163 main.go:193: Loaded spawidget.html 
2022/11/07 15:38:29.606203 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:38:29.606235 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:38:29.608555 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 15:38:29.621615 main.go:193: Loaded newworkflow.html 
2022/11/07 15:38:29.621673 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:38:29.621711 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:38:29.627466 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:38:29.631444 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:38:29.631481 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:38:29.631514 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:38:29.634216 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:38:29.663886 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:38:29.663930 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:38:29.663963 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:38:29.669280 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:38:29.677655 main.go:193: Loaded footer.html 
2022/11/07 15:38:29.677691 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:38:29.677724 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:38:29.694800 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 15:38:29.716679 main.go:193: Loaded events.html 
2022/11/07 15:38:29.716716 main.go:171: Persisting HTML Template events.html
2022/11/07 15:38:29.716756 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:38:29.729091 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:38:29.743023 main.go:193: Loaded header.html 
2022/11/07 15:38:29.743074 main.go:171: Persisting HTML Template header.html
2022/11/07 15:38:29.743111 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:38:29.747522 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:38:29.757718 main.go:193: Loaded pixpatient.html 
2022/11/07 15:38:29.758254 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:38:29.758316 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:38:29.761045 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:38:29.766743 main.go:193: Loaded horizontalline.html 
2022/11/07 15:38:29.766776 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:38:29.766809 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:38:29.768821 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:38:29.772653 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:38:29.772685 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:38:29.772716 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_events]
2022/11/07 15:38:29.775158 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:38:29.778856 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:38:29.778889 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:38:29.778921 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:38:29.781332 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:38:29.789484 main.go:193: Loaded workflow.html 
2022/11/07 15:38:29.789525 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:38:29.789558 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:38:29.794106 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:38:29.796561 main.go:193: Loaded usereventform.html 
2022/11/07 15:38:29.796601 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:38:29.796633 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:38:29.805315 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:38:29.812759 main.go:193: Loaded wfconfig.html 
2022/11/07 15:38:29.812797 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:38:29.812850 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:38:29.815025 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:38:29.817492 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:38:29.817527 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:38:29.817558 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:38:29.818692 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:38:29.822183 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:38:29.822230 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:38:29.822266 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:38:29.826791 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:40:59.968656 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:40:59.969749 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:40:59.969809 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:40:59.972212 main.go:193: Loaded subscribe.xml 
2022/11/07 15:40:59.972272 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:40:59.972390 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/07 15:40:59.989768 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/07 15:40:59.995204 main.go:193: Loaded brokerack.xml 
2022/11/07 15:40:59.995282 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:40:59.995427 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:40:59.997779 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:41:00.000110 main.go:193: Loaded cancel.xml 
2022/11/07 15:41:00.000149 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:41:00.000213 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:41:00.003258 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:41:00.009245 main.go:193: Loaded stsrst.xml 
2022/11/07 15:41:00.009290 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:41:00.009326 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:41:00.011858 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/07 15:41:00.015336 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:41:00.015374 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:41:00.015415 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:41:00.016797 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:41:00.021625 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:41:00.021669 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:41:00.021708 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:41:00.024369 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:41:00.028008 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:41:00.028043 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:41:00.028087 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:41:00.030823 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status]
2022/11/07 15:41:00.033894 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:41:00.033928 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:41:00.033973 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:41:00.035707 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:41:00.038505 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:41:00.038551 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:41:00.038595 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:41:00.042805 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:41:00.047791 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:41:00.047830 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:41:00.047863 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:41:00.050188 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:41:00.052534 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:41:00.052573 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:41:00.052604 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 15:41:00.055430 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:41:00.061566 main.go:193: Loaded subscriptions.html 
2022/11/07 15:41:00.061603 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:41:00.061635 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:41:00.063252 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:41:00.065717 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:41:00.065754 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:41:00.065789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:41:00.068910 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:41:00.074299 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:41:00.074338 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:41:00.074377 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:41:00.076848 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:41:00.081313 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:41:00.081348 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:41:00.081380 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 15:41:00.084074 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:41:00.087664 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:41:00.087704 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:41:00.087745 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:41:00.090787 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/07 15:41:00.094513 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:41:00.094547 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:41:00.094577 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:41:00.096771 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/07 15:41:00.101969 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:41:00.102017 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:41:00.102064 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:41:00.104718 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 15:41:00.108673 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:41:00.108707 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:41:00.108747 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:41:00.111240 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:41:00.114745 main.go:193: Loaded workflows.html 
2022/11/07 15:41:00.114804 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:41:00.114844 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:41:00.118754 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:41:00.122773 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:41:00.122812 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:41:00.122851 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:41:00.125268 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:41:00.129227 main.go:193: Loaded spawidget.html 
2022/11/07 15:41:00.129272 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:41:00.129312 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:41:00.131565 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Active Pathways</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:41:00.134340 main.go:193: Loaded newworkflow.html 
2022/11/07 15:41:00.134377 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:41:00.134408 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:41:00.136890 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:41:00.140073 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:41:00.140109 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:41:00.140140 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:41:00.142375 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:41:00.146386 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:41:00.146439 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:41:00.146479 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:41:00.149098 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:41:00.151680 main.go:193: Loaded footer.html 
2022/11/07 15:41:00.151716 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:41:00.151746 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:41:00.156036 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 15:41:00.160083 main.go:193: Loaded events.html 
2022/11/07 15:41:00.160118 main.go:171: Persisting HTML Template events.html
2022/11/07 15:41:00.160150 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:41:00.162417 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:41:00.168109 main.go:193: Loaded header.html 
2022/11/07 15:41:00.168143 main.go:171: Persisting HTML Template header.html
2022/11/07 15:41:00.168175 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:41:00.170786 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/07 15:41:00.174428 main.go:193: Loaded pixpatient.html 
2022/11/07 15:41:00.174469 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:41:00.174502 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:41:00.178042 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/07 15:41:00.180760 main.go:193: Loaded horizontalline.html 
2022/11/07 15:41:00.180798 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:41:00.180831 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:41:00.183891 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:41:00.189647 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:41:00.189696 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:41:00.189729 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:41:00.192049 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/07 15:41:00.196029 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:41:00.196062 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:41:00.196102 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_overdue]
2022/11/07 15:41:00.198846 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:41:00.203317 main.go:193: Loaded workflow.html 
2022/11/07 15:41:00.203382 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:41:00.203415 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:41:00.205673 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:41:00.209295 main.go:193: Loaded usereventform.html 
2022/11/07 15:41:00.209332 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:41:00.209383 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:41:00.214979 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:41:00.217715 main.go:193: Loaded wfconfig.html 
2022/11/07 15:41:00.217750 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:41:00.217787 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:41:00.220107 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:41:00.223752 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:41:00.223790 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:41:00.223823 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:41:00.232624 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:41:00.236452 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:41:00.236490 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:41:00.236523 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:41:00.241673 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:44:51.283948 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:44:51.285271 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:44:51.285341 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:44:51.288204 main.go:193: Loaded subscribe.xml 
2022/11/07 15:44:51.288240 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:44:51.288376 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:44:51.305354 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:44:51.309742 main.go:193: Loaded brokerack.xml 
2022/11/07 15:44:51.309784 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:44:51.309825 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:44:51.313602 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:44:51.317243 main.go:193: Loaded cancel.xml 
2022/11/07 15:44:51.317285 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:44:51.317343 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 15:44:51.320071 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:44:51.324048 main.go:193: Loaded stsrst.xml 
2022/11/07 15:44:51.324091 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:44:51.324133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:44:51.326804 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 15:44:51.330996 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:44:51.331038 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:44:51.331080 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:44:51.333442 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:44:51.337359 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:44:51.337395 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:44:51.337442 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:44:51.339199 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:44:51.345788 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:44:51.345824 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:44:51.345862 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:44:51.348296 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 15:44:51.352036 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:44:51.352070 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:44:51.352120 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:44:51.354710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:44:51.358575 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:44:51.358615 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:44:51.358652 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:44:51.361265 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:44:51.364809 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:44:51.364852 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:44:51.364892 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 15:44:51.366771 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:44:51.369571 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:44:51.369605 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:44:51.369635 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 15:44:51.371445 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:44:51.375245 main.go:193: Loaded subscriptions.html 
2022/11/07 15:44:51.375288 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:44:51.375326 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:44:51.378800 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:44:51.382655 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:44:51.382690 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:44:51.382736 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:44:51.385139 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:44:51.389072 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:44:51.389107 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:44:51.389139 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:44:51.391752 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:44:51.397678 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:44:51.397726 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:44:51.397765 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 15:44:51.400681 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:44:51.404759 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:44:51.404798 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:44:51.404845 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:44:51.407412 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 15:44:51.411135 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:44:51.411178 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:44:51.411217 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:44:51.413767 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/07 15:44:51.415625 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:44:51.415660 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:44:51.415690 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:44:51.417183 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:44:51.420957 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:44:51.420996 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:44:51.421053 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:44:51.423455 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:44:51.427156 main.go:193: Loaded workflows.html 
2022/11/07 15:44:51.427201 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:44:51.427241 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:44:51.429496 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:44:51.433390 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:44:51.433432 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:44:51.433471 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:44:51.436118 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:44:51.442405 main.go:193: Loaded spawidget.html 
2022/11/07 15:44:51.442450 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:44:51.442491 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 15:44:51.445167 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 15:44:51.452781 main.go:193: Loaded newworkflow.html 
2022/11/07 15:44:51.452820 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:44:51.452856 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:44:51.455411 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:44:51.458112 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:44:51.458148 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:44:51.458248 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:44:51.460636 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 15:44:51.464383 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:44:51.464426 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:44:51.464466 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:44:51.466775 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:44:51.470884 main.go:193: Loaded footer.html 
2022/11/07 15:44:51.470922 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:44:51.470962 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:44:51.473296 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 15:44:51.475843 main.go:193: Loaded events.html 
2022/11/07 15:44:51.475879 main.go:171: Persisting HTML Template events.html
2022/11/07 15:44:51.475910 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) events]
2022/11/07 15:44:51.478467 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 15:44:51.481326 main.go:193: Loaded header.html 
2022/11/07 15:44:51.481365 main.go:171: Persisting HTML Template header.html
2022/11/07 15:44:51.481407 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 15:44:51.484329 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:44:51.487971 main.go:193: Loaded pixpatient.html 
2022/11/07 15:44:51.488006 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:44:51.488046 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 15:44:51.491078 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:44:51.494961 main.go:193: Loaded horizontalline.html 
2022/11/07 15:44:51.494998 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:44:51.495037 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:44:51.496894 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/07 15:44:51.499628 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:44:51.499662 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:44:51.499695 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:44:51.502199 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/07 15:44:51.505632 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:44:51.505668 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:44:51.505701 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:44:51.508092 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:44:51.511360 main.go:193: Loaded workflow.html 
2022/11/07 15:44:51.511390 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:44:51.511429 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:44:51.515533 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:44:51.517817 main.go:193: Loaded usereventform.html 
2022/11/07 15:44:51.517846 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:44:51.518026 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/07 15:44:51.520621 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/07 15:44:51.528714 main.go:193: Loaded wfconfig.html 
2022/11/07 15:44:51.528745 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:44:51.528777 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:44:51.530685 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:44:51.534403 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:44:51.534441 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:44:51.534477 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:44:51.536878 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:44:51.539649 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:44:51.539683 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:44:51.539724 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 15:44:51.541718 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 15:46:09.900266 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 15:46:09.901271 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 15:46:09.901326 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 15:46:09.902652 main.go:193: Loaded subscribe.xml 
2022/11/07 15:46:09.902694 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 15:46:09.902805 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 15:46:09.917199 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:46:09.923596 main.go:193: Loaded brokerack.xml 
2022/11/07 15:46:09.923648 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 15:46:09.923713 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 15:46:09.926506 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 15:46:09.928749 main.go:193: Loaded cancel.xml 
2022/11/07 15:46:09.928795 main.go:153: Persisting XML Template cancel.xml
2022/11/07 15:46:09.928837 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/07 15:46:09.932714 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 15:46:09.934713 main.go:193: Loaded stsrst.xml 
2022/11/07 15:46:09.934751 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 15:46:09.934805 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 15:46:09.937088 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 15:46:09.940922 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 15:46:09.940965 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 15:46:09.941006 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 15:46:09.943218 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 15:46:09.947178 main.go:193: Loaded xdsodd.xml 
2022/11/07 15:46:09.947221 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 15:46:09.947256 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 15:46:09.948604 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/07 15:46:09.954981 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 15:46:09.955023 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 15:46:09.955062 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 15:46:09.957260 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 15:46:09.959301 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 15:46:09.959347 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 15:46:09.959396 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 15:46:09.960890 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 15:46:09.964513 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 15:46:09.964546 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 15:46:09.964577 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 15:46:09.966630 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 15:46:09.970980 main.go:193: Loaded pathwayoptions.html 
2022/11/07 15:46:09.971018 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 15:46:09.971052 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/07 15:46:09.973023 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 15:46:09.975455 main.go:193: Loaded pixmpatient.html 
2022/11/07 15:46:09.975486 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 15:46:09.975529 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 15:46:09.979331 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:46:09.983076 main.go:193: Loaded subscriptions.html 
2022/11/07 15:46:09.983115 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 15:46:09.983156 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 15:46:09.987351 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:46:09.990184 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 15:46:09.990230 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 15:46:09.990291 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 15:46:09.992287 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/07 15:46:09.997847 main.go:193: Loaded workflowtasks.html 
2022/11/07 15:46:09.997897 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 15:46:09.997937 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 15:46:10.000651 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 15:46:10.006233 main.go:193: Loaded dashboardwidget.html 
2022/11/07 15:46:10.006279 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 15:46:10.006319 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 15:46:10.008924 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 15:46:10.014610 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 15:46:10.014640 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 15:46:10.014675 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 15:46:10.019079 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/07 15:46:10.021710 main.go:193: Loaded notificationwidget.html 
2022/11/07 15:46:10.021757 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 15:46:10.021795 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 15:46:10.023579 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 15:46:10.027926 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 15:46:10.027960 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 15:46:10.027996 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 15:46:10.030869 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 15:46:10.035585 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 15:46:10.035625 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 15:46:10.035656 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 15:46:10.037186 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 15:46:10.040977 main.go:193: Loaded workflows.html 
2022/11/07 15:46:10.041019 main.go:171: Persisting HTML Template workflows.html
2022/11/07 15:46:10.041057 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 15:46:10.044616 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 15:46:10.048815 main.go:193: Loaded adminspawidget.html 
2022/11/07 15:46:10.048999 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 15:46:10.049045 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 15:46:10.052648 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget]
2022/11/07 15:46:10.055438 main.go:193: Loaded spawidget.html 
2022/11/07 15:46:10.055476 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 15:46:10.055506 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/07 15:46:10.057703 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget]
2022/11/07 15:46:10.061642 main.go:193: Loaded newworkflow.html 
2022/11/07 15:46:10.061675 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 15:46:10.061705 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 15:46:10.064321 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 15:46:10.067109 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 15:46:10.067150 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 15:46:10.067184 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 15:46:10.069317 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/07 15:46:10.073936 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 15:46:10.073975 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 15:46:10.074015 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 15:46:10.076504 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 15:46:10.079375 main.go:193: Loaded footer.html 
2022/11/07 15:46:10.079427 main.go:171: Persisting HTML Template footer.html
2022/11/07 15:46:10.079473 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 15:46:10.081198 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/07 15:46:10.085122 main.go:193: Loaded events.html 
2022/11/07 15:46:10.085155 main.go:171: Persisting HTML Template events.html
2022/11/07 15:46:10.085186 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 15:46:10.087473 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events]
2022/11/07 15:46:10.089991 main.go:193: Loaded header.html 
2022/11/07 15:46:10.090032 main.go:171: Persisting HTML Template header.html
2022/11/07 15:46:10.090063 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/07 15:46:10.091664 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 15:46:10.094814 main.go:193: Loaded pixpatient.html 
2022/11/07 15:46:10.094848 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 15:46:10.094879 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 15:46:10.097673 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 15:46:10.100183 main.go:193: Loaded horizontalline.html 
2022/11/07 15:46:10.100228 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 15:46:10.100267 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 15:46:10.102561 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 15:46:10.105505 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 15:46:10.105562 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 15:46:10.105611 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 15:46:10.110110 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 15:46:10.112740 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 15:46:10.112783 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 15:46:10.112845 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 15:46:10.115052 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 15:46:10.118661 main.go:193: Loaded workflow.html 
2022/11/07 15:46:10.118693 main.go:171: Persisting HTML Template workflow.html
2022/11/07 15:46:10.118723 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 15:46:10.120340 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 15:46:10.123103 main.go:193: Loaded usereventform.html 
2022/11/07 15:46:10.123150 main.go:171: Persisting HTML Template usereventform.html
2022/11/07 15:46:10.123188 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/07 15:46:10.125363 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform]
2022/11/07 15:46:10.129159 main.go:193: Loaded wfconfig.html 
2022/11/07 15:46:10.129204 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 15:46:10.129248 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 15:46:10.131822 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 15:46:10.134874 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 15:46:10.134919 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 15:46:10.134984 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 15:46:10.137394 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 15:46:10.141090 main.go:193: Loaded timelinewidget.html 
2022/11/07 15:46:10.141135 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 15:46:10.141178 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/07 15:46:10.143143 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 20:57:45.108376 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 20:57:45.109500 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 20:57:45.109564 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 20:57:45.111374 main.go:193: Loaded subscribe.xml 
2022/11/07 20:57:45.111411 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 20:57:45.111533 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/07 20:57:45.180805 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 20:57:45.208326 main.go:193: Loaded brokerack.xml 
2022/11/07 20:57:45.208366 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 20:57:45.208416 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 20:57:45.211327 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack]
2022/11/07 20:57:45.217592 main.go:193: Loaded cancel.xml 
2022/11/07 20:57:45.217642 main.go:153: Persisting XML Template cancel.xml
2022/11/07 20:57:45.217717 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 20:57:45.227449 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 20:57:45.231377 main.go:193: Loaded stsrst.xml 
2022/11/07 20:57:45.231407 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 20:57:45.231446 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 20:57:45.232891 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 20:57:45.241116 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 20:57:45.241146 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 20:57:45.241176 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/07 20:57:45.243866 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:57:45.249405 main.go:193: Loaded xdsodd.xml 
2022/11/07 20:57:45.249438 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 20:57:45.249474 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 20:57:45.253818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:57:45.261204 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 20:57:45.261234 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 20:57:45.261261 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 20:57:45.263880 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 20:57:45.269890 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 20:57:45.269923 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 20:57:45.269970 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 20:57:45.272469 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 20:57:45.277053 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 20:57:45.277080 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 20:57:45.277117 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 20:57:45.279753 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 20:57:45.284261 main.go:193: Loaded pathwayoptions.html 
2022/11/07 20:57:45.284323 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 20:57:45.284355 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 20:57:45.286971 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/07 20:57:45.292482 main.go:193: Loaded pixmpatient.html 
2022/11/07 20:57:45.292510 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 20:57:45.292544 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 20:57:45.295694 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient %!s(bool=false)]
2022/11/07 20:57:45.300190 main.go:193: Loaded subscriptions.html 
2022/11/07 20:57:45.300240 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 20:57:45.300268 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 20:57:45.304486 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 20:57:45.310670 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 20:57:45.310696 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 20:57:45.310743 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 20:57:45.317150 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 20:57:45.321201 main.go:193: Loaded workflowtasks.html 
2022/11/07 20:57:45.321236 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 20:57:45.321265 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/07 20:57:45.325710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks %!s(bool=false)]
2022/11/07 20:57:45.332265 main.go:193: Loaded dashboardwidget.html 
2022/11/07 20:57:45.332296 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 20:57:45.332322 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 20:57:45.340010 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/07 20:57:45.344217 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 20:57:45.344247 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 20:57:45.344281 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 20:57:45.346850 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/07 20:57:45.349183 main.go:193: Loaded notificationwidget.html 
2022/11/07 20:57:45.349217 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 20:57:45.349283 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 20:57:45.353086 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/07 20:57:45.359339 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 20:57:45.359370 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 20:57:45.359424 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 20:57:45.361817 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 20:57:45.365077 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 20:57:45.365106 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 20:57:45.365133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 20:57:45.367394 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 20:57:45.374013 main.go:193: Loaded workflows.html 
2022/11/07 20:57:45.374049 main.go:171: Persisting HTML Template workflows.html
2022/11/07 20:57:45.374089 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflows]
2022/11/07 20:57:45.376258 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 20:57:45.382212 main.go:193: Loaded adminspawidget.html 
2022/11/07 20:57:45.382241 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 20:57:45.382270 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/07 20:57:45.384555 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 20:57:45.389374 main.go:193: Loaded spawidget.html 
2022/11/07 20:57:45.389403 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 20:57:45.389434 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/07 20:57:45.392408 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 20:57:45.396674 main.go:193: Loaded newworkflow.html 
2022/11/07 20:57:45.396703 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 20:57:45.396730 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 20:57:45.400342 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 20:57:45.405476 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 20:57:45.405509 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 20:57:45.405538 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 20:57:45.407949 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/07 20:57:45.411189 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 20:57:45.411406 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 20:57:45.411549 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event]
2022/11/07 20:57:45.413489 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 20:57:45.416238 main.go:193: Loaded footer.html 
2022/11/07 20:57:45.416269 main.go:171: Persisting HTML Template footer.html
2022/11/07 20:57:45.416296 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/07 20:57:45.418938 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 20:57:45.424567 main.go:193: Loaded events.html 
2022/11/07 20:57:45.424599 main.go:171: Persisting HTML Template events.html
2022/11/07 20:57:45.424627 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 20:57:45.427740 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events %!s(bool=false)]
2022/11/07 20:57:45.431372 main.go:193: Loaded header.html 
2022/11/07 20:57:45.431404 main.go:171: Persisting HTML Template header.html
2022/11/07 20:57:45.431435 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/07 20:57:45.437069 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 20:57:45.442665 main.go:193: Loaded pixpatient.html 
2022/11/07 20:57:45.442693 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 20:57:45.442725 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 20:57:45.444753 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/07 20:57:45.447940 main.go:193: Loaded horizontalline.html 
2022/11/07 20:57:45.447978 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 20:57:45.448025 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/07 20:57:45.450260 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 20:57:45.457162 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 20:57:45.457198 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 20:57:45.457227 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 20:57:45.461710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/07 20:57:45.464827 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 20:57:45.464857 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 20:57:45.464902 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 20:57:45.467503 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 20:57:45.471862 main.go:193: Loaded workflow.html 
2022/11/07 20:57:45.471893 main.go:171: Persisting HTML Template workflow.html
2022/11/07 20:57:45.471923 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 20:57:45.475812 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/07 20:57:45.478102 main.go:193: Loaded wfconfig.html 
2022/11/07 20:57:45.478130 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 20:57:45.478157 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/07 20:57:45.480080 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 20:57:45.483755 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 20:57:45.483782 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 20:57:45.483811 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_timeline]
2022/11/07 20:57:45.487535 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 20:57:45.491258 main.go:193: Loaded timelinewidget.html 
2022/11/07 20:57:45.491289 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 20:57:45.491318 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 20:57:45.493630 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 20:58:52.401962 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 20:58:52.403519 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 20:58:52.403583 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 20:58:52.404168 main.go:193: Loaded subscribe.xml 
2022/11/07 20:58:52.404208 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 20:58:52.404333 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 20:58:52.424809 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/07 20:58:52.432033 main.go:193: Loaded brokerack.xml 
2022/11/07 20:58:52.432086 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 20:58:52.432164 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 20:58:52.436170 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 20:58:52.440634 main.go:193: Loaded cancel.xml 
2022/11/07 20:58:52.440678 main.go:153: Persisting XML Template cancel.xml
2022/11/07 20:58:52.440718 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 20:58:52.445244 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel]
2022/11/07 20:58:52.447913 main.go:193: Loaded stsrst.xml 
2022/11/07 20:58:52.447951 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 20:58:52.447983 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 20:58:52.452547 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 20:58:52.456919 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 20:58:52.456959 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 20:58:52.456998 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 20:58:52.463830 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:58:52.467663 main.go:193: Loaded xdsodd.xml 
2022/11/07 20:58:52.467702 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 20:58:52.467735 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 20:58:52.469942 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:58:52.478076 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 20:58:52.478129 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 20:58:52.478177 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 20:58:52.481801 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status]
2022/11/07 20:58:52.485147 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 20:58:52.485202 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 20:58:52.485287 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 20:58:52.492403 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 20:58:52.496841 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 20:58:52.496885 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 20:58:52.496939 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 20:58:52.503660 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 20:58:52.507167 main.go:193: Loaded pathwayoptions.html 
2022/11/07 20:58:52.507208 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 20:58:52.507248 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 20:58:52.509899 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 20:58:52.514151 main.go:193: Loaded pixmpatient.html 
2022/11/07 20:58:52.514194 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 20:58:52.514234 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 20:58:52.518499 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/07 20:58:52.524149 main.go:193: Loaded subscriptions.html 
2022/11/07 20:58:52.524179 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 20:58:52.524210 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 20:58:52.526383 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions %!s(bool=false)]
2022/11/07 20:58:52.530731 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 20:58:52.530771 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 20:58:52.530811 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 20:58:52.533297 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 20:58:52.538374 main.go:193: Loaded workflowtasks.html 
2022/11/07 20:58:52.538409 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 20:58:52.538449 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 20:58:52.541196 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 20:58:52.546633 main.go:193: Loaded dashboardwidget.html 
2022/11/07 20:58:52.546677 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 20:58:52.546746 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 20:58:52.551200 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/07 20:58:52.560155 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 20:58:52.560202 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 20:58:52.560244 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 20:58:52.563161 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 20:58:52.566991 main.go:193: Loaded notificationwidget.html 
2022/11/07 20:58:52.567040 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 20:58:52.567080 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 20:58:52.572068 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 20:58:52.578145 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 20:58:52.578179 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 20:58:52.578211 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 20:58:52.580331 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/07 20:58:52.582364 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 20:58:52.582399 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 20:58:52.582436 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 20:58:52.586513 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 20:58:52.588474 main.go:193: Loaded workflows.html 
2022/11/07 20:58:52.588517 main.go:171: Persisting HTML Template workflows.html
2022/11/07 20:58:52.588554 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 20:58:52.590498 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 20:58:52.595849 main.go:193: Loaded adminspawidget.html 
2022/11/07 20:58:52.595879 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 20:58:52.595910 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 20:58:52.598080 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 20:58:52.602861 main.go:193: Loaded spawidget.html 
2022/11/07 20:58:52.602894 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 20:58:52.602935 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 20:58:52.605923 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 20:58:52.611236 main.go:193: Loaded newworkflow.html 
2022/11/07 20:58:52.611298 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 20:58:52.611333 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 20:58:52.618422 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 20:58:52.620923 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 20:58:52.620960 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 20:58:52.620989 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 20:58:52.626421 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 20:58:52.629062 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 20:58:52.629102 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 20:58:52.629134 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 20:58:52.633290 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 20:58:52.637429 main.go:193: Loaded footer.html 
2022/11/07 20:58:52.637475 main.go:171: Persisting HTML Template footer.html
2022/11/07 20:58:52.637508 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 20:58:52.640227 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 20:58:52.644393 main.go:193: Loaded events.html 
2022/11/07 20:58:52.644430 main.go:171: Persisting HTML Template events.html
2022/11/07 20:58:52.644464 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 20:58:52.647788 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 20:58:52.650628 main.go:193: Loaded header.html 
2022/11/07 20:58:52.650670 main.go:171: Persisting HTML Template header.html
2022/11/07 20:58:52.650720 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 20:58:52.656957 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 20:58:52.663539 main.go:193: Loaded pixpatient.html 
2022/11/07 20:58:52.663581 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 20:58:52.663620 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 20:58:52.666923 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 20:58:52.672709 main.go:193: Loaded horizontalline.html 
2022/11/07 20:58:52.672745 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 20:58:52.672776 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 20:58:52.674542 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 20:58:52.677952 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 20:58:52.677992 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 20:58:52.678027 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_events]
2022/11/07 20:58:52.679265 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 20:58:52.681691 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 20:58:52.681725 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 20:58:52.681774 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 20:58:52.683838 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 20:58:52.686356 main.go:193: Loaded workflow.html 
2022/11/07 20:58:52.686399 main.go:171: Persisting HTML Template workflow.html
2022/11/07 20:58:52.686430 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 20:58:52.690747 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 20:58:52.693930 main.go:193: Loaded wfconfig.html 
2022/11/07 20:58:52.693961 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 20:58:52.693991 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 20:58:52.695578 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 20:58:52.697599 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 20:58:52.697631 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 20:58:52.697662 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 20:58:52.700870 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 20:58:52.706042 main.go:193: Loaded timelinewidget.html 
2022/11/07 20:58:52.706081 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 20:58:52.706112 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 20:58:52.707496 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 20:59:37.852559 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 20:59:37.853489 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 20:59:37.853564 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 20:59:37.863354 main.go:193: Loaded subscribe.xml 
2022/11/07 20:59:37.863398 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 20:59:37.863528 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 20:59:37.886832 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 20:59:37.896290 main.go:193: Loaded brokerack.xml 
2022/11/07 20:59:37.896326 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 20:59:37.896360 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 20:59:37.899503 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 20:59:37.903400 main.go:193: Loaded cancel.xml 
2022/11/07 20:59:37.903441 main.go:153: Persisting XML Template cancel.xml
2022/11/07 20:59:37.903492 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 20:59:37.908232 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel]
2022/11/07 20:59:37.914525 main.go:193: Loaded stsrst.xml 
2022/11/07 20:59:37.914556 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 20:59:37.914606 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 20:59:37.917837 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 20:59:37.923538 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 20:59:37.923576 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 20:59:37.923616 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 20:59:37.926202 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:59:37.932263 main.go:193: Loaded xdsodd.xml 
2022/11/07 20:59:37.932309 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 20:59:37.932359 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 20:59:37.937911 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 20:59:37.946784 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 20:59:37.946834 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 20:59:37.946900 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 20:59:37.951930 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 20:59:37.957193 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 20:59:37.957231 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 20:59:37.957280 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 20:59:37.962473 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/07 20:59:37.967513 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 20:59:37.967551 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 20:59:37.967601 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/07 20:59:37.971863 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 20:59:37.980560 main.go:193: Loaded pathwayoptions.html 
2022/11/07 20:59:37.980598 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 20:59:37.980637 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 20:59:37.985209 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 20:59:37.992059 main.go:193: Loaded pixmpatient.html 
2022/11/07 20:59:37.992112 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 20:59:37.992161 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/07 20:59:37.996478 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 20:59:38.000498 main.go:193: Loaded subscriptions.html 
2022/11/07 20:59:38.000531 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 20:59:38.000561 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 20:59:38.002657 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 20:59:38.006844 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 20:59:38.006878 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 20:59:38.006931 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 20:59:38.009739 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 20:59:38.013579 main.go:193: Loaded workflowtasks.html 
2022/11/07 20:59:38.013613 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 20:59:38.013645 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 20:59:38.015674 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 20:59:38.018529 main.go:193: Loaded dashboardwidget.html 
2022/11/07 20:59:38.018566 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 20:59:38.018597 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 20:59:38.020825 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/07 20:59:38.025416 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 20:59:38.025448 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 20:59:38.025484 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 20:59:38.027553 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 20:59:38.029857 main.go:193: Loaded notificationwidget.html 
2022/11/07 20:59:38.029891 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 20:59:38.029922 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 20:59:38.032839 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 20:59:38.034579 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 20:59:38.034617 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 20:59:38.034677 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 20:59:38.036769 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/07 20:59:38.040699 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 20:59:38.040732 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 20:59:38.040762 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 20:59:38.042711 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 20:59:38.044941 main.go:193: Loaded workflows.html 
2022/11/07 20:59:38.044977 main.go:171: Persisting HTML Template workflows.html
2022/11/07 20:59:38.045015 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 20:59:38.047057 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 20:59:38.050167 main.go:193: Loaded adminspawidget.html 
2022/11/07 20:59:38.050202 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 20:59:38.050269 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 20:59:38.052230 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 20:59:38.054785 main.go:193: Loaded spawidget.html 
2022/11/07 20:59:38.054820 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 20:59:38.054852 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 20:59:38.057505 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget]
2022/11/07 20:59:38.060213 main.go:193: Loaded newworkflow.html 
2022/11/07 20:59:38.060249 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 20:59:38.060289 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 20:59:38.062878 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 20:59:38.065072 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 20:59:38.065105 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 20:59:38.065136 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 20:59:38.067774 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 20:59:38.070381 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 20:59:38.070416 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 20:59:38.070486 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 20:59:38.072623 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 20:59:38.076181 main.go:193: Loaded footer.html 
2022/11/07 20:59:38.076217 main.go:171: Persisting HTML Template footer.html
2022/11/07 20:59:38.076247 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 20:59:38.078998 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 20:59:38.082410 main.go:193: Loaded events.html 
2022/11/07 20:59:38.082443 main.go:171: Persisting HTML Template events.html
2022/11/07 20:59:38.082473 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 20:59:38.084485 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 20:59:38.087153 main.go:193: Loaded header.html 
2022/11/07 20:59:38.087194 main.go:171: Persisting HTML Template header.html
2022/11/07 20:59:38.087234 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 20:59:38.090020 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 20:59:38.093565 main.go:193: Loaded pixpatient.html 
2022/11/07 20:59:38.093602 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 20:59:38.093635 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 20:59:38.096705 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 20:59:38.099989 main.go:193: Loaded horizontalline.html 
2022/11/07 20:59:38.100020 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 20:59:38.100051 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 20:59:38.101699 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 20:59:38.102984 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 20:59:38.103019 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 20:59:38.103050 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 20:59:38.104150 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 20:59:38.106288 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 20:59:38.106325 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 20:59:38.106356 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 20:59:38.108502 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 20:59:38.110665 main.go:193: Loaded workflow.html 
2022/11/07 20:59:38.110697 main.go:171: Persisting HTML Template workflow.html
2022/11/07 20:59:38.110726 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 20:59:38.113743 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 20:59:38.116188 main.go:193: Loaded wfconfig.html 
2022/11/07 20:59:38.116223 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 20:59:38.116254 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/07 20:59:38.118306 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 20:59:38.120537 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 20:59:38.120573 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 20:59:38.120631 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 20:59:38.122695 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 20:59:38.127632 main.go:193: Loaded timelinewidget.html 
2022/11/07 20:59:38.127666 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 20:59:38.127697 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 20:59:38.130394 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/07 21:01:38.571526 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:01:38.572867 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:01:38.572953 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:01:38.575530 main.go:193: Loaded subscribe.xml 
2022/11/07 21:01:38.575569 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:01:38.575694 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 21:01:38.596134 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:01:38.600204 main.go:193: Loaded brokerack.xml 
2022/11/07 21:01:38.600249 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:01:38.600285 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 21:01:38.608018 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:01:38.611909 main.go:193: Loaded cancel.xml 
2022/11/07 21:01:38.611948 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:01:38.611989 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/07 21:01:38.614462 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 21:01:38.621594 main.go:193: Loaded stsrst.xml 
2022/11/07 21:01:38.621668 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:01:38.621724 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:01:38.624308 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/07 21:01:38.626572 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:01:38.626609 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:01:38.626642 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 21:01:38.629953 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:01:38.638027 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:01:38.638074 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:01:38.638122 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 21:01:38.642407 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/07 21:01:38.646099 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:01:38.646138 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:01:38.646170 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:01:38.648534 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status]
2022/11/07 21:01:38.651634 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:01:38.651679 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:01:38.651743 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:01:38.657656 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 21:01:38.661575 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:01:38.661626 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:01:38.661689 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 21:01:38.663485 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:01:38.670131 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:01:38.670170 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:01:38.670208 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 21:01:38.673644 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions %!s(bool=false)]
2022/11/07 21:01:38.677701 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:01:38.677741 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:01:38.677795 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:01:38.680666 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:01:38.684228 main.go:193: Loaded subscriptions.html 
2022/11/07 21:01:38.684268 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:01:38.684310 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 21:01:38.686813 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:01:38.691158 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:01:38.691210 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:01:38.691257 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:01:38.693777 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 21:01:38.697560 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:01:38.697599 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:01:38.697637 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:01:38.700359 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 21:01:38.704561 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:01:38.704600 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:01:38.704646 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 21:01:38.707291 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 21:01:38.711096 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:01:38.711126 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:01:38.711157 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 21:01:38.713133 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/07 21:01:38.716438 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:01:38.716487 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:01:38.716528 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 21:01:38.719221 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 21:01:38.724856 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:01:38.724894 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:01:38.724932 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:01:38.729621 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 21:01:38.767696 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:01:38.767757 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:01:38.768133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/07 21:01:38.771264 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 21:01:38.775493 main.go:193: Loaded workflows.html 
2022/11/07 21:01:38.775526 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:01:38.775558 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 21:01:38.784624 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows %!s(bool=false)]
2022/11/07 21:01:38.793776 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:01:38.793813 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:01:38.794096 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 21:01:38.798491 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:01:38.802711 main.go:193: Loaded spawidget.html 
2022/11/07 21:01:38.802752 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:01:38.802786 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 21:01:38.805864 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:01:38.813027 main.go:193: Loaded newworkflow.html 
2022/11/07 21:01:38.813072 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:01:38.813113 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:01:38.816291 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 21:01:38.820033 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:01:38.820077 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:01:38.820121 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 21:01:38.824557 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:01:38.837832 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:01:38.840799 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:01:38.840837 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event]
2022/11/07 21:01:38.859390 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 21:01:38.893967 main.go:193: Loaded footer.html 
2022/11/07 21:01:38.894000 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:01:38.894034 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/07 21:01:38.906884 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/07 21:01:38.918161 main.go:193: Loaded events.html 
2022/11/07 21:01:38.918204 main.go:171: Persisting HTML Template events.html
2022/11/07 21:01:38.918241 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:01:38.924999 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 21:01:38.965012 main.go:193: Loaded header.html 
2022/11/07 21:01:38.965058 main.go:171: Persisting HTML Template header.html
2022/11/07 21:01:38.965091 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/07 21:01:38.999125 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 21:01:39.005677 main.go:193: Loaded pixpatient.html 
2022/11/07 21:01:39.005720 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:01:39.005755 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 21:01:39.025430 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:01:39.087833 main.go:193: Loaded horizontalline.html 
2022/11/07 21:01:39.087875 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:01:39.087925 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:01:39.107815 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/07 21:01:39.133542 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:01:39.133616 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:01:39.133674 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 21:01:39.137313 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/07 21:01:39.141059 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:01:39.141095 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:01:39.141129 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:01:39.159744 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/07 21:01:39.186192 main.go:193: Loaded workflow.html 
2022/11/07 21:01:39.186235 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:01:39.186269 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:01:39.200605 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:01:39.218155 main.go:193: Loaded wfconfig.html 
2022/11/07 21:01:39.218207 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:01:39.218254 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:01:39.221038 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:01:39.222910 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:01:39.222948 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:01:39.222980 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:01:39.225185 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline]
2022/11/07 21:01:39.228687 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:01:39.228720 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:01:39.228752 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 21:01:39.230281 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 21:02:59.030096 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:02:59.031017 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:02:59.031089 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:02:59.035089 main.go:193: Loaded subscribe.xml 
2022/11/07 21:02:59.035141 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:02:59.035298 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/07 21:02:59.059281 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:02:59.069180 main.go:193: Loaded brokerack.xml 
2022/11/07 21:02:59.069233 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:02:59.069294 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 21:02:59.072759 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 21:02:59.076385 main.go:193: Loaded cancel.xml 
2022/11/07 21:02:59.076589 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:02:59.076637 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 21:02:59.081297 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel %!s(bool=true)]
2022/11/07 21:02:59.086015 main.go:193: Loaded stsrst.xml 
2022/11/07 21:02:59.086057 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:02:59.086093 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:02:59.095891 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 21:02:59.100818 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:02:59.100870 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:02:59.100922 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 21:02:59.106501 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:02:59.113768 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:02:59.113806 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:02:59.113846 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 21:02:59.116951 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/07 21:02:59.124465 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:02:59.124503 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:02:59.124542 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:02:59.127299 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:02:59.132131 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:02:59.132171 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:02:59.132226 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:02:59.136037 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 21:02:59.140103 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:02:59.140133 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:02:59.140163 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/07 21:02:59.143340 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:02:59.147318 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:02:59.147361 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:02:59.147400 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/07 21:02:59.150085 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions %!s(bool=false)]
2022/11/07 21:02:59.153542 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:02:59.153579 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:02:59.153611 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:02:59.155918 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient %!s(bool=false)]
2022/11/07 21:02:59.161553 main.go:193: Loaded subscriptions.html 
2022/11/07 21:02:59.161583 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:02:59.161613 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/07 21:02:59.163848 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/07 21:02:59.168139 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:02:59.168172 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:02:59.168221 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:02:59.170386 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:02:59.173134 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:02:59.173169 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:02:59.173199 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:02:59.175868 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 21:02:59.179979 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:02:59.180018 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:02:59.180058 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 21:02:59.183071 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 21:02:59.187333 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:02:59.187373 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:02:59.187411 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 21:02:59.189744 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 21:02:59.195225 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:02:59.195263 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:02:59.195303 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 21:02:59.197617 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 21:02:59.201489 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:02:59.201534 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:02:59.201573 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:02:59.204090 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 21:02:59.207948 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:02:59.207987 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:02:59.208025 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 21:02:59.210862 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 21:02:59.213353 main.go:193: Loaded workflows.html 
2022/11/07 21:02:59.213388 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:02:59.213419 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflows]
2022/11/07 21:02:59.215435 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:02:59.220783 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:02:59.220826 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:02:59.220864 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 21:02:59.224589 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:02:59.228642 main.go:193: Loaded spawidget.html 
2022/11/07 21:02:59.228682 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:02:59.228721 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 21:02:59.231037 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/07 21:02:59.235135 main.go:193: Loaded newworkflow.html 
2022/11/07 21:02:59.235180 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:02:59.235230 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:02:59.237686 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}} newworkflow]
2022/11/07 21:02:59.240337 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:02:59.240383 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:02:59.240423 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 21:02:59.242057 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:02:59.245443 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:02:59.245474 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:02:59.245504 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:02:59.247694 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 21:02:59.251378 main.go:193: Loaded footer.html 
2022/11/07 21:02:59.251423 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:02:59.251464 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 21:02:59.253799 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 21:02:59.262293 main.go:193: Loaded events.html 
2022/11/07 21:02:59.262340 main.go:171: Persisting HTML Template events.html
2022/11/07 21:02:59.262388 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:02:59.264977 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 21:02:59.269548 main.go:193: Loaded header.html 
2022/11/07 21:02:59.269587 main.go:171: Persisting HTML Template header.html
2022/11/07 21:02:59.269619 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 21:02:59.270799 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 21:02:59.274483 main.go:193: Loaded pixpatient.html 
2022/11/07 21:02:59.274521 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:02:59.274561 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 21:02:59.276793 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:02:59.281170 main.go:193: Loaded horizontalline.html 
2022/11/07 21:02:59.281204 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:02:59.281236 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:02:59.283182 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 21:02:59.285622 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:02:59.285657 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:02:59.285692 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 21:02:59.286775 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 21:02:59.288859 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:02:59.288892 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:02:59.288929 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:02:59.290934 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 21:02:59.293086 main.go:193: Loaded workflow.html 
2022/11/07 21:02:59.293117 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:02:59.293148 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:02:59.295158 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:02:59.297306 main.go:193: Loaded wfconfig.html 
2022/11/07 21:02:59.297340 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:02:59.297388 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:02:59.298471 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:02:59.301361 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:02:59.301396 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:02:59.301427 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:02:59.304100 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 21:02:59.306108 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:02:59.306139 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:02:59.306177 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 21:02:59.307567 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget]
2022/11/07 21:03:54.727792 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:03:54.728989 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:03:54.729049 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:03:54.730647 main.go:193: Loaded subscribe.xml 
2022/11/07 21:03:54.730687 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:03:54.730809 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 21:03:54.753310 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:03:54.765936 main.go:193: Loaded brokerack.xml 
2022/11/07 21:03:54.765988 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:03:54.766051 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 21:03:54.770264 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack]
2022/11/07 21:03:54.775819 main.go:193: Loaded cancel.xml 
2022/11/07 21:03:54.775871 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:03:54.775922 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 21:03:54.791946 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 21:03:54.796231 main.go:193: Loaded stsrst.xml 
2022/11/07 21:03:54.796280 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:03:54.796359 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:03:54.799155 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/07 21:03:54.803520 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:03:54.803855 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:03:54.803935 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 21:03:54.806429 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:03:54.812045 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:03:54.812099 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:03:54.812150 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 21:03:54.814720 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:03:54.819995 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:03:54.820038 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:03:54.820231 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:03:54.822380 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:03:54.826330 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:03:54.826389 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:03:54.826430 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:03:54.829177 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 21:03:54.833215 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:03:54.833251 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:03:54.833298 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 21:03:54.835764 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:03:54.839975 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:03:54.840011 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:03:54.840045 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 21:03:54.843655 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions %!s(bool=false)]
2022/11/07 21:03:54.847710 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:03:54.847753 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:03:54.847807 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:03:54.849203 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:03:54.852870 main.go:193: Loaded subscriptions.html 
2022/11/07 21:03:54.852900 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:03:54.852932 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 21:03:54.855358 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:03:54.859383 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:03:54.859422 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:03:54.859461 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:03:54.862583 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 21:03:54.867901 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:03:54.867948 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:03:54.868107 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:03:54.872577 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 21:03:54.879794 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:03:54.879833 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:03:54.879871 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/07 21:03:54.882397 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 21:03:54.888612 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:03:54.888654 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:03:54.888691 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 21:03:54.891036 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.Workflowtimeremaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 21:03:54.895024 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:03:54.895065 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:03:54.895115 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 21:03:54.897972 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 21:03:54.901911 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:03:54.901948 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:03:54.901979 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:03:54.904606 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/07 21:03:54.908418 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:03:54.908453 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:03:54.908484 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/07 21:03:54.911535 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 21:03:54.915455 main.go:193: Loaded workflows.html 
2022/11/07 21:03:54.915494 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:03:54.915531 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 21:03:54.919019 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:03:54.923083 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:03:54.923117 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:03:54.923188 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 21:03:54.925667 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget]
2022/11/07 21:03:54.931222 main.go:193: Loaded spawidget.html 
2022/11/07 21:03:54.931264 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:03:54.931303 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/07 21:03:54.934363 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:03:54.938788 main.go:193: Loaded newworkflow.html 
2022/11/07 21:03:54.938822 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:03:54.938854 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:03:54.941478 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 21:03:54.944928 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:03:54.944968 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:03:54.945023 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_elapsedtime]
2022/11/07 21:03:54.946770 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:03:54.950349 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:03:54.950381 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:03:54.950413 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:03:54.952863 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 21:03:54.958836 main.go:193: Loaded footer.html 
2022/11/07 21:03:54.958869 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:03:54.958905 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 21:03:54.961383 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 21:03:54.965587 main.go:193: Loaded events.html 
2022/11/07 21:03:54.965623 main.go:171: Persisting HTML Template events.html
2022/11/07 21:03:54.965654 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:03:54.968192 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 21:03:54.971987 main.go:193: Loaded header.html 
2022/11/07 21:03:54.972028 main.go:171: Persisting HTML Template header.html
2022/11/07 21:03:54.972062 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 21:03:54.975083 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 21:03:54.978137 main.go:193: Loaded pixpatient.html 
2022/11/07 21:03:54.978170 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:03:54.978203 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 21:03:54.981582 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:03:54.983877 main.go:193: Loaded horizontalline.html 
2022/11/07 21:03:54.983912 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:03:54.983945 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:03:54.986141 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 21:03:54.989985 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:03:54.990021 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:03:54.990053 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 21:03:54.991907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 21:03:54.993997 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:03:54.994033 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:03:54.994063 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:03:54.996118 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 21:03:54.998718 main.go:193: Loaded workflow.html 
2022/11/07 21:03:54.998754 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:03:54.998794 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:03:55.001116 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:03:55.005576 main.go:193: Loaded wfconfig.html 
2022/11/07 21:03:55.005614 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:03:55.005657 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:03:55.007815 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:03:55.010191 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:03:55.010225 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:03:55.010265 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:03:55.012411 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:03:55.016017 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:03:55.016051 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:03:55.016082 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 21:03:55.018429 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 21:05:52.276076 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:05:52.277278 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:05:52.277342 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:05:52.279646 main.go:193: Loaded subscribe.xml 
2022/11/07 21:05:52.279686 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:05:52.279810 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 21:05:52.312682 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:05:52.318961 main.go:193: Loaded brokerack.xml 
2022/11/07 21:05:52.319004 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:05:52.319043 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 21:05:52.322972 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 21:05:52.328176 main.go:193: Loaded cancel.xml 
2022/11/07 21:05:52.328230 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:05:52.328264 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 21:05:52.331318 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 21:05:52.335361 main.go:193: Loaded stsrst.xml 
2022/11/07 21:05:52.335403 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:05:52.335587 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:05:52.339661 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 21:05:52.344128 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:05:52.344167 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:05:52.344203 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 21:05:52.346518 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:05:52.351852 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:05:52.351890 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:05:52.351927 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 21:05:52.355818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:05:52.361877 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:05:52.361913 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:05:52.361944 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:05:52.363983 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:05:52.367413 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:05:52.367445 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:05:52.367490 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:05:52.369887 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:05:52.372340 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:05:52.372375 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:05:52.372406 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 21:05:52.374578 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:05:52.379183 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:05:52.379219 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:05:52.379260 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 21:05:52.381893 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 21:05:52.384227 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:05:52.384261 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:05:52.384292 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:05:52.386322 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:05:52.389959 main.go:193: Loaded subscriptions.html 
2022/11/07 21:05:52.389993 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:05:52.390024 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 21:05:52.392164 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:05:52.395949 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:05:52.395980 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:05:52.396028 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:05:52.398433 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 21:05:52.405873 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:05:52.405926 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:05:52.405970 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:05:52.408593 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 21:05:52.414898 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:05:52.414968 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:05:52.415053 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 21:05:52.417475 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/07 21:05:52.424650 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:05:52.424687 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:05:52.424719 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 21:05:52.427034 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 21:05:52.432647 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:05:52.432682 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:05:52.432725 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 21:05:52.434986 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/07 21:05:52.438795 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:05:52.438862 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:05:52.438904 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:05:52.441371 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 21:05:52.444852 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:05:52.444889 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:05:52.444921 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 21:05:52.447290 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 21:05:52.450812 main.go:193: Loaded workflows.html 
2022/11/07 21:05:52.450848 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:05:52.450896 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 21:05:52.452900 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:05:52.456564 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:05:52.456600 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:05:52.456631 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/07 21:05:52.458818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:05:52.462568 main.go:193: Loaded spawidget.html 
2022/11/07 21:05:52.462604 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:05:52.462638 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 21:05:52.464920 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:05:52.468675 main.go:193: Loaded newworkflow.html 
2022/11/07 21:05:52.468712 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:05:52.468746 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:05:52.471134 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}} newworkflow]
2022/11/07 21:05:52.473861 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:05:52.473897 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:05:52.473930 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 21:05:52.476506 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:05:52.479345 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:05:52.479383 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:05:52.479424 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:05:52.482055 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 21:05:52.484139 main.go:193: Loaded footer.html 
2022/11/07 21:05:52.484174 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:05:52.484205 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 21:05:52.486659 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 21:05:52.490008 main.go:193: Loaded events.html 
2022/11/07 21:05:52.490041 main.go:171: Persisting HTML Template events.html
2022/11/07 21:05:52.490073 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:05:52.493695 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 21:05:52.495759 main.go:193: Loaded header.html 
2022/11/07 21:05:52.495792 main.go:171: Persisting HTML Template header.html
2022/11/07 21:05:52.495835 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 21:05:52.498042 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/07 21:05:52.500980 main.go:193: Loaded pixpatient.html 
2022/11/07 21:05:52.501018 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:05:52.501073 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 21:05:52.503312 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:05:52.506274 main.go:193: Loaded horizontalline.html 
2022/11/07 21:05:52.506368 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:05:52.506402 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:05:52.509016 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 21:05:52.515474 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:05:52.515513 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:05:52.515547 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 21:05:52.517884 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 21:05:52.528876 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:05:52.528913 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:05:52.529093 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:05:52.531449 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 21:05:52.534320 main.go:193: Loaded workflow.html 
2022/11/07 21:05:52.534356 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:05:52.534396 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:05:52.536907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:05:52.543470 main.go:193: Loaded wfconfig.html 
2022/11/07 21:05:52.543512 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:05:52.543567 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:05:52.546818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:05:52.550728 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:05:52.550765 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:05:52.550819 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:05:52.553319 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/07 21:05:52.561284 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:05:52.561330 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:05:52.561376 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/07 21:05:52.563529 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 21:08:10.609758 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:08:10.611115 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:08:10.611172 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:08:10.612790 main.go:193: Loaded subscribe.xml 
2022/11/07 21:08:10.612833 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:08:10.612960 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 21:08:10.631192 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:08:10.634974 main.go:193: Loaded brokerack.xml 
2022/11/07 21:08:10.635015 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:08:10.635050 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/07 21:08:10.637802 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/07 21:08:10.641277 main.go:193: Loaded cancel.xml 
2022/11/07 21:08:10.641330 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:08:10.641369 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/07 21:08:10.644482 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 21:08:10.648853 main.go:193: Loaded stsrst.xml 
2022/11/07 21:08:10.648887 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:08:10.648942 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:08:10.650472 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 21:08:10.657081 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:08:10.657115 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:08:10.657148 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/07 21:08:10.659449 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:08:10.662624 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:08:10.662660 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:08:10.662694 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) xdsodd]
2022/11/07 21:08:10.665164 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:08:10.671393 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:08:10.671479 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:08:10.671512 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:08:10.674701 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 21:08:10.678731 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:08:10.678763 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:08:10.678805 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:08:10.680149 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 21:08:10.683971 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:08:10.684020 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:08:10.684085 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 21:08:10.686680 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:08:10.688477 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:08:10.688513 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:08:10.688545 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 21:08:10.689944 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 21:08:10.693854 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:08:10.693889 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:08:10.693933 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:08:10.697132 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/07 21:08:10.700989 main.go:193: Loaded subscriptions.html 
2022/11/07 21:08:10.701023 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:08:10.701054 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 21:08:10.702361 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions %!s(bool=false)]
2022/11/07 21:08:10.706800 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:08:10.706832 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:08:10.706864 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:08:10.709270 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 21:08:10.714899 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:08:10.714935 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:08:10.714967 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:08:10.717310 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/07 21:08:10.720849 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:08:10.720885 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:08:10.720917 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/07 21:08:10.723315 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/07 21:08:10.727539 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:08:10.727576 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:08:10.727610 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/07 21:08:10.730406 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/07 21:08:10.733139 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:08:10.733173 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:08:10.733213 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/07 21:08:10.735491 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/07 21:08:10.739525 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:08:10.739560 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:08:10.739592 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:08:10.744508 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 21:08:10.748063 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:08:10.748098 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:08:10.748130 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/07 21:08:10.749547 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header]
2022/11/07 21:08:10.753813 main.go:193: Loaded workflows.html 
2022/11/07 21:08:10.753854 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:08:10.753902 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/07 21:08:10.756298 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 21:08:10.760903 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:08:10.760942 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:08:10.760975 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 21:08:10.763759 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget %!s(bool=false)]
2022/11/07 21:08:10.767817 main.go:193: Loaded spawidget.html 
2022/11/07 21:08:10.767908 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:08:10.767949 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 21:08:10.770954 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:08:10.774993 main.go:193: Loaded newworkflow.html 
2022/11/07 21:08:10.775037 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:08:10.775072 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:08:10.778195 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 21:08:10.781895 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:08:10.781934 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:08:10.781966 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 21:08:10.784714 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:08:10.788524 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:08:10.788563 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:08:10.788595 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:08:10.791027 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:08:10.796934 main.go:193: Loaded footer.html 
2022/11/07 21:08:10.796971 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:08:10.797003 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 21:08:10.799033 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/07 21:08:10.802630 main.go:193: Loaded events.html 
2022/11/07 21:08:10.802667 main.go:171: Persisting HTML Template events.html
2022/11/07 21:08:10.802710 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:08:10.805092 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events]
2022/11/07 21:08:10.809377 main.go:193: Loaded header.html 
2022/11/07 21:08:10.809417 main.go:171: Persisting HTML Template header.html
2022/11/07 21:08:10.809451 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 21:08:10.813389 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/07 21:08:10.817858 main.go:193: Loaded pixpatient.html 
2022/11/07 21:08:10.817896 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:08:10.817937 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/07 21:08:10.820593 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:08:10.825511 main.go:193: Loaded horizontalline.html 
2022/11/07 21:08:10.825557 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:08:10.825590 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:08:10.828151 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/07 21:08:10.832090 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:08:10.832126 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:08:10.832160 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_events]
2022/11/07 21:08:10.834605 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 21:08:10.837938 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:08:10.837977 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:08:10.838016 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:08:10.841275 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 21:08:10.846060 main.go:193: Loaded workflow.html 
2022/11/07 21:08:10.846114 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:08:10.846157 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:08:10.850516 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:08:10.856859 main.go:193: Loaded wfconfig.html 
2022/11/07 21:08:10.856902 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:08:10.856935 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:08:10.860101 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}} wfconfig]
2022/11/07 21:08:10.870706 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:08:10.870752 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:08:10.870786 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:08:10.873364 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline]
2022/11/07 21:08:10.876273 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:08:10.876319 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:08:10.876354 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 21:08:10.882617 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/07 21:10:21.275997 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/07 21:10:21.277191 main.go:199: Loaded log file - ./logs/2022/1107.log
2022/11/07 21:10:21.277329 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/07 21:10:21.283572 main.go:193: Loaded subscribe.xml 
2022/11/07 21:10:21.283616 main.go:153: Persisting XML Template subscribe.xml
2022/11/07 21:10:21.283747 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/07 21:10:21.293322 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/07 21:10:21.300354 main.go:193: Loaded brokerack.xml 
2022/11/07 21:10:21.300392 main.go:153: Persisting XML Template brokerack.xml
2022/11/07 21:10:21.300426 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) brokerack]
2022/11/07 21:10:21.303245 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/07 21:10:21.306744 main.go:193: Loaded cancel.xml 
2022/11/07 21:10:21.306774 main.go:153: Persisting XML Template cancel.xml
2022/11/07 21:10:21.306816 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/07 21:10:21.309178 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/07 21:10:21.312088 main.go:193: Loaded stsrst.xml 
2022/11/07 21:10:21.312133 main.go:153: Persisting XML Template stsrst.xml
2022/11/07 21:10:21.312170 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/07 21:10:21.315770 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/07 21:10:21.321011 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/07 21:10:21.321045 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/07 21:10:21.321078 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/07 21:10:21.323150 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:10:21.325806 main.go:193: Loaded xdsodd.xml 
2022/11/07 21:10:21.325843 main.go:153: Persisting XML Template xdsodd.xml
2022/11/07 21:10:21.325877 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/07 21:10:21.327155 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/07 21:10:21.332858 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/07 21:10:21.332895 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/07 21:10:21.332941 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/07 21:10:21.335940 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/07 21:10:21.338371 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/07 21:10:21.338405 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/07 21:10:21.338446 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/07 21:10:21.341141 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/07 21:10:21.343037 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/07 21:10:21.343069 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/07 21:10:21.343099 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/07 21:10:21.345414 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/07 21:10:21.351068 main.go:193: Loaded pathwayoptions.html 
2022/11/07 21:10:21.351102 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/07 21:10:21.351133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/07 21:10:21.352937 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/07 21:10:21.356138 main.go:193: Loaded pixmpatient.html 
2022/11/07 21:10:21.356172 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/07 21:10:21.356203 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/07 21:10:21.357776 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:10:21.360402 main.go:193: Loaded subscriptions.html 
2022/11/07 21:10:21.360439 main.go:171: Persisting HTML Template subscriptions.html
2022/11/07 21:10:21.360472 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/07 21:10:21.362624 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/07 21:10:21.365014 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/07 21:10:21.365071 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/07 21:10:21.365102 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/07 21:10:21.366277 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/07 21:10:21.368262 main.go:193: Loaded workflowtasks.html 
2022/11/07 21:10:21.368296 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/07 21:10:21.368327 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/07 21:10:21.370671 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: blue" for="completeby">Complete By</label> 
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: blue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: blue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/07 21:10:21.374332 main.go:193: Loaded dashboardwidget.html 
2022/11/07 21:10:21.374363 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/07 21:10:21.374394 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/07 21:10:21.376090 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/07 21:10:21.379581 main.go:193: Loaded snip_workflow_header.html 
2022/11/07 21:10:21.379614 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/07 21:10:21.379648 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/07 21:10:21.381670 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{.IsWorkflowOverdue}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{.IsWorkflowOverdue}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/07 21:10:21.383933 main.go:193: Loaded notificationwidget.html 
2022/11/07 21:10:21.383967 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/07 21:10:21.383999 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) notificationwidget]
2022/11/07 21:10:21.386022 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/07 21:10:21.388497 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/07 21:10:21.388526 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/07 21:10:21.388553 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/07 21:10:21.391172 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/07 21:10:21.393572 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/07 21:10:21.393601 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/07 21:10:21.393639 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/07 21:10:21.394873 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/07 21:10:21.398403 main.go:193: Loaded workflows.html 
2022/11/07 21:10:21.398430 main.go:171: Persisting HTML Template workflows.html
2022/11/07 21:10:21.398457 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflows]
2022/11/07 21:10:21.400597 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/07 21:10:21.404353 main.go:193: Loaded adminspawidget.html 
2022/11/07 21:10:21.404387 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/07 21:10:21.404434 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/07 21:10:21.407140 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget %!s(bool=false)]
2022/11/07 21:10:21.412741 main.go:193: Loaded spawidget.html 
2022/11/07 21:10:21.412781 main.go:171: Persisting HTML Template spawidget.html
2022/11/07 21:10:21.412823 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/07 21:10:21.415193 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/07 21:10:21.419447 main.go:193: Loaded newworkflow.html 
2022/11/07 21:10:21.419484 main.go:171: Persisting HTML Template newworkflow.html
2022/11/07 21:10:21.419518 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/07 21:10:21.422469 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/07 21:10:21.426544 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/07 21:10:21.426585 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/07 21:10:21.426643 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/07 21:10:21.429275 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/07 21:10:21.433140 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/07 21:10:21.433173 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/07 21:10:21.433206 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/07 21:10:21.435710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/07 21:10:21.439538 main.go:193: Loaded footer.html 
2022/11/07 21:10:21.439568 main.go:171: Persisting HTML Template footer.html
2022/11/07 21:10:21.439606 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/07 21:10:21.441930 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/07 21:10:21.447841 main.go:193: Loaded events.html 
2022/11/07 21:10:21.447870 main.go:171: Persisting HTML Template events.html
2022/11/07 21:10:21.447902 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/07 21:10:21.449440 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/07 21:10:21.453561 main.go:193: Loaded header.html 
2022/11/07 21:10:21.453594 main.go:171: Persisting HTML Template header.html
2022/11/07 21:10:21.453628 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/07 21:10:21.455995 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/07 21:10:21.459838 main.go:193: Loaded pixpatient.html 
2022/11/07 21:10:21.459866 main.go:171: Persisting HTML Template pixpatient.html
2022/11/07 21:10:21.459892 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/07 21:10:21.462312 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/07 21:10:21.466048 main.go:193: Loaded horizontalline.html 
2022/11/07 21:10:21.466079 main.go:171: Persisting HTML Template horizontalline.html
2022/11/07 21:10:21.466133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/07 21:10:21.468772 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/07 21:10:21.472918 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/07 21:10:21.472961 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/07 21:10:21.473004 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/07 21:10:21.475522 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/07 21:10:21.479670 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/07 21:10:21.479703 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/07 21:10:21.479738 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/07 21:10:21.482417 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/07 21:10:21.485459 main.go:193: Loaded workflow.html 
2022/11/07 21:10:21.485492 main.go:171: Persisting HTML Template workflow.html
2022/11/07 21:10:21.485548 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/07 21:10:21.488159 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/07 21:10:21.491525 main.go:193: Loaded wfconfig.html 
2022/11/07 21:10:21.491557 main.go:171: Persisting HTML Template wfconfig.html
2022/11/07 21:10:21.491600 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/07 21:10:21.493630 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/07 21:10:21.497763 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/07 21:10:21.497796 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/07 21:10:21.497828 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:10:21.500491 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/07 21:10:21.504026 main.go:193: Loaded timelinewidget.html 
2022/11/07 21:10:21.504057 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/07 21:10:21.504090 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/07 21:10:21.506606 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
