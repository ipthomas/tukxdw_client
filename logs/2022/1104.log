2022/11/04 17:39:56.277301 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 17:39:56.277355 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 17:39:56.277395 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 17:39:56.277492 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 17:39:56.277516 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 17:39:56.277613 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 17:39:56.307723 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 17:39:56.307792 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 17:39:56.311573 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 17:39:56.311632 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 17:39:56.311665 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 17:39:56.325147 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 17:39:56.325259 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 17:39:56.331269 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 17:39:56.335863 tukdbint.go:917: Created Prepared Statement INSERT INTO events (confcode, formatcode, role, facilitycode, practicecode, xdspid, xdsdocentryuid, topic, docname, authors, user, pathway, taskid, classcode, expression, repositoryuniqueid, nhsid, org, comments, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [N urn:ihe:iti:xdw:2011:workflowDoc Clinical path Path-PS1 NA urn:ihe:iti:xdw:2013:workflowInstanceId $XDSDocumentEntryTypeCode PATHALERT-9999999468 Clinical pbradley pbradley pathalert %!s(int=1) Workflow Management Path_Anomaly_Identified ODD 9999999468 lth User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0)]
2022/11/04 17:39:56.357352 tukxdw.go:738: Created Event ID :  = 133
2022/11/04 17:39:56.357395 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 17:39:56.357447 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:39:56.357463 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:39:56.357490 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 17:39:56.357508 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:39:56.357616 tukdbint.go:917: Created Prepared Statement INSERT INTO events (facilitycode, role, version, taskid, user, org, topic, classcode, expression, xdspid, repositoryuniqueid, nhsid, xdsdocentryuid, comments, pathway, docname, confcode, formatcode, practicecode, authors) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [path Clinical %!s(int=0) %!s(int=2) pbradley lth $XDSDocumentEntryTypeCode Workflow Management Path_Anomily_Claimed NA ODD 9999999468 urn:ihe:iti:xdw:2013:workflowInstanceId User pbradley from lth in the role of Clinical created new pathalert Workflow pathalert PATHALERT-9999999468 N urn:ihe:iti:xdw:2011:workflowDoc Path-PS1 Clinical pbradley]
2022/11/04 17:39:56.359745 tukxdw.go:738: Created Event ID :  = 134
2022/11/04 17:39:56.359817 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 17:39:56.359846 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:39:56.359867 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:39:56.359886 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 17:39:56.359950 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 17:39:56.359967 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:39:56.360332 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 17:39:56.360603 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (xdw_key, xdw_uid, xdw_doc, xdw_def, version, published, pathway, nhsid) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211173956335.27660 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211173956335.27660" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T17:39:56.335703Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211173956335.27660^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T17:39:56.335703Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T17:39:56.335703Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:39:56.335703Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:39:56.335703Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>133</id>
          <eventTime>2022-11-04T17:39:56.335703Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:39:56.335703Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:39:56.335703Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>134</id>
          <eventTime>2022-11-04T17:39:56.335703Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert 9999999468]
2022/11/04 17:39:56.367975 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 17:49:16.755481 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 17:49:16.756829 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 17:49:16.756899 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 17:49:16.756994 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 17:49:16.757020 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 17:49:16.757118 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 17:49:16.772931 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 17:49:16.773021 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 17:49:16.774421 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 17:49:16.774491 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 17:49:16.774543 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 17:49:16.779965 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 17:49:16.780057 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 17:49:16.785847 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 17:49:16.786894 tukdbint.go:917: Created Prepared Statement INSERT INTO events (formatcode, xdsdocentryuid, org, role, topic, classcode, confcode, version, expression, repositoryuniqueid, xdspid, user, taskid, docname, practicecode, nhsid, pathway, comments, facilitycode, authors) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId lth Clinical $XDSDocumentEntryTypeCode Workflow Management N %!s(int=0) Path_Anomaly_Identified ODD NA pbradley %!s(int=1) PATHALERT-9999999468 Path-PS1 9999999468 pathalert User pbradley from lth in the role of Clinical created new pathalert Workflow path Clinical pbradley]
2022/11/04 17:49:16.794989 tukxdw.go:738: Created Event ID :  = 137
2022/11/04 17:49:16.795030 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 17:49:16.795057 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:49:16.795074 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:49:16.795094 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 17:49:16.795130 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:49:16.795298 tukdbint.go:917: Created Prepared Statement INSERT INTO events (xdspid, comments, taskid, docname, formatcode, facilitycode, practicecode, authors, pathway, classcode, confcode, xdsdocentryuid, nhsid, org, role, topic, version, expression, repositoryuniqueid, user) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [NA User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=2) PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc path Path-PS1 Clinical pbradley pathalert Workflow Management N urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 lth Clinical $XDSDocumentEntryTypeCode %!s(int=0) Path_Anomily_Claimed ODD pbradley]
2022/11/04 17:49:16.797479 tukxdw.go:738: Created Event ID :  = 138
2022/11/04 17:49:16.797513 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 17:49:16.797527 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:49:16.797555 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:49:16.797566 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 17:49:16.797578 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 17:49:16.797587 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:49:16.797872 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 17:49:16.798072 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published, pathway) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211174916786.75488 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211174916786.75488" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T17:49:16.786728Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211174916786.75488^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T17:49:16.786728Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T17:49:16.786728Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:49:16.786728Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:49:16.786728Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>137</id>
          <eventTime>2022-11-04T17:49:16.786728Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:49:16.786728Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:49:16.786728Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>138</id>
          <eventTime>2022-11-04T17:49:16.786728Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert]
2022/11/04 17:49:16.801630 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 17:49:51.803361 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 17:49:51.804428 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 17:49:51.804507 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 17:49:51.804610 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 17:49:51.804636 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 17:49:51.804742 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 17:49:51.814906 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 17:49:51.814971 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 17:49:51.815800 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 17:49:51.815850 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 17:49:51.815885 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 17:49:51.816568 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 17:49:51.816641 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 17:49:51.817573 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 17:49:51.819070 tukdbint.go:917: Created Prepared Statement INSERT INTO events (topic, comments, facilitycode, xdsdocentryuid, pathway, docname, nhsid, xdspid, repositoryuniqueid, user, org, role, taskid, formatcode, expression, practicecode, authors, version, classcode, confcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [$XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow path urn:ihe:iti:xdw:2013:workflowInstanceId pathalert PATHALERT-9999999468 9999999468 NA ODD pbradley lth Clinical %!s(int=1) urn:ihe:iti:xdw:2011:workflowDoc Path_Anomaly_Identified Path-PS1 Clinical pbradley %!s(int=0) Workflow Management N]
2022/11/04 17:49:51.825790 tukxdw.go:738: Created Event ID :  = 139
2022/11/04 17:49:51.825833 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 17:49:51.825857 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:49:51.825880 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:49:51.825898 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 17:49:51.825912 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:49:51.826026 tukdbint.go:917: Created Prepared Statement INSERT INTO events (confcode, formatcode, authors, user, comments, classcode, practicecode, expression, nhsid, org, role, topic, version, facilitycode, xdspid, xdsdocentryuid, repositoryuniqueid, pathway, taskid, docname) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [N urn:ihe:iti:xdw:2011:workflowDoc Clinical pbradley pbradley User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management Path-PS1 Path_Anomily_Claimed 9999999468 lth Clinical $XDSDocumentEntryTypeCode %!s(int=0) path NA urn:ihe:iti:xdw:2013:workflowInstanceId ODD pathalert %!s(int=2) PATHALERT-9999999468]
2022/11/04 17:49:51.831050 tukxdw.go:738: Created Event ID :  = 140
2022/11/04 17:49:51.831088 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 17:49:51.831106 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 17:49:51.831122 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 17:49:51.831136 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 17:49:51.831152 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 17:49:51.831165 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 17:49:51.831514 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 17:49:51.831776 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published, pathway) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211174951818.80274 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211174951818.80274" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T17:49:51.818934Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211174951818.80274^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T17:49:51.818934Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T17:49:51.818934Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:49:51.818934Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:49:51.818934Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>139</id>
          <eventTime>2022-11-04T17:49:51.818934Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T17:49:51.818934Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T17:49:51.818934Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>140</id>
          <eventTime>2022-11-04T17:49:51.818934Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert]
2022/11/04 17:49:51.834148 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 21:04:13.862988 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 21:04:13.864122 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 21:04:13.864199 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 21:04:13.864299 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 21:04:13.864325 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 21:04:13.864425 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 21:04:13.880527 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 21:04:13.880592 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 21:04:13.882528 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 21:04:13.882586 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 21:04:13.882618 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 21:04:13.895926 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 21:04:13.896011 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 21:04:13.906679 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 21:04:13.910225 tukdbint.go:917: Created Prepared Statement INSERT INTO events (docname, org, pathway, classcode, formatcode, expression, role, version, facilitycode, practicecode, authors, xdspid, xdsdocentryuid, user, taskid, confcode, repositoryuniqueid, nhsid, topic, comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT-9999999468 lth pathalert Workflow Management urn:ihe:iti:xdw:2011:workflowDoc Path_Anomaly_Identified Clinical %!s(int=0) path Path-PS1 Clinical pbradley NA urn:ihe:iti:xdw:2013:workflowInstanceId pbradley %!s(int=1) N ODD 9999999468 $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow]
2022/11/04 21:04:13.918316 tukxdw.go:738: Created Event ID :  = 145
2022/11/04 21:04:13.918356 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 21:04:13.918379 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 21:04:13.918391 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 21:04:13.918403 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 21:04:13.918429 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 21:04:13.918481 tukdbint.go:917: Created Prepared Statement INSERT INTO events (docname, confcode, repositoryuniqueid, user, pathway, version, comments, taskid, formatcode, practicecode, expression, xdspid, xdsdocentryuid, topic, classcode, facilitycode, authors, nhsid, org, role) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT-9999999468 N ODD pbradley pathalert %!s(int=0) User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=2) urn:ihe:iti:xdw:2011:workflowDoc Path-PS1 Path_Anomily_Claimed NA urn:ihe:iti:xdw:2013:workflowInstanceId $XDSDocumentEntryTypeCode Workflow Management path Clinical pbradley 9999999468 lth Clinical]
2022/11/04 21:04:13.922106 tukxdw.go:738: Created Event ID :  = 146
2022/11/04 21:04:13.922138 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 21:04:13.922153 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 21:04:13.922164 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 21:04:13.922175 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 21:04:13.922187 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 21:04:13.922196 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 21:04:13.922471 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 21:04:13.922669 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (xdw_doc, xdw_def, version, published, pathway, nhsid, xdw_key, xdw_uid) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [<XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211210413910.86227" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T21:04:13.910118Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211210413910.86227^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T21:04:13.910118Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T21:04:13.910118Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T21:04:13.910118Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T21:04:13.910118Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>145</id>
          <eventTime>2022-11-04T21:04:13.910118Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T21:04:13.910118Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T21:04:13.910118Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>146</id>
          <eventTime>2022-11-04T21:04:13.910118Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211210413910.86227]
2022/11/04 21:04:13.927692 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 21:34:21.741032 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 21:34:21.741983 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 21:34:21.742055 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 21:34:21.742181 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 21:34:21.742205 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 21:34:21.742303 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 21:34:21.748343 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 21:34:21.748402 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 21:34:21.749270 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 21:34:21.749319 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 21:34:21.749346 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 21:34:21.752048 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 21:34:21.752115 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 21:34:21.752883 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 21:34:21.756424 tukdbint.go:917: Created Prepared Statement INSERT INTO events (authors, pathway, version, taskid, docname, formatcode, xdsdocentryuid, topic, comments, facilitycode, expression, practicecode, xdspid, repositoryuniqueid, nhsid, user, org, classcode, confcode, role) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Clinical pbradley pathalert %!s(int=0) %!s(int=1) PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow path Path_Anomaly_Identified Path-PS1 NA ODD 9999999468 pbradley lth Workflow Management N Clinical]
2022/11/04 21:34:21.760607 tukxdw.go:738: Created Event ID :  = 148
2022/11/04 21:34:21.760642 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 21:34:21.760690 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 21:34:21.760703 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 21:34:21.760730 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 21:34:21.760745 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 21:34:21.760856 tukdbint.go:917: Created Prepared Statement INSERT INTO events (org, role, comments, confcode, formatcode, xdspid, classcode, practicecode, expression, repositoryuniqueid, nhsid, topic, pathway, version, docname, facilitycode, authors, xdsdocentryuid, user, taskid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [lth Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow N urn:ihe:iti:xdw:2011:workflowDoc NA Workflow Management Path-PS1 Path_Anomily_Claimed ODD 9999999468 $XDSDocumentEntryTypeCode pathalert %!s(int=0) PATHALERT-9999999468 path Clinical pbradley urn:ihe:iti:xdw:2013:workflowInstanceId pbradley %!s(int=2)]
2022/11/04 21:34:21.764337 tukxdw.go:738: Created Event ID :  = 149
2022/11/04 21:34:21.764379 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 21:34:21.764394 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 21:34:21.764411 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 21:34:21.764423 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 21:34:21.764438 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 21:34:21.764449 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 21:34:21.764756 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 21:34:21.765557 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (xdw_def, version, published, pathway, nhsid, xdw_key, xdw_uid, xdw_doc) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [{"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211213421756.73937 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211213421756.73937" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T21:34:21.756315Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211213421756.73937^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T21:34:21.756315Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T21:34:21.756315Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T21:34:21.756315Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T21:34:21.756315Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>148</id>
          <eventTime>2022-11-04T21:34:21.756315Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T21:34:21.756315Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T21:34:21.756315Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>149</id>
          <eventTime>2022-11-04T21:34:21.756315Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument>]
2022/11/04 21:34:21.776367 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 21:38:12.823047 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 21:38:12.824048 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 21:38:12.824120 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 21:38:12.824663 main.go:193: Loaded subscribe.xml 
2022/11/04 21:38:12.824689 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 21:38:12.824812 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/04 21:38:12.847047 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/04 21:38:12.853295 main.go:193: Loaded brokerack.xml 
2022/11/04 21:38:12.853351 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 21:38:12.853457 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 21:38:12.860142 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 21:38:12.863267 main.go:193: Loaded cancel.xml 
2022/11/04 21:38:12.863306 main.go:153: Persisting XML Template cancel.xml
2022/11/04 21:38:12.863342 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/04 21:38:12.867498 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 21:38:12.869238 main.go:193: Loaded stsrst.xml 
2022/11/04 21:38:12.869270 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 21:38:12.869298 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/04 21:38:12.874026 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/04 21:38:12.878748 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 21:38:12.878788 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 21:38:12.878825 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/04 21:38:12.882575 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/04 21:38:12.885686 main.go:193: Loaded xdsodd.xml 
2022/11/04 21:38:12.885730 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 21:38:12.885759 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/04 21:38:12.889601 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/04 21:38:12.898371 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 21:38:12.898404 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 21:38:12.898431 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/04 21:38:12.901098 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 21:38:12.903580 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 21:38:12.903618 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 21:38:12.903659 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 21:38:12.907819 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 21:38:12.910464 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 21:38:12.910494 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 21:38:12.910530 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/04 21:38:12.913743 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/04 21:38:12.916610 main.go:193: Loaded pathwayoptions.html 
2022/11/04 21:38:12.916637 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 21:38:12.916674 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/04 21:38:12.919052 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/04 21:38:12.924232 main.go:193: Loaded pixmpatient.html 
2022/11/04 21:38:12.924266 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 21:38:12.924302 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/04 21:38:12.931035 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/04 21:38:12.934539 main.go:193: Loaded subscriptions.html 
2022/11/04 21:38:12.934569 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 21:38:12.934597 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/04 21:38:12.937708 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/04 21:38:12.939522 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 21:38:12.939554 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 21:38:12.939591 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 21:38:12.942578 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/04 21:38:12.947730 main.go:193: Loaded workflowtasks.html 
2022/11/04 21:38:12.947758 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 21:38:12.947795 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/04 21:38:12.949996 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 21:38:12.954565 main.go:193: Loaded dashboardwidget.html 
2022/11/04 21:38:12.954601 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 21:38:12.954645 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 21:38:12.956985 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/04 21:38:12.961993 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 21:38:12.962024 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 21:38:12.962055 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/04 21:38:12.964555 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/04 21:38:12.970431 main.go:193: Loaded notificationwidget.html 
2022/11/04 21:38:12.970465 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 21:38:12.970493 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/04 21:38:12.973984 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/04 21:38:12.981351 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 21:38:12.981375 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 21:38:12.981402 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/04 21:38:12.987504 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/04 21:38:12.990233 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 21:38:12.990288 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 21:38:12.990323 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 21:38:12.992511 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/04 21:38:12.996141 main.go:193: Loaded workflows.html 
2022/11/04 21:38:12.996174 main.go:171: Persisting HTML Template workflows.html
2022/11/04 21:38:12.996202 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 21:38:12.998805 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/04 21:38:13.002876 main.go:193: Loaded adminspawidget.html 
2022/11/04 21:38:13.002925 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 21:38:13.002955 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/04 21:38:13.004590 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 21:38:13.010275 main.go:193: Loaded spawidget.html 
2022/11/04 21:38:13.010305 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 21:38:13.010334 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/04 21:38:13.013045 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 21:38:13.016854 main.go:193: Loaded newworkflow.html 
2022/11/04 21:38:13.017793 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 21:38:13.017853 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 21:38:13.020252 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 21:38:13.022850 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 21:38:13.022888 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 21:38:13.022922 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 21:38:13.025212 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/04 21:38:13.029464 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 21:38:13.029505 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 21:38:13.029533 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/04 21:38:13.031299 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/04 21:38:13.033140 main.go:193: Loaded footer.html 
2022/11/04 21:38:13.033171 main.go:171: Persisting HTML Template footer.html
2022/11/04 21:38:13.033203 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 21:38:13.035262 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/04 21:38:13.038244 main.go:193: Loaded events.html 
2022/11/04 21:38:13.038277 main.go:171: Persisting HTML Template events.html
2022/11/04 21:38:13.038313 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 21:38:13.042085 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/04 21:38:13.044348 main.go:193: Loaded header.html 
2022/11/04 21:38:13.044381 main.go:171: Persisting HTML Template header.html
2022/11/04 21:38:13.044423 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 21:38:13.046043 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/04 21:38:13.049875 main.go:193: Loaded pixpatient.html 
2022/11/04 21:38:13.049900 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 21:38:13.049928 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/04 21:38:13.053019 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/04 21:38:13.057834 main.go:193: Loaded horizontalline.html 
2022/11/04 21:38:13.057866 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 21:38:13.057902 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/04 21:38:13.061056 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/04 21:38:13.066082 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 21:38:13.066113 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 21:38:13.066159 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 21:38:13.067857 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 21:38:13.069899 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 21:38:13.069927 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 21:38:13.069963 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_overdue]
2022/11/04 21:38:13.072901 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/04 21:38:13.075968 main.go:193: Loaded workflow.html 
2022/11/04 21:38:13.075995 main.go:171: Persisting HTML Template workflow.html
2022/11/04 21:38:13.076022 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 21:38:13.078246 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow %!s(bool=false)]
2022/11/04 21:38:13.080488 main.go:193: Loaded usereventform.html 
2022/11/04 21:38:13.080517 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 21:38:13.080551 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 21:38:13.082919 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/04 21:38:13.085167 main.go:193: Loaded wfconfig.html 
2022/11/04 21:38:13.085195 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 21:38:13.085222 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/04 21:38:13.087289 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/04 21:38:13.093212 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 21:38:13.093250 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 21:38:13.093284 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 21:38:13.095847 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/04 21:38:13.101999 main.go:193: Loaded timelinewidget.html 
2022/11/04 21:38:13.102046 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 21:38:13.102086 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/04 21:38:13.107370 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{else}}
                                   <p style="color:darkgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                    <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/04 21:45:00.898956 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 21:45:00.900134 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 21:45:00.900206 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 21:45:00.901958 main.go:193: Loaded subscribe.xml 
2022/11/04 21:45:00.902014 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 21:45:00.902200 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/04 21:45:00.913197 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/04 21:45:00.916245 main.go:193: Loaded brokerack.xml 
2022/11/04 21:45:00.916284 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 21:45:00.916341 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 21:45:00.918070 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 21:45:00.927634 main.go:193: Loaded cancel.xml 
2022/11/04 21:45:00.927670 main.go:153: Persisting XML Template cancel.xml
2022/11/04 21:45:00.927702 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/04 21:45:00.930145 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 21:45:00.934119 main.go:193: Loaded stsrst.xml 
2022/11/04 21:45:00.934229 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 21:45:00.934635 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/04 21:45:00.937026 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/04 21:45:00.940933 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 21:45:00.940973 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 21:45:00.941014 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/04 21:45:00.943544 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/04 21:45:00.947588 main.go:193: Loaded xdsodd.xml 
2022/11/04 21:45:00.947623 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 21:45:00.947682 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) xdsodd]
2022/11/04 21:45:00.952203 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/04 21:45:00.955064 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 21:45:00.955092 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 21:45:00.955119 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/04 21:45:00.957701 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 21:45:00.960877 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 21:45:00.960907 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 21:45:00.960948 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 21:45:00.962783 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/04 21:45:00.964736 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 21:45:00.964763 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 21:45:00.964790 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/04 21:45:00.967704 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/04 21:45:00.971120 main.go:193: Loaded pathwayoptions.html 
2022/11/04 21:45:00.971154 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 21:45:00.971202 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/04 21:45:00.973267 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/04 21:45:00.976956 main.go:193: Loaded pixmpatient.html 
2022/11/04 21:45:00.976981 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 21:45:00.977008 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/04 21:45:00.979338 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/04 21:45:00.983816 main.go:193: Loaded subscriptions.html 
2022/11/04 21:45:00.983842 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 21:45:00.983871 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/04 21:45:00.987118 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/04 21:45:00.992009 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 21:45:00.992044 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 21:45:00.992091 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/04 21:45:00.994558 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 21:45:00.998250 main.go:193: Loaded workflowtasks.html 
2022/11/04 21:45:00.998285 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 21:45:00.998319 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/04 21:45:01.002064 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 21:45:01.007515 main.go:193: Loaded dashboardwidget.html 
2022/11/04 21:45:01.007558 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 21:45:01.007587 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 21:45:01.009632 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/04 21:45:01.013566 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 21:45:01.013593 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 21:45:01.013620 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/04 21:45:01.015792 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/04 21:45:01.019665 main.go:193: Loaded notificationwidget.html 
2022/11/04 21:45:01.019695 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 21:45:01.019723 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/04 21:45:01.020949 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/04 21:45:01.024484 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 21:45:01.024509 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 21:45:01.024537 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/04 21:45:01.026480 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/04 21:45:01.028696 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 21:45:01.028738 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 21:45:01.028766 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 21:45:01.032852 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/04 21:45:01.036257 main.go:193: Loaded workflows.html 
2022/11/04 21:45:01.036285 main.go:171: Persisting HTML Template workflows.html
2022/11/04 21:45:01.036313 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 21:45:01.038230 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/04 21:45:01.040767 main.go:193: Loaded adminspawidget.html 
2022/11/04 21:45:01.040797 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 21:45:01.040834 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/04 21:45:01.043808 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 21:45:01.046510 main.go:193: Loaded spawidget.html 
2022/11/04 21:45:01.046539 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 21:45:01.046574 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/04 21:45:01.048879 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 21:45:01.052421 main.go:193: Loaded newworkflow.html 
2022/11/04 21:45:01.052448 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 21:45:01.052477 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 21:45:01.054456 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 21:45:01.057241 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 21:45:01.057271 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 21:45:01.057299 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 21:45:01.059487 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/04 21:45:01.061619 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 21:45:01.061646 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 21:45:01.061673 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/04 21:45:01.063697 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/04 21:45:01.066139 main.go:193: Loaded footer.html 
2022/11/04 21:45:01.066171 main.go:171: Persisting HTML Template footer.html
2022/11/04 21:45:01.066200 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 21:45:01.068616 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/04 21:45:01.071877 main.go:193: Loaded events.html 
2022/11/04 21:45:01.071906 main.go:171: Persisting HTML Template events.html
2022/11/04 21:45:01.071933 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 21:45:01.073129 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/04 21:45:01.077418 main.go:193: Loaded header.html 
2022/11/04 21:45:01.077448 main.go:171: Persisting HTML Template header.html
2022/11/04 21:45:01.077477 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 21:45:01.079400 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/04 21:45:01.082896 main.go:193: Loaded pixpatient.html 
2022/11/04 21:45:01.082924 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 21:45:01.082974 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/04 21:45:01.085505 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/04 21:45:01.089606 main.go:193: Loaded horizontalline.html 
2022/11/04 21:45:01.089638 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 21:45:01.089672 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/04 21:45:01.092334 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/04 21:45:01.095588 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 21:45:01.095622 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 21:45:01.095657 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 21:45:01.098114 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 21:45:01.101525 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 21:45:01.101558 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 21:45:01.101603 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/04 21:45:01.104212 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/04 21:45:01.107309 main.go:193: Loaded workflow.html 
2022/11/04 21:45:01.107369 main.go:171: Persisting HTML Template workflow.html
2022/11/04 21:45:01.107422 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 21:45:01.110173 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow %!s(bool=false)]
2022/11/04 21:45:01.114530 main.go:193: Loaded usereventform.html 
2022/11/04 21:45:01.114562 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 21:45:01.114597 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 21:45:01.117501 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform]
2022/11/04 21:45:01.121149 main.go:193: Loaded wfconfig.html 
2022/11/04 21:45:01.121181 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 21:45:01.121217 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/04 21:45:01.124004 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/04 21:45:01.126403 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 21:45:01.126432 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 21:45:01.126461 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_timeline]
2022/11/04 21:45:01.129722 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/04 21:45:01.133346 main.go:193: Loaded timelinewidget.html 
2022/11/04 21:45:01.133384 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 21:45:01.133420 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/04 21:45:01.136337 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                <p style="color:lightgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                <p style="color:lightgreen">Activation Time Owner {{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{else}}
                                    {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                        <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                    {{end}} 
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget]
2022/11/04 22:13:31.323080 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 22:13:31.324458 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 22:13:31.324523 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 22:13:31.326215 main.go:193: Loaded subscribe.xml 
2022/11/04 22:13:31.326262 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 22:13:31.326391 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/04 22:13:31.338131 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:13:31.341228 main.go:193: Loaded brokerack.xml 
2022/11/04 22:13:31.341263 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 22:13:31.341308 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 22:13:31.342969 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:13:31.346565 main.go:193: Loaded cancel.xml 
2022/11/04 22:13:31.346606 main.go:153: Persisting XML Template cancel.xml
2022/11/04 22:13:31.346642 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/04 22:13:31.352428 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 22:13:31.357880 main.go:193: Loaded stsrst.xml 
2022/11/04 22:13:31.357915 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 22:13:31.357948 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/04 22:13:31.359464 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/04 22:13:31.363475 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 22:13:31.363512 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 22:13:31.363559 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/04 22:13:31.366411 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:13:31.370763 main.go:193: Loaded xdsodd.xml 
2022/11/04 22:13:31.370805 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 22:13:31.370843 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/04 22:13:31.375610 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/04 22:13:31.381599 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 22:13:31.381763 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 22:13:31.381795 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/04 22:13:31.383771 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 22:13:31.386080 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 22:13:31.386114 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 22:13:31.386158 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 22:13:31.389218 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 22:13:31.392337 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 22:13:31.392367 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 22:13:31.392395 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/04 22:13:31.393516 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/04 22:13:31.396453 main.go:193: Loaded pathwayoptions.html 
2022/11/04 22:13:31.396478 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 22:13:31.396505 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/04 22:13:31.399683 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/04 22:13:31.402795 main.go:193: Loaded pixmpatient.html 
2022/11/04 22:13:31.402833 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 22:13:31.402865 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/04 22:13:31.405521 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/04 22:13:31.408805 main.go:193: Loaded subscriptions.html 
2022/11/04 22:13:31.408833 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 22:13:31.408860 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/04 22:13:31.410801 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/04 22:13:31.414316 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 22:13:31.414344 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 22:13:31.414384 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 22:13:31.417012 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/04 22:13:31.421343 main.go:193: Loaded workflowtasks.html 
2022/11/04 22:13:31.421400 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 22:13:31.421464 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/04 22:13:31.425516 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 22:13:31.430431 main.go:193: Loaded dashboardwidget.html 
2022/11/04 22:13:31.430460 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 22:13:31.430488 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 22:13:31.432625 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/04 22:13:31.437397 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 22:13:31.437437 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 22:13:31.437469 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/04 22:13:31.439763 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/04 22:13:31.443309 main.go:193: Loaded notificationwidget.html 
2022/11/04 22:13:31.443338 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 22:13:31.443366 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) notificationwidget]
2022/11/04 22:13:31.444634 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/04 22:13:31.447823 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 22:13:31.447852 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 22:13:31.447904 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/04 22:13:31.450073 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/04 22:13:31.452388 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 22:13:31.452417 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 22:13:31.452462 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 22:13:31.455667 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/04 22:13:31.458574 main.go:193: Loaded workflows.html 
2022/11/04 22:13:31.458602 main.go:171: Persisting HTML Template workflows.html
2022/11/04 22:13:31.458638 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 22:13:31.461162 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows %!s(bool=false)]
2022/11/04 22:13:31.469309 main.go:193: Loaded adminspawidget.html 
2022/11/04 22:13:31.469379 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 22:13:31.469415 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/04 22:13:31.472331 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:13:31.477509 main.go:193: Loaded spawidget.html 
2022/11/04 22:13:31.477545 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 22:13:31.477589 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/04 22:13:31.480061 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:13:31.484202 main.go:193: Loaded newworkflow.html 
2022/11/04 22:13:31.484240 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 22:13:31.484276 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 22:13:31.489020 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 22:13:31.493424 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 22:13:31.493456 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 22:13:31.493484 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 22:13:31.497706 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/04 22:13:31.504191 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 22:13:31.504228 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 22:13:31.504262 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event]
2022/11/04 22:13:31.508576 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/04 22:13:31.513710 main.go:193: Loaded footer.html 
2022/11/04 22:13:31.513745 main.go:171: Persisting HTML Template footer.html
2022/11/04 22:13:31.513779 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 22:13:31.517999 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/04 22:13:31.524265 main.go:193: Loaded events.html 
2022/11/04 22:13:31.524297 main.go:171: Persisting HTML Template events.html
2022/11/04 22:13:31.524326 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 22:13:31.527399 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/04 22:13:31.531143 main.go:193: Loaded header.html 
2022/11/04 22:13:31.531171 main.go:171: Persisting HTML Template header.html
2022/11/04 22:13:31.531216 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 22:13:31.534061 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/04 22:13:31.539878 main.go:193: Loaded pixpatient.html 
2022/11/04 22:13:31.539910 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 22:13:31.539945 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/04 22:13:31.543703 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient]
2022/11/04 22:13:31.547471 main.go:193: Loaded horizontalline.html 
2022/11/04 22:13:31.547499 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 22:13:31.547527 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/04 22:13:31.553476 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/04 22:13:31.558311 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 22:13:31.558451 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 22:13:31.558488 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 22:13:31.561529 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 22:13:31.565642 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 22:13:31.565735 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 22:13:31.565774 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_overdue]
2022/11/04 22:13:31.569199 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/04 22:13:31.573790 main.go:193: Loaded workflow.html 
2022/11/04 22:13:31.573841 main.go:171: Persisting HTML Template workflow.html
2022/11/04 22:13:31.574617 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 22:13:31.577947 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/04 22:13:31.580334 main.go:193: Loaded usereventform.html 
2022/11/04 22:13:31.580363 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 22:13:31.580415 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 22:13:31.583861 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/04 22:13:31.585736 main.go:193: Loaded wfconfig.html 
2022/11/04 22:13:31.585764 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 22:13:31.585791 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/04 22:13:31.592007 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}} wfconfig %!s(bool=false)]
2022/11/04 22:13:31.593955 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 22:13:31.593985 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 22:13:31.594023 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 22:13:31.596444 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/04 22:13:31.600498 main.go:193: Loaded timelinewidget.html 
2022/11/04 22:13:31.600528 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 22:13:31.600645 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/04 22:13:31.602909 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                <p style="color:lightgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                <p style="color:lightgreen">Activation Time {{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{else}}
                                    {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                        <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                    {{end}} 
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/04 22:14:07.935635 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 22:14:07.936744 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 22:14:07.936815 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 22:14:07.936910 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/04 22:14:07.936936 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/04 22:14:07.937036 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/04 22:14:07.946978 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/04 22:14:07.947037 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/04 22:14:07.948440 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/04 22:14:07.948496 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/04 22:14:07.948538 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/04 22:14:07.951213 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/04 22:14:07.951298 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/04 22:14:07.956230 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/04 22:14:07.958371 tukdbint.go:917: Created Prepared Statement INSERT INTO events (docname, authors, pathway, version, formatcode, xdsdocentryuid, nhsid, user, org, role, taskid, classcode, expression, comments, confcode, facilitycode, practicecode, xdspid, repositoryuniqueid, topic) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT-9999999468 Clinical pbradley pathalert %!s(int=0) urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 pbradley lth Clinical %!s(int=1) Workflow Management Path_Anomaly_Identified User pbradley from lth in the role of Clinical created new pathalert Workflow N path Path-PS1 NA ODD $XDSDocumentEntryTypeCode]
2022/11/04 22:14:07.962439 tukxdw.go:738: Created Event ID :  = 153
2022/11/04 22:14:07.962499 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/04 22:14:07.962540 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 22:14:07.962558 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 22:14:07.962583 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/04 22:14:07.962602 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 22:14:07.962721 tukdbint.go:917: Created Prepared Statement INSERT INTO events (facilitycode, practicecode, authors, pathway, version, docname, formatcode, repositoryuniqueid, taskid, topic, classcode, confcode, xdsdocentryuid, nhsid, user, expression, xdspid, org, role, comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [path Path-PS1 Clinical pbradley pathalert %!s(int=0) PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc ODD %!s(int=2) $XDSDocumentEntryTypeCode Workflow Management N urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 pbradley Path_Anomily_Claimed NA lth Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow]
2022/11/04 22:14:07.965303 tukxdw.go:738: Created Event ID :  = 154
2022/11/04 22:14:07.965358 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/04 22:14:07.965376 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/04 22:14:07.965391 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/04 22:14:07.965405 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/04 22:14:07.965462 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/04 22:14:07.965493 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/04 22:14:07.965846 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/04 22:14:07.966157 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (pathway, nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211221407958.93498 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211221407958.93498" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-04T22:14:07.958263Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211221407958.93498^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-04T22:14:07.958263Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-04T22:14:07.958263Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T22:14:07.958263Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T22:14:07.958263Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>153</id>
          <eventTime>2022-11-04T22:14:07.958263Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-04T22:14:07.958263Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-04T22:14:07.958263Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>154</id>
          <eventTime>2022-11-04T22:14:07.958263Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false)]
2022/11/04 22:14:07.975926 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/04 22:29:01.999762 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 22:29:02.000998 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 22:29:02.001085 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 22:29:02.001858 main.go:193: Loaded subscribe.xml 
2022/11/04 22:29:02.001898 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 22:29:02.002003 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/04 22:29:02.013372 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:29:02.020166 main.go:193: Loaded brokerack.xml 
2022/11/04 22:29:02.020209 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 22:29:02.020244 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 22:29:02.021892 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:29:02.028643 main.go:193: Loaded cancel.xml 
2022/11/04 22:29:02.028694 main.go:153: Persisting XML Template cancel.xml
2022/11/04 22:29:02.028768 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/04 22:29:02.033627 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 22:29:02.038070 main.go:193: Loaded stsrst.xml 
2022/11/04 22:29:02.038106 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 22:29:02.038165 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/04 22:29:02.040916 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/04 22:29:02.047583 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 22:29:02.047625 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 22:29:02.047666 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/04 22:29:02.048944 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02 %!s(bool=true)]
2022/11/04 22:29:02.050651 main.go:193: Loaded xdsodd.xml 
2022/11/04 22:29:02.050693 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 22:29:02.050726 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/04 22:29:02.054073 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:29:02.057099 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 22:29:02.057130 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 22:29:02.057164 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/04 22:29:02.058336 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 22:29:02.060485 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 22:29:02.060517 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 22:29:02.060554 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 22:29:02.062877 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/04 22:29:02.065127 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 22:29:02.065157 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 22:29:02.065195 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/04 22:29:02.067310 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/04 22:29:02.070357 main.go:193: Loaded pathwayoptions.html 
2022/11/04 22:29:02.070386 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 22:29:02.070414 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/04 22:29:02.072969 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/04 22:29:02.076934 main.go:193: Loaded pixmpatient.html 
2022/11/04 22:29:02.076962 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 22:29:02.076990 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/04 22:29:02.079012 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/04 22:29:02.082659 main.go:193: Loaded subscriptions.html 
2022/11/04 22:29:02.082689 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 22:29:02.082717 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/04 22:29:02.085487 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions %!s(bool=false)]
2022/11/04 22:29:02.087746 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 22:29:02.087779 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 22:29:02.087809 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 22:29:02.090139 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/04 22:29:02.092772 main.go:193: Loaded workflowtasks.html 
2022/11/04 22:29:02.092804 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 22:29:02.092840 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/04 22:29:02.095395 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 22:29:02.098940 main.go:193: Loaded dashboardwidget.html 
2022/11/04 22:29:02.098967 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 22:29:02.098996 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 22:29:02.100758 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/04 22:29:02.104020 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 22:29:02.104057 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 22:29:02.104090 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/04 22:29:02.106307 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/04 22:29:02.108492 main.go:193: Loaded notificationwidget.html 
2022/11/04 22:29:02.108522 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 22:29:02.108549 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/04 22:29:02.110278 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/04 22:29:02.112352 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 22:29:02.112378 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 22:29:02.112405 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/04 22:29:02.114547 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/04 22:29:02.116685 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 22:29:02.116715 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 22:29:02.116752 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 22:29:02.118997 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/04 22:29:02.121436 main.go:193: Loaded workflows.html 
2022/11/04 22:29:02.121468 main.go:171: Persisting HTML Template workflows.html
2022/11/04 22:29:02.121510 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 22:29:02.123777 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/04 22:29:02.126137 main.go:193: Loaded adminspawidget.html 
2022/11/04 22:29:02.126167 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 22:29:02.126195 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/04 22:29:02.128605 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:29:02.133033 main.go:193: Loaded spawidget.html 
2022/11/04 22:29:02.133064 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 22:29:02.133093 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/04 22:29:02.135279 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget]
2022/11/04 22:29:02.139512 main.go:193: Loaded newworkflow.html 
2022/11/04 22:29:02.139537 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 22:29:02.139565 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 22:29:02.141850 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 22:29:02.146331 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 22:29:02.146369 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 22:29:02.146403 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 22:29:02.148669 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/04 22:29:02.152708 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 22:29:02.152748 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 22:29:02.152790 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/04 22:29:02.155481 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/04 22:29:02.158828 main.go:193: Loaded footer.html 
2022/11/04 22:29:02.158874 main.go:171: Persisting HTML Template footer.html
2022/11/04 22:29:02.158917 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 22:29:02.160843 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/04 22:29:02.164727 main.go:193: Loaded events.html 
2022/11/04 22:29:02.164758 main.go:171: Persisting HTML Template events.html
2022/11/04 22:29:02.164792 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 22:29:02.168081 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/04 22:29:02.170754 main.go:193: Loaded header.html 
2022/11/04 22:29:02.170793 main.go:171: Persisting HTML Template header.html
2022/11/04 22:29:02.170843 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 22:29:02.173298 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/04 22:29:02.178894 main.go:193: Loaded pixpatient.html 
2022/11/04 22:29:02.178929 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 22:29:02.178988 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/04 22:29:02.181566 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/04 22:29:02.184219 main.go:193: Loaded horizontalline.html 
2022/11/04 22:29:02.184257 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 22:29:02.184291 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/04 22:29:02.186665 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/04 22:29:02.189289 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 22:29:02.189328 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 22:29:02.189363 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 22:29:02.191599 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 22:29:02.194333 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 22:29:02.194374 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 22:29:02.194409 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/04 22:29:02.196945 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/04 22:29:02.200913 main.go:193: Loaded workflow.html 
2022/11/04 22:29:02.200945 main.go:171: Persisting HTML Template workflow.html
2022/11/04 22:29:02.200980 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 22:29:02.203546 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/04 22:29:02.206500 main.go:193: Loaded usereventform.html 
2022/11/04 22:29:02.206539 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 22:29:02.206574 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 22:29:02.208427 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/04 22:29:02.211457 main.go:193: Loaded wfconfig.html 
2022/11/04 22:29:02.211509 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 22:29:02.211558 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/04 22:29:02.213303 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/04 22:29:02.216055 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 22:29:02.216100 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 22:29:02.216143 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 22:29:02.218046 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/04 22:29:02.221482 main.go:193: Loaded timelinewidget.html 
2022/11/04 22:29:02.221514 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 22:29:02.221547 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/04 22:29:02.225851 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                <p style="color:lightgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                <p style="color:lightgreen">Activation Time {{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed On {{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{else}}
                                    p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p> 
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/04 22:29:59.673211 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 22:29:59.674354 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 22:29:59.674424 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 22:29:59.676051 main.go:193: Loaded subscribe.xml 
2022/11/04 22:29:59.676087 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 22:29:59.676209 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/04 22:29:59.686033 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:29:59.693740 main.go:193: Loaded brokerack.xml 
2022/11/04 22:29:59.693777 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 22:29:59.693839 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 22:29:59.698121 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:29:59.709572 main.go:193: Loaded cancel.xml 
2022/11/04 22:29:59.709617 main.go:153: Persisting XML Template cancel.xml
2022/11/04 22:29:59.709652 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/04 22:29:59.713592 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 22:29:59.716768 main.go:193: Loaded stsrst.xml 
2022/11/04 22:29:59.716808 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 22:29:59.716847 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/04 22:29:59.720084 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/04 22:29:59.732050 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 22:29:59.732098 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 22:29:59.732138 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/04 22:29:59.737168 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:29:59.741754 main.go:193: Loaded xdsodd.xml 
2022/11/04 22:29:59.741792 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 22:29:59.741827 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/04 22:29:59.746800 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:29:59.753675 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 22:29:59.753722 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 22:29:59.753771 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/04 22:29:59.755882 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 22:29:59.758154 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 22:29:59.758188 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 22:29:59.758235 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 22:29:59.762523 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/04 22:29:59.764732 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 22:29:59.764766 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 22:29:59.764798 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/04 22:29:59.767026 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/04 22:29:59.771591 main.go:193: Loaded pathwayoptions.html 
2022/11/04 22:29:59.771621 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 22:29:59.771649 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/04 22:29:59.773666 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/04 22:29:59.777326 main.go:193: Loaded pixmpatient.html 
2022/11/04 22:29:59.777379 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 22:29:59.777423 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/04 22:29:59.779466 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/04 22:29:59.781977 main.go:193: Loaded subscriptions.html 
2022/11/04 22:29:59.782011 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 22:29:59.782040 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/04 22:29:59.783376 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/04 22:29:59.786285 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 22:29:59.786317 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 22:29:59.786354 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 22:29:59.787729 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/04 22:29:59.793327 main.go:193: Loaded workflowtasks.html 
2022/11/04 22:29:59.793382 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 22:29:59.793441 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/04 22:29:59.796179 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 22:29:59.800165 main.go:193: Loaded dashboardwidget.html 
2022/11/04 22:29:59.800199 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 22:29:59.800230 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 22:29:59.803364 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/04 22:29:59.806571 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 22:29:59.806598 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 22:29:59.806626 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/04 22:29:59.809796 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/04 22:29:59.811774 main.go:193: Loaded notificationwidget.html 
2022/11/04 22:29:59.811804 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 22:29:59.811831 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/04 22:29:59.814030 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/04 22:29:59.817911 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 22:29:59.817938 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 22:29:59.817973 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/04 22:29:59.820977 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/04 22:29:59.824633 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 22:29:59.824664 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 22:29:59.824694 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 22:29:59.826296 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 22:29:59.828140 main.go:193: Loaded workflows.html 
2022/11/04 22:29:59.828171 main.go:171: Persisting HTML Template workflows.html
2022/11/04 22:29:59.828207 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 22:29:59.829300 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/04 22:29:59.833055 main.go:193: Loaded adminspawidget.html 
2022/11/04 22:29:59.833086 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 22:29:59.833115 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/04 22:29:59.835300 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:29:59.838890 main.go:193: Loaded spawidget.html 
2022/11/04 22:29:59.838916 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 22:29:59.838943 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/04 22:29:59.840611 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:29:59.842970 main.go:193: Loaded newworkflow.html 
2022/11/04 22:29:59.843000 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 22:29:59.843027 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 22:29:59.844273 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 22:29:59.846164 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 22:29:59.846190 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 22:29:59.846218 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 22:29:59.847907 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/04 22:29:59.869265 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 22:29:59.869336 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 22:29:59.869415 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/04 22:29:59.871306 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/04 22:29:59.874639 main.go:193: Loaded footer.html 
2022/11/04 22:29:59.874665 main.go:171: Persisting HTML Template footer.html
2022/11/04 22:29:59.874694 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 22:29:59.876766 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/04 22:29:59.879376 main.go:193: Loaded events.html 
2022/11/04 22:29:59.879410 main.go:171: Persisting HTML Template events.html
2022/11/04 22:29:59.879437 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 22:29:59.880582 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events %!s(bool=false)]
2022/11/04 22:29:59.883224 main.go:193: Loaded header.html 
2022/11/04 22:29:59.883255 main.go:171: Persisting HTML Template header.html
2022/11/04 22:29:59.883284 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 22:29:59.885621 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/04 22:29:59.888024 main.go:193: Loaded pixpatient.html 
2022/11/04 22:29:59.888055 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 22:29:59.888086 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/04 22:29:59.890182 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/04 22:29:59.892120 main.go:193: Loaded horizontalline.html 
2022/11/04 22:29:59.892179 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 22:29:59.892222 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/04 22:29:59.894166 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/04 22:29:59.896092 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 22:29:59.896118 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 22:29:59.896145 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 22:29:59.897585 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 22:29:59.899100 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 22:29:59.899134 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 22:29:59.899164 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/04 22:29:59.901465 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/04 22:29:59.903816 main.go:193: Loaded workflow.html 
2022/11/04 22:29:59.903846 main.go:171: Persisting HTML Template workflow.html
2022/11/04 22:29:59.903882 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 22:29:59.905062 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/04 22:29:59.907989 main.go:193: Loaded usereventform.html 
2022/11/04 22:29:59.908014 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 22:29:59.908042 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 22:29:59.910420 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/04 22:29:59.913398 main.go:193: Loaded wfconfig.html 
2022/11/04 22:29:59.913424 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 22:29:59.913453 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/04 22:29:59.915567 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/04 22:29:59.920190 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 22:29:59.920257 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 22:29:59.920298 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 22:29:59.922251 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 22:29:59.925095 main.go:193: Loaded timelinewidget.html 
2022/11/04 22:29:59.925120 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 22:29:59.925147 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/04 22:29:59.926858 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                <p style="color:lightgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                <p style="color:lightgreen">Activation Time {{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed On {{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{else}}
                                    p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p> 
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/04 22:31:06.925823 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/04 22:31:06.926916 main.go:199: Loaded log file - ./logs/2022/1104.log
2022/11/04 22:31:06.926985 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/04 22:31:06.928734 main.go:193: Loaded subscribe.xml 
2022/11/04 22:31:06.929302 main.go:153: Persisting XML Template subscribe.xml
2022/11/04 22:31:06.929421 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/04 22:31:06.941312 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/04 22:31:06.946569 main.go:193: Loaded brokerack.xml 
2022/11/04 22:31:06.946607 main.go:153: Persisting XML Template brokerack.xml
2022/11/04 22:31:06.946653 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/04 22:31:06.951848 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/04 22:31:06.956793 main.go:193: Loaded cancel.xml 
2022/11/04 22:31:06.956829 main.go:153: Persisting XML Template cancel.xml
2022/11/04 22:31:06.956886 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/04 22:31:06.960159 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/04 22:31:06.962312 main.go:193: Loaded stsrst.xml 
2022/11/04 22:31:06.962345 main.go:153: Persisting XML Template stsrst.xml
2022/11/04 22:31:06.962378 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/04 22:31:06.964119 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/04 22:31:06.967091 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/04 22:31:06.967125 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/04 22:31:06.967158 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/04 22:31:06.969429 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:31:06.974593 main.go:193: Loaded xdsodd.xml 
2022/11/04 22:31:06.974671 main.go:153: Persisting XML Template xdsodd.xml
2022/11/04 22:31:06.974723 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/04 22:31:06.977177 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/04 22:31:06.981517 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/04 22:31:06.981559 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/04 22:31:06.981599 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/04 22:31:06.984592 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/04 22:31:06.988824 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/04 22:31:06.988863 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/04 22:31:06.988919 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/04 22:31:06.991479 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/04 22:31:06.997113 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/04 22:31:06.997159 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/04 22:31:06.997218 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/04 22:31:06.999666 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/04 22:31:07.003720 main.go:193: Loaded pathwayoptions.html 
2022/11/04 22:31:07.003754 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/04 22:31:07.003805 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/04 22:31:07.005813 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions]
2022/11/04 22:31:07.009110 main.go:193: Loaded pixmpatient.html 
2022/11/04 22:31:07.009149 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/04 22:31:07.009181 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/04 22:31:07.011492 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/04 22:31:07.014082 main.go:193: Loaded subscriptions.html 
2022/11/04 22:31:07.014120 main.go:171: Persisting HTML Template subscriptions.html
2022/11/04 22:31:07.014155 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/04 22:31:07.016998 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/04 22:31:07.022275 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/04 22:31:07.022310 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/04 22:31:07.022357 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/04 22:31:07.026176 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/04 22:31:07.029261 main.go:193: Loaded workflowtasks.html 
2022/11/04 22:31:07.029300 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/04 22:31:07.029334 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/04 22:31:07.033275 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/04 22:31:07.040868 main.go:193: Loaded dashboardwidget.html 
2022/11/04 22:31:07.040930 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/04 22:31:07.040962 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/04 22:31:07.043656 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/04 22:31:07.047832 main.go:193: Loaded snip_workflow_header.html 
2022/11/04 22:31:07.047863 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/04 22:31:07.047894 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/04 22:31:07.050360 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/04 22:31:07.054708 main.go:193: Loaded notificationwidget.html 
2022/11/04 22:31:07.054741 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/04 22:31:07.054770 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/04 22:31:07.058451 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/04 22:31:07.062253 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/04 22:31:07.062287 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/04 22:31:07.062321 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/04 22:31:07.064879 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/04 22:31:07.069733 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/04 22:31:07.069764 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/04 22:31:07.069814 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/04 22:31:07.072104 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/04 22:31:07.075839 main.go:193: Loaded workflows.html 
2022/11/04 22:31:07.075866 main.go:171: Persisting HTML Template workflows.html
2022/11/04 22:31:07.075893 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/04 22:31:07.078195 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/04 22:31:07.082626 main.go:193: Loaded adminspawidget.html 
2022/11/04 22:31:07.082695 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/04 22:31:07.082942 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/04 22:31:07.085101 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:31:07.089491 main.go:193: Loaded spawidget.html 
2022/11/04 22:31:07.089519 main.go:171: Persisting HTML Template spawidget.html
2022/11/04 22:31:07.089548 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/04 22:31:07.092746 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/04 22:31:07.095697 main.go:193: Loaded newworkflow.html 
2022/11/04 22:31:07.095725 main.go:171: Persisting HTML Template newworkflow.html
2022/11/04 22:31:07.095753 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/04 22:31:07.097237 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/04 22:31:07.103492 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/04 22:31:07.103525 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/04 22:31:07.103553 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/04 22:31:07.106817 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/04 22:31:07.110510 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/04 22:31:07.110559 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/04 22:31:07.110620 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/04 22:31:07.112351 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event %!s(bool=false)]
2022/11/04 22:31:07.115564 main.go:193: Loaded footer.html 
2022/11/04 22:31:07.115594 main.go:171: Persisting HTML Template footer.html
2022/11/04 22:31:07.115622 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/04 22:31:07.119795 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/04 22:31:07.125908 main.go:193: Loaded events.html 
2022/11/04 22:31:07.125938 main.go:171: Persisting HTML Template events.html
2022/11/04 22:31:07.125969 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/04 22:31:07.128329 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/04 22:31:07.130505 main.go:193: Loaded header.html 
2022/11/04 22:31:07.130538 main.go:171: Persisting HTML Template header.html
2022/11/04 22:31:07.130568 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/04 22:31:07.134514 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header]
2022/11/04 22:31:07.143967 main.go:193: Loaded pixpatient.html 
2022/11/04 22:31:07.144005 main.go:171: Persisting HTML Template pixpatient.html
2022/11/04 22:31:07.144036 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/04 22:31:07.149705 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/04 22:31:07.153073 main.go:193: Loaded horizontalline.html 
2022/11/04 22:31:07.153101 main.go:171: Persisting HTML Template horizontalline.html
2022/11/04 22:31:07.153131 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/04 22:31:07.157097 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/04 22:31:07.164658 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/04 22:31:07.164698 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/04 22:31:07.164729 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/04 22:31:07.168625 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/04 22:31:07.172560 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/04 22:31:07.172590 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/04 22:31:07.172619 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/04 22:31:07.176113 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/04 22:31:07.180579 main.go:193: Loaded workflow.html 
2022/11/04 22:31:07.180610 main.go:171: Persisting HTML Template workflow.html
2022/11/04 22:31:07.180651 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/04 22:31:07.183164 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/04 22:31:07.188860 main.go:193: Loaded usereventform.html 
2022/11/04 22:31:07.188886 main.go:171: Persisting HTML Template usereventform.html
2022/11/04 22:31:07.188922 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/04 22:31:07.191053 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/04 22:31:07.193563 main.go:193: Loaded wfconfig.html 
2022/11/04 22:31:07.193590 main.go:171: Persisting HTML Template wfconfig.html
2022/11/04 22:31:07.193626 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/04 22:31:07.196381 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/04 22:31:07.199450 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/04 22:31:07.199479 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/04 22:31:07.199507 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/04 22:31:07.201577 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/04 22:31:07.203661 main.go:193: Loaded timelinewidget.html 
2022/11/04 22:31:07.203686 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/04 22:31:07.203727 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/04 22:31:07.206758 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                <p style="color:lightgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                <p style="color:lightgreen">Activation Time {{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed On {{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{else}}
                                    <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p> 
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
