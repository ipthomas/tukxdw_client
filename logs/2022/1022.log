2022/10/22 16:05:58.666835 tukutil.go:139: -----------------------------------------------------------------------------------
2022/10/22 16:05:58.666886 main.go:191: Loaded log file - ./logs/2022/1022.log
2022/10/22 16:05:58.666921 tukdbint.go:205: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/10/22 16:05:58.667385 main.go:142: Loading file toc_def.json
2022/10/22 16:05:58.669652 main.go:150: Loaded WF Def toc_def.json
2022/10/22 16:05:58.669710 tukxdw.go:590: Registering Workflow Definition
2022/10/22 16:05:58.673701 tukdsub.go:187: Processing Cancel Subscriptions
2022/10/22 16:05:58.673834 tukdbint.go:627: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [toc]
2022/10/22 16:05:58.701003 tukxdw.go:604: Cleaned Event Service Subscriptions for Pathway toc
2022/10/22 16:05:58.701105 tukdbint.go:627: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [toc %!s(bool=false)]
2022/10/22 16:05:58.721136 tukxdw.go:663: Deleted Existing XDW Definition for Pathway toc
2022/10/22 16:05:58.721211 tukdbint.go:627: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [toc %!s(bool=false) {
    "ref": "toc",
    "name": "Transfer of Care",
    "confidentialitycode": "N",
    "completebytime": "day(5)",
    "completionBehavior": [{
        "completion": {
            "condition": "task(6)"
        }
    }],
    "tasks": [{
            "id": "1",
            "tasktype": "NOTIFICATION",
            "name": "TOC_Request",
            "description": "Transfer of Care Requirement Identified",
            "expirationtime": "day(1)",
            "completebytime": "hour(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(TOC_Request)"
                }
            }],
            "output": [
            {
                "name": "TOC_Request",
                "contenttype": "text/plain",
                "accesstype": "url"
            }]
        },
        {
            "id": "2",
            "tasktype": "NOTIFICATION",
            "name": "TOC_Claimed",
            "description": "Transfer Of Care Request Claimed",
            "expirationtime": "day(2)",
            "completebytime": "day(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(TOC_Claimed)"
                }
            }],
            "input": [{
                "name": "TOC_Request",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }],
            "output": [{
                "name": "TOC_Claimed",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }]
        },
        {
            "id": "3",
            "tasktype": "NOTIFICATION",
            "name": "TOC_Schedule",
            "description": "Patient Transfer Scheduled",
            "expirationtime": "day(3)",
            "completebytime": "day(2)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(TOC_Schedule)"
                }
            }],
            "input": [{
                "name": "TOC_Claimed",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }],
            "output": [{
                "name": "TOC_Schedule",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }]
        },
        {
            "id": "4",
            "tasktype": "NOTIFICATION",
            "name": "Patient_Admitted",
            "description": "Patient Admitted by New Provider",
            "expirationtime": "day(6)",
            "completebytime": "day(5)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Patient_Admitted)"
                }
            }],
            "input": [{
                "name": "TOC_Schedule",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }],
            "output": [{
                "name": "Patient_Admitted",
                "contenttype": "text/plain",
                "accesstype": "URL"
            }]
        }
    ]
}]
2022/10/22 16:05:58.739156 tukxdw.go:668: Persisted New XDW Definition for Pathway toc
2022/10/22 16:05:58.739201 tukxdw.go:607: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/10/22 16:05:58.739217 tukxdw.go:619: Checking Output Task TOC_Request
2022/10/22 16:05:58.739230 tukxdw.go:624: Output Task TOC_Request does not require a dsub broker subscription
2022/10/22 16:05:58.739249 tukxdw.go:610: Checking Input Task TOC_Request
2022/10/22 16:05:58.739261 tukxdw.go:615: Input Task TOC_Request does not require a dsub broker subscription
2022/10/22 16:05:58.739311 tukxdw.go:619: Checking Output Task TOC_Claimed
2022/10/22 16:05:58.739332 tukxdw.go:624: Output Task TOC_Claimed does not require a dsub broker subscription
2022/10/22 16:05:58.739346 tukxdw.go:610: Checking Input Task TOC_Claimed
2022/10/22 16:05:58.739358 tukxdw.go:615: Input Task TOC_Claimed does not require a dsub broker subscription
2022/10/22 16:05:58.739381 tukxdw.go:619: Checking Output Task TOC_Schedule
2022/10/22 16:05:58.739393 tukxdw.go:624: Output Task TOC_Schedule does not require a dsub broker subscription
2022/10/22 16:05:58.739405 tukxdw.go:610: Checking Input Task TOC_Schedule
2022/10/22 16:05:58.739416 tukxdw.go:615: Input Task TOC_Schedule does not require a dsub broker subscription
2022/10/22 16:05:58.739427 tukxdw.go:619: Checking Output Task Patient_Admitted
2022/10/22 16:05:58.739439 tukxdw.go:624: Output Task Patient_Admitted does not require a dsub broker subscription
2022/10/22 16:05:58.739462 tukxdw.go:629: Found 0 potential DSUB Broker Subscriptions - map[]
2022/10/22 16:05:58.739476 main.go:142: Loading file toc_meta.json
2022/10/22 16:05:58.740465 main.go:158: Loaded WF XDS Meta for Pathway : toc_meta.json
2022/10/22 16:05:58.740492 tukxdw.go:587: Persisting Workflow XDS Meta
2022/10/22 16:05:58.740518 tukdbint.go:627: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [toc_meta %!s(bool=true)]
2022/10/22 16:05:58.741886 tukxdw.go:647: Deleted Existing XDS Meta for Pathway toc
2022/10/22 16:05:58.741961 tukdbint.go:627: Created Prepared Statement INSERT INTO xdws (isxdsmeta, xdw, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {
    "id": "toc_publish",
    "repositoryuniqueid": "2.16.840.1.113883.2.1.3.31.2.15.1.1.1.8",
    "registryoid": "2.16.840.1.113883.2.1.3.31.2.1.1",
    "languagecode": "en-GB",
    "docname": "TOC Workflow",
    "docdesc": "Transfer of Care Workflow Document",
    "classcode": "823692000000000",
    "classcodescheme": "EPUT Class_Codes",
    "classcodevalue": "Clinical Document",
    "typecode": "823691000000104",
    "typecodescheme": "SNOMED CT",
    "typecodevalue": "TOC Referral",
    "practicesettingcode": "823691000000001",
    "practicesettingscheme": "EPUT Practice_Codes",
    "practicesettingvalue": "CPS",
    "confcode": "N",
    "confcodescheme": "EPUT Confidentiality Codes",
    "confcodevalue": "Restricted",
    "facilitycode": "Social Care",
    "facilitycodescheme": "EPUT Facility Codes",
    "facilitycodevalue": "Social Care",
    "formatcode": "urn:ihe:iti:xdw:2011:workflowDoc",
    "formatcodescheme": "IHE",
    "formatcodevalue": "ITI XDW",
    "mimetype": "application/xml",
    "objecttype": "urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248"
} toc_meta]
2022/10/22 16:05:58.745435 tukxdw.go:652: Persisted Workflow XDS Meta for Pathway toc
