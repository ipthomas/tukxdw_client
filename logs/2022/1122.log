2022/11/22 18:24:14.822022 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 18:24:14.822075 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 18:24:14.822114 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 18:24:14.826126 main.go:193: Loaded subscribe.xml 
2022/11/22 18:24:14.826171 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 18:24:14.826303 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 18:24:14.856795 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:24:14.875990 main.go:193: Loaded brokerack.xml 
2022/11/22 18:24:14.876022 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 18:24:14.876064 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 18:24:14.881374 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:24:14.884173 main.go:193: Loaded cancel.xml 
2022/11/22 18:24:14.884213 main.go:153: Persisting XML Template cancel.xml
2022/11/22 18:24:14.884247 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 18:24:14.887648 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel]
2022/11/22 18:24:14.890567 main.go:193: Loaded stsrst.xml 
2022/11/22 18:24:14.890600 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 18:24:14.890657 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 18:24:14.894494 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 18:24:14.897184 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 18:24:14.897212 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 18:24:14.897262 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 18:24:14.900619 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 18:24:14.907465 main.go:193: Loaded xdsodd.xml 
2022/11/22 18:24:14.907493 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 18:24:14.907523 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 18:24:14.909622 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/22 18:24:14.916757 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 18:24:14.916789 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 18:24:14.916819 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/22 18:24:14.919642 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/22 18:24:14.923212 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 18:24:14.923240 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 18:24:14.923282 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/22 18:24:14.928189 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 18:24:14.932236 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 18:24:14.932269 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 18:24:14.932311 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 18:24:14.936267 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 18:24:14.940093 main.go:193: Loaded pathwayoptions.html 
2022/11/22 18:24:14.940123 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 18:24:14.940166 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 18:24:14.942253 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 18:24:14.944785 main.go:193: Loaded pixmpatient.html 
2022/11/22 18:24:14.944818 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 18:24:14.944993 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 18:24:14.947265 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:24:14.950294 main.go:193: Loaded subscriptions.html 
2022/11/22 18:24:14.950325 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 18:24:14.950353 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 18:24:14.952576 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/22 18:24:14.956228 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 18:24:14.956256 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 18:24:14.956284 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 18:24:14.958904 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 18:24:14.961819 main.go:193: Loaded workflowtasks.html 
2022/11/22 18:24:14.961850 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 18:24:14.961879 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 18:24:14.964621 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 18:24:14.969460 main.go:193: Loaded dashboardwidget.html 
2022/11/22 18:24:14.969491 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 18:24:14.969520 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 18:24:14.973754 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 18:24:14.977949 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 18:24:14.977981 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 18:24:14.978011 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 18:24:14.982461 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/22 18:24:14.986310 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 18:24:14.986344 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 18:24:14.986394 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:24:14.988820 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 18:24:14.994929 main.go:193: Loaded workflows.html 
2022/11/22 18:24:14.994959 main.go:171: Persisting HTML Template workflows.html
2022/11/22 18:24:14.994988 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 18:24:14.997804 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 18:24:15.001371 main.go:193: Loaded adminspawidget.html 
2022/11/22 18:24:15.001401 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 18:24:15.001431 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 18:24:15.003674 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:24:15.009196 main.go:193: Loaded spawidget.html 
2022/11/22 18:24:15.009225 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 18:24:15.009259 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 18:24:15.011595 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:24:15.018267 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 18:24:15.018296 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 18:24:15.018338 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 18:24:15.022416 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 18:24:15.026320 main.go:193: Loaded footer.html 
2022/11/22 18:24:15.026353 main.go:171: Persisting HTML Template footer.html
2022/11/22 18:24:15.026382 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 18:24:15.033389 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 18:24:15.039447 main.go:193: Loaded events.html 
2022/11/22 18:24:15.039482 main.go:171: Persisting HTML Template events.html
2022/11/22 18:24:15.039530 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 18:24:15.041787 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:24:15.046662 main.go:193: Loaded header.html 
2022/11/22 18:24:15.046691 main.go:171: Persisting HTML Template header.html
2022/11/22 18:24:15.046726 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 18:24:15.049088 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 18:24:15.053709 main.go:193: Loaded pixpatient.html 
2022/11/22 18:24:15.053741 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 18:24:15.053783 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 18:24:15.056708 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 18:24:15.060034 main.go:193: Loaded horizontalline.html 
2022/11/22 18:24:15.060065 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 18:24:15.060125 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 18:24:15.063683 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 18:24:15.070167 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 18:24:15.070196 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 18:24:15.070227 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 18:24:15.073788 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 18:24:15.078114 main.go:193: Loaded workflow.html 
2022/11/22 18:24:15.078146 main.go:171: Persisting HTML Template workflow.html
2022/11/22 18:24:15.078181 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 18:24:15.081159 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}} workflow %!s(bool=false)]
2022/11/22 18:24:15.084470 main.go:193: Loaded wfconfig.html 
2022/11/22 18:24:15.084496 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 18:24:15.084525 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 18:24:15.086861 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:24:15.088887 main.go:193: Loaded timelinewidget.html 
2022/11/22 18:24:15.088917 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 18:24:15.088964 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/22 18:24:15.090813 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/22 18:26:30.979152 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 18:26:30.980262 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 18:26:30.980330 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 18:26:30.983992 main.go:193: Loaded subscribe.xml 
2022/11/22 18:26:30.984031 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 18:26:30.984199 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/22 18:26:31.000684 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:26:31.042988 main.go:193: Loaded brokerack.xml 
2022/11/22 18:26:31.043033 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 18:26:31.043123 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 18:26:31.048627 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:26:31.055485 main.go:193: Loaded cancel.xml 
2022/11/22 18:26:31.055524 main.go:153: Persisting XML Template cancel.xml
2022/11/22 18:26:31.055631 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 18:26:31.068376 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 18:26:31.106841 main.go:193: Loaded stsrst.xml 
2022/11/22 18:26:31.107123 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 18:26:31.107169 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 18:26:31.112059 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 18:26:31.114858 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 18:26:31.114890 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 18:26:31.114925 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 18:26:31.118244 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 18:26:31.142359 main.go:193: Loaded xdsodd.xml 
2022/11/22 18:26:31.142391 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 18:26:31.142423 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 18:26:31.145404 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/22 18:26:31.160944 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 18:26:31.160979 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 18:26:31.161010 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 18:26:31.167094 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status]
2022/11/22 18:26:31.171122 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 18:26:31.171150 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 18:26:31.171189 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/22 18:26:31.176514 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 18:26:31.181896 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 18:26:31.181937 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 18:26:31.182010 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 18:26:31.189606 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 18:26:31.194521 main.go:193: Loaded pathwayoptions.html 
2022/11/22 18:26:31.194558 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 18:26:31.194589 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 18:26:31.197462 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 18:26:31.201125 main.go:193: Loaded pixmpatient.html 
2022/11/22 18:26:31.201156 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 18:26:31.201187 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 18:26:31.204221 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:26:31.210859 main.go:193: Loaded subscriptions.html 
2022/11/22 18:26:31.210890 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 18:26:31.210933 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 18:26:31.213378 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 18:26:31.217407 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 18:26:31.217440 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 18:26:31.217471 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 18:26:31.222794 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 18:26:31.225833 main.go:193: Loaded workflowtasks.html 
2022/11/22 18:26:31.225865 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 18:26:31.225894 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 18:26:31.228245 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/22 18:26:31.234116 main.go:193: Loaded dashboardwidget.html 
2022/11/22 18:26:31.234143 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 18:26:31.234171 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/22 18:26:31.237884 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 18:26:31.242140 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 18:26:31.242173 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 18:26:31.242206 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 18:26:31.243517 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyPrint .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyPrint .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/22 18:26:31.247207 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 18:26:31.247238 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 18:26:31.247268 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:26:31.253235 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:26:31.259816 main.go:193: Loaded workflows.html 
2022/11/22 18:26:31.259847 main.go:171: Persisting HTML Template workflows.html
2022/11/22 18:26:31.259877 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflows]
2022/11/22 18:26:31.264205 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/22 18:26:31.267650 main.go:193: Loaded adminspawidget.html 
2022/11/22 18:26:31.267741 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 18:26:31.267772 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/22 18:26:31.269138 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:26:31.272875 main.go:193: Loaded spawidget.html 
2022/11/22 18:26:31.272906 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 18:26:31.272958 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 18:26:31.274427 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:26:31.276790 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 18:26:31.276820 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 18:26:31.276849 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 18:26:31.278832 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/22 18:26:31.283479 main.go:193: Loaded footer.html 
2022/11/22 18:26:31.283511 main.go:171: Persisting HTML Template footer.html
2022/11/22 18:26:31.283563 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 18:26:31.286537 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 18:26:31.289975 main.go:193: Loaded events.html 
2022/11/22 18:26:31.290007 main.go:171: Persisting HTML Template events.html
2022/11/22 18:26:31.290036 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 18:26:31.292869 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:26:31.299504 main.go:193: Loaded header.html 
2022/11/22 18:26:31.299539 main.go:171: Persisting HTML Template header.html
2022/11/22 18:26:31.299572 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 18:26:31.303263 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 18:26:31.306163 main.go:193: Loaded pixpatient.html 
2022/11/22 18:26:31.306194 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 18:26:31.306232 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 18:26:31.308257 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 18:26:31.311665 main.go:193: Loaded horizontalline.html 
2022/11/22 18:26:31.311692 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 18:26:31.311796 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 18:26:31.314461 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 18:26:31.320094 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 18:26:31.320130 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 18:26:31.320179 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 18:26:31.324257 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 18:26:31.327765 main.go:193: Loaded workflow.html 
2022/11/22 18:26:31.327793 main.go:171: Persisting HTML Template workflow.html
2022/11/22 18:26:31.327823 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 18:26:31.329772 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:26:31.339657 main.go:193: Loaded wfconfig.html 
2022/11/22 18:26:31.339698 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 18:26:31.339729 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 18:26:31.344752 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:26:31.348319 main.go:193: Loaded timelinewidget.html 
2022/11/22 18:26:31.348361 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 18:26:31.348401 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 18:26:31.354425 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget]
2022/11/22 18:27:31.609707 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 18:27:31.610764 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 18:27:31.610829 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 18:27:31.614221 main.go:193: Loaded subscribe.xml 
2022/11/22 18:27:31.614273 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 18:27:31.614432 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/22 18:27:31.625661 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/22 18:27:31.633347 main.go:193: Loaded brokerack.xml 
2022/11/22 18:27:31.633401 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 18:27:31.633455 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 18:27:31.636543 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:27:31.639421 main.go:193: Loaded cancel.xml 
2022/11/22 18:27:31.639463 main.go:153: Persisting XML Template cancel.xml
2022/11/22 18:27:31.639516 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/22 18:27:31.642167 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel]
2022/11/22 18:27:31.645734 main.go:193: Loaded stsrst.xml 
2022/11/22 18:27:31.645779 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 18:27:31.645826 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 18:27:31.648101 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 18:27:31.651994 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 18:27:31.652037 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 18:27:31.652091 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 18:27:31.655155 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 18:27:31.660976 main.go:193: Loaded xdsodd.xml 
2022/11/22 18:27:31.661019 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 18:27:31.661099 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 18:27:31.663973 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 18:27:31.668177 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 18:27:31.668206 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 18:27:31.668246 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 18:27:31.670991 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 18:27:31.674592 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 18:27:31.674632 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 18:27:31.674676 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 18:27:31.679062 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 18:27:31.684542 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 18:27:31.684577 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 18:27:31.684632 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 18:27:31.689135 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 18:27:31.692969 main.go:193: Loaded pathwayoptions.html 
2022/11/22 18:27:31.693004 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 18:27:31.693039 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 18:27:31.695809 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 18:27:31.699665 main.go:193: Loaded pixmpatient.html 
2022/11/22 18:27:31.699699 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 18:27:31.699736 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 18:27:31.701932 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:27:31.704524 main.go:193: Loaded subscriptions.html 
2022/11/22 18:27:31.704555 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 18:27:31.704583 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/22 18:27:31.706905 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 18:27:31.709080 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 18:27:31.709107 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 18:27:31.709150 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 18:27:31.713257 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 18:27:31.716218 main.go:193: Loaded workflowtasks.html 
2022/11/22 18:27:31.716245 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 18:27:31.716288 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 18:27:31.719219 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks %!s(bool=false)]
2022/11/22 18:27:31.723548 main.go:193: Loaded dashboardwidget.html 
2022/11/22 18:27:31.723583 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 18:27:31.723618 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 18:27:31.726227 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 18:27:31.729421 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 18:27:31.729462 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 18:27:31.729501 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 18:27:31.731108 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/22 18:27:31.734245 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 18:27:31.734278 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 18:27:31.734324 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:27:31.736538 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:27:31.740134 main.go:193: Loaded workflows.html 
2022/11/22 18:27:31.740163 main.go:171: Persisting HTML Template workflows.html
2022/11/22 18:27:31.740203 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 18:27:31.744301 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows %!s(bool=false)]
2022/11/22 18:27:31.748414 main.go:193: Loaded adminspawidget.html 
2022/11/22 18:27:31.748448 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 18:27:31.748482 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 18:27:31.751073 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:27:31.755020 main.go:193: Loaded spawidget.html 
2022/11/22 18:27:31.755048 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 18:27:31.755079 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/22 18:27:31.757810 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget]
2022/11/22 18:27:31.761792 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 18:27:31.761818 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 18:27:31.761849 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 18:27:31.764196 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 18:27:31.768042 main.go:193: Loaded footer.html 
2022/11/22 18:27:31.768074 main.go:171: Persisting HTML Template footer.html
2022/11/22 18:27:31.768109 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 18:27:31.770976 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/22 18:27:31.775847 main.go:193: Loaded events.html 
2022/11/22 18:27:31.775883 main.go:171: Persisting HTML Template events.html
2022/11/22 18:27:31.775919 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 18:27:31.778437 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:27:31.783668 main.go:193: Loaded header.html 
2022/11/22 18:27:31.783723 main.go:171: Persisting HTML Template header.html
2022/11/22 18:27:31.783759 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 18:27:31.788483 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 18:27:31.792709 main.go:193: Loaded pixpatient.html 
2022/11/22 18:27:31.792742 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 18:27:31.792782 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 18:27:31.795390 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 18:27:31.799270 main.go:193: Loaded horizontalline.html 
2022/11/22 18:27:31.799314 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 18:27:31.799367 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 18:27:31.801438 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 18:27:31.805409 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 18:27:31.805447 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 18:27:31.805483 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 18:27:31.808081 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 18:27:31.811809 main.go:193: Loaded workflow.html 
2022/11/22 18:27:31.811845 main.go:171: Persisting HTML Template workflow.html
2022/11/22 18:27:31.811881 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflow]
2022/11/22 18:27:31.814538 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:27:31.818628 main.go:193: Loaded wfconfig.html 
2022/11/22 18:27:31.818661 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 18:27:31.818708 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 18:27:31.821536 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:27:31.824808 main.go:193: Loaded timelinewidget.html 
2022/11/22 18:27:31.824837 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 18:27:31.824866 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 18:27:31.827074 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 18:39:16.704237 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 18:39:16.705516 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 18:39:16.705573 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 18:39:16.707474 main.go:193: Loaded subscribe.xml 
2022/11/22 18:39:16.707517 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 18:39:16.707630 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 18:39:16.721734 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:39:16.726767 main.go:193: Loaded brokerack.xml 
2022/11/22 18:39:16.726801 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 18:39:16.726859 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 18:39:16.731338 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 18:39:16.735461 main.go:193: Loaded cancel.xml 
2022/11/22 18:39:16.735496 main.go:153: Persisting XML Template cancel.xml
2022/11/22 18:39:16.735531 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 18:39:16.738077 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 18:39:16.742398 main.go:193: Loaded stsrst.xml 
2022/11/22 18:39:16.742433 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 18:39:16.742469 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 18:39:16.744616 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/22 18:39:16.748086 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 18:39:16.748121 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 18:39:16.748157 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 18:39:16.752209 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 18:39:16.758437 main.go:193: Loaded xdsodd.xml 
2022/11/22 18:39:16.758475 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 18:39:16.758519 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 18:39:16.761377 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/22 18:39:16.765163 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 18:39:16.765221 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 18:39:16.765383 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 18:39:16.768912 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 18:39:16.772019 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 18:39:16.772048 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 18:39:16.772088 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 18:39:16.776202 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 18:39:16.778296 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 18:39:16.778326 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 18:39:16.778356 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 18:39:16.781612 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 18:39:16.784509 main.go:193: Loaded pathwayoptions.html 
2022/11/22 18:39:16.784541 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 18:39:16.784572 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 18:39:16.786581 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 18:39:16.791073 main.go:193: Loaded pixmpatient.html 
2022/11/22 18:39:16.791106 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 18:39:16.791145 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 18:39:16.793915 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient %!s(bool=false)]
2022/11/22 18:39:16.796573 main.go:193: Loaded subscriptions.html 
2022/11/22 18:39:16.796604 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 18:39:16.796633 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 18:39:16.799114 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 18:39:16.803010 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 18:39:16.803039 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 18:39:16.803067 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 18:39:16.805248 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 18:39:16.807815 main.go:193: Loaded workflowtasks.html 
2022/11/22 18:39:16.807849 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 18:39:16.807880 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 18:39:16.809223 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 18:39:16.814148 main.go:193: Loaded dashboardwidget.html 
2022/11/22 18:39:16.814180 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 18:39:16.814210 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 18:39:16.818408 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 18:39:16.822319 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 18:39:16.822347 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 18:39:16.822377 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 18:39:16.824535 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/22 18:39:16.827331 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 18:39:16.827367 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 18:39:16.827397 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 18:39:16.829743 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 18:39:16.833349 main.go:193: Loaded workflows.html 
2022/11/22 18:39:16.833383 main.go:171: Persisting HTML Template workflows.html
2022/11/22 18:39:16.833416 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 18:39:16.835721 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/22 18:39:16.838343 main.go:193: Loaded adminspawidget.html 
2022/11/22 18:39:16.838377 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 18:39:16.838418 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 18:39:16.840836 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:39:16.844837 main.go:193: Loaded spawidget.html 
2022/11/22 18:39:16.844869 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 18:39:16.844898 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 18:39:16.847247 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 18:39:16.850499 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 18:39:16.850535 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 18:39:16.850578 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 18:39:16.852195 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 18:39:16.854702 main.go:193: Loaded footer.html 
2022/11/22 18:39:16.854730 main.go:171: Persisting HTML Template footer.html
2022/11/22 18:39:16.854760 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 18:39:16.856407 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/22 18:39:16.862272 main.go:193: Loaded events.html 
2022/11/22 18:39:16.862302 main.go:171: Persisting HTML Template events.html
2022/11/22 18:39:16.862332 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 18:39:16.864472 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:39:16.868904 main.go:193: Loaded header.html 
2022/11/22 18:39:16.868932 main.go:171: Persisting HTML Template header.html
2022/11/22 18:39:16.868962 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 18:39:16.871419 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 18:39:16.874241 main.go:193: Loaded pixpatient.html 
2022/11/22 18:39:16.874274 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 18:39:16.874304 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 18:39:16.876201 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 18:39:16.880727 main.go:193: Loaded horizontalline.html 
2022/11/22 18:39:16.880757 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 18:39:16.880794 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 18:39:16.883152 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 18:39:16.886811 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 18:39:16.886842 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 18:39:16.886879 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 18:39:16.888961 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 18:39:16.890981 main.go:193: Loaded workflow.html 
2022/11/22 18:39:16.891010 main.go:171: Persisting HTML Template workflow.html
2022/11/22 18:39:16.891037 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflow]
2022/11/22 18:39:16.892730 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:39:16.895372 main.go:193: Loaded wfconfig.html 
2022/11/22 18:39:16.895401 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 18:39:16.895430 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 18:39:16.897555 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 18:39:16.902152 main.go:193: Loaded timelinewidget.html 
2022/11/22 18:39:16.902184 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 18:39:16.902214 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 18:39:16.904406 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 19:20:06.710636 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 19:20:06.711804 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 19:20:06.711869 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 19:20:06.713547 main.go:193: Loaded subscribe.xml 
2022/11/22 19:20:06.713593 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 19:20:06.713708 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 19:20:06.736508 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 19:20:06.742071 main.go:193: Loaded brokerack.xml 
2022/11/22 19:20:06.742116 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 19:20:06.742190 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 19:20:06.744695 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 19:20:06.749549 main.go:193: Loaded cancel.xml 
2022/11/22 19:20:06.749594 main.go:153: Persisting XML Template cancel.xml
2022/11/22 19:20:06.749658 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 19:20:06.753896 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 19:20:06.756959 main.go:193: Loaded stsrst.xml 
2022/11/22 19:20:06.756999 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 19:20:06.757060 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 19:20:06.759374 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 19:20:06.762425 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 19:20:06.762463 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 19:20:06.762499 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 19:20:06.764696 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 19:20:06.768719 main.go:193: Loaded xdsodd.xml 
2022/11/22 19:20:06.768752 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 19:20:06.768787 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) xdsodd]
2022/11/22 19:20:06.771166 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/22 19:20:06.776983 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 19:20:06.777019 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 19:20:06.777064 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 19:20:06.779271 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 19:20:06.782952 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 19:20:06.782991 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 19:20:06.783047 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 19:20:06.785061 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 19:20:06.788547 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 19:20:06.788601 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 19:20:06.788634 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/22 19:20:06.790548 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/22 19:20:06.793018 main.go:193: Loaded pathwayoptions.html 
2022/11/22 19:20:06.793056 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 19:20:06.793090 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 19:20:06.795451 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 19:20:06.798115 main.go:193: Loaded pixmpatient.html 
2022/11/22 19:20:06.798149 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 19:20:06.798182 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 19:20:06.800707 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 19:20:06.802557 main.go:193: Loaded subscriptions.html 
2022/11/22 19:20:06.802589 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 19:20:06.802633 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 19:20:06.804977 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 19:20:06.806965 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 19:20:06.806998 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 19:20:06.807043 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 19:20:06.809451 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}} snip_workflow_task_col_status]
2022/11/22 19:20:06.813075 main.go:193: Loaded workflowtasks.html 
2022/11/22 19:20:06.813108 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 19:20:06.813139 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 19:20:06.815273 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 19:20:06.819247 main.go:193: Loaded dashboardwidget.html 
2022/11/22 19:20:06.819275 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 19:20:06.819303 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 19:20:06.821029 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 19:20:06.823695 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 19:20:06.823725 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 19:20:06.823760 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 19:20:06.825868 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/22 19:20:06.829859 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 19:20:06.829886 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 19:20:06.829914 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 19:20:06.832010 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 19:20:06.834656 main.go:193: Loaded workflows.html 
2022/11/22 19:20:06.834685 main.go:171: Persisting HTML Template workflows.html
2022/11/22 19:20:06.834714 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 19:20:06.836002 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 19:20:06.839798 main.go:193: Loaded adminspawidget.html 
2022/11/22 19:20:06.839827 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 19:20:06.839855 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 19:20:06.841969 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 19:20:06.844663 main.go:193: Loaded spawidget.html 
2022/11/22 19:20:06.844692 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 19:20:06.844720 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 19:20:06.847060 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 19:20:06.850472 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 19:20:06.850499 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 19:20:06.850534 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 19:20:06.852828 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 19:20:06.855164 main.go:193: Loaded footer.html 
2022/11/22 19:20:06.855192 main.go:171: Persisting HTML Template footer.html
2022/11/22 19:20:06.855221 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 19:20:06.857541 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/22 19:20:06.861847 main.go:193: Loaded events.html 
2022/11/22 19:20:06.861876 main.go:171: Persisting HTML Template events.html
2022/11/22 19:20:06.861905 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 19:20:06.864218 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 19:20:06.867680 main.go:193: Loaded header.html 
2022/11/22 19:20:06.867707 main.go:171: Persisting HTML Template header.html
2022/11/22 19:20:06.867736 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 19:20:06.870256 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 19:20:06.872541 main.go:193: Loaded pixpatient.html 
2022/11/22 19:20:06.872570 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 19:20:06.872600 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 19:20:06.874639 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 19:20:06.878070 main.go:193: Loaded horizontalline.html 
2022/11/22 19:20:06.878096 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 19:20:06.878124 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/22 19:20:06.880329 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 19:20:06.883761 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 19:20:06.883790 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 19:20:06.883819 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 19:20:06.885997 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/22 19:20:06.889601 main.go:193: Loaded workflow.html 
2022/11/22 19:20:06.889628 main.go:171: Persisting HTML Template workflow.html
2022/11/22 19:20:06.889657 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 19:20:06.891867 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 19:20:06.895884 main.go:193: Loaded wfconfig.html 
2022/11/22 19:20:06.895915 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 19:20:06.895945 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 19:20:06.898194 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 19:20:06.900473 main.go:193: Loaded timelinewidget.html 
2022/11/22 19:20:06.900504 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 19:20:06.900552 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 19:20:06.902643 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 20:44:15.200120 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 20:44:15.201433 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 20:44:15.201503 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 20:44:15.203155 main.go:193: Loaded subscribe.xml 
2022/11/22 20:44:15.203197 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 20:44:15.203327 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 20:44:15.283459 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 20:44:15.293307 main.go:193: Loaded brokerack.xml 
2022/11/22 20:44:15.293480 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 20:44:15.293546 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 20:44:15.297769 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 20:44:15.342905 main.go:193: Loaded cancel.xml 
2022/11/22 20:44:15.342947 main.go:153: Persisting XML Template cancel.xml
2022/11/22 20:44:15.342983 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 20:44:15.346032 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 20:44:15.349082 main.go:193: Loaded stsrst.xml 
2022/11/22 20:44:15.349122 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 20:44:15.349307 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 20:44:15.351502 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 20:44:15.355501 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 20:44:15.355539 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 20:44:15.355591 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 20:44:15.357812 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 20:44:15.361383 main.go:193: Loaded xdsodd.xml 
2022/11/22 20:44:15.361417 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 20:44:15.361453 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 20:44:15.363581 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 20:44:15.368877 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 20:44:15.368910 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 20:44:15.368953 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/22 20:44:15.370863 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 20:44:15.373554 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 20:44:15.373590 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 20:44:15.373632 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 20:44:15.374782 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 20:44:15.377309 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 20:44:15.377346 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 20:44:15.377386 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 20:44:15.379489 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 20:44:15.381853 main.go:193: Loaded pathwayoptions.html 
2022/11/22 20:44:15.381896 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 20:44:15.381930 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 20:44:15.384197 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 20:44:15.387099 main.go:193: Loaded pixmpatient.html 
2022/11/22 20:44:15.387135 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 20:44:15.387170 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 20:44:15.388890 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:44:15.391555 main.go:193: Loaded subscriptions.html 
2022/11/22 20:44:15.391599 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 20:44:15.391635 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 20:44:15.393791 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 20:44:15.396650 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 20:44:15.396716 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 20:44:15.396769 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 20:44:15.398864 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 20:44:15.402763 main.go:193: Loaded workflowtasks.html 
2022/11/22 20:44:15.402803 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 20:44:15.402838 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 20:44:15.405770 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks %!s(bool=false)]
2022/11/22 20:44:15.410100 main.go:193: Loaded dashboardwidget.html 
2022/11/22 20:44:15.410130 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 20:44:15.410160 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 20:44:15.412354 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 20:44:15.416506 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 20:44:15.416541 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 20:44:15.416587 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 20:44:15.418819 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 20:44:15.421377 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 20:44:15.421408 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 20:44:15.421455 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 20:44:15.422574 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/22 20:44:15.426756 main.go:193: Loaded workflows.html 
2022/11/22 20:44:15.426790 main.go:171: Persisting HTML Template workflows.html
2022/11/22 20:44:15.426820 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 20:44:15.429229 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/22 20:44:15.432015 main.go:193: Loaded adminspawidget.html 
2022/11/22 20:44:15.432052 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 20:44:15.432082 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 20:44:15.434510 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Persist Service Configs</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 20:44:15.437390 main.go:193: Loaded spawidget.html 
2022/11/22 20:44:15.437433 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 20:44:15.437461 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 20:44:15.438782 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 20:44:15.442878 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 20:44:15.442909 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 20:44:15.442952 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 20:44:15.445258 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/22 20:44:15.448839 main.go:193: Loaded footer.html 
2022/11/22 20:44:15.448879 main.go:171: Persisting HTML Template footer.html
2022/11/22 20:44:15.448913 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 20:44:15.453227 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 20:44:15.458035 main.go:193: Loaded events.html 
2022/11/22 20:44:15.458066 main.go:171: Persisting HTML Template events.html
2022/11/22 20:44:15.458096 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) events]
2022/11/22 20:44:15.459969 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:44:15.464387 main.go:193: Loaded header.html 
2022/11/22 20:44:15.464418 main.go:171: Persisting HTML Template header.html
2022/11/22 20:44:15.464447 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 20:44:15.466459 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 20:44:15.470411 main.go:193: Loaded pixpatient.html 
2022/11/22 20:44:15.470442 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 20:44:15.470481 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 20:44:15.476522 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/22 20:44:15.479537 main.go:193: Loaded horizontalline.html 
2022/11/22 20:44:15.479566 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 20:44:15.479596 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 20:44:15.481701 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 20:44:15.486047 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 20:44:15.486073 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 20:44:15.486110 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 20:44:15.488178 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 20:44:15.490693 main.go:193: Loaded workflow.html 
2022/11/22 20:44:15.490721 main.go:171: Persisting HTML Template workflow.html
2022/11/22 20:44:15.490764 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 20:44:15.492842 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:44:15.497043 main.go:193: Loaded wfconfig.html 
2022/11/22 20:44:15.497070 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 20:44:15.497117 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 20:44:15.499449 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:44:15.518360 main.go:193: Loaded timelinewidget.html 
2022/11/22 20:44:15.518395 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 20:44:15.518433 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 20:44:15.521050 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 20:57:57.041967 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 20:57:57.043521 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 20:57:57.043587 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 20:57:57.045449 main.go:193: Loaded subscribe.xml 
2022/11/22 20:57:57.045500 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 20:57:57.045662 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 20:57:57.064742 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 20:57:57.068459 main.go:193: Loaded brokerack.xml 
2022/11/22 20:57:57.068501 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 20:57:57.068544 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 20:57:57.071131 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 20:57:57.074791 main.go:193: Loaded cancel.xml 
2022/11/22 20:57:57.074833 main.go:153: Persisting XML Template cancel.xml
2022/11/22 20:57:57.074886 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 20:57:57.077805 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel %!s(bool=true)]
2022/11/22 20:57:57.081713 main.go:193: Loaded stsrst.xml 
2022/11/22 20:57:57.081756 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 20:57:57.081808 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/22 20:57:57.083769 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 20:57:57.087611 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 20:57:57.087675 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 20:57:57.087710 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 20:57:57.089953 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 20:57:57.094206 main.go:193: Loaded xdsodd.xml 
2022/11/22 20:57:57.094244 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 20:57:57.094279 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 20:57:57.097419 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 20:57:57.101871 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 20:57:57.101914 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 20:57:57.101947 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 20:57:57.104237 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 20:57:57.108191 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 20:57:57.108234 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 20:57:57.108290 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 20:57:57.110811 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/22 20:57:57.114787 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 20:57:57.114846 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 20:57:57.114922 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/22 20:57:57.117241 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 20:57:57.121210 main.go:193: Loaded pathwayoptions.html 
2022/11/22 20:57:57.121250 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 20:57:57.121302 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 20:57:57.123927 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 20:57:57.127587 main.go:193: Loaded pixmpatient.html 
2022/11/22 20:57:57.127630 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 20:57:57.127670 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 20:57:57.130193 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:57:57.134014 main.go:193: Loaded subscriptions.html 
2022/11/22 20:57:57.134051 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 20:57:57.134084 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 20:57:57.136509 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions %!s(bool=false)]
2022/11/22 20:57:57.139784 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 20:57:57.139838 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 20:57:57.139894 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 20:57:57.143683 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}} snip_workflow_task_col_status]
2022/11/22 20:57:57.146884 main.go:193: Loaded workflowtasks.html 
2022/11/22 20:57:57.146926 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 20:57:57.146967 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 20:57:57.149783 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks %!s(bool=false)]
2022/11/22 20:57:57.153249 main.go:193: Loaded dashboardwidget.html 
2022/11/22 20:57:57.153283 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 20:57:57.153316 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/22 20:57:57.155938 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 20:57:57.160120 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 20:57:57.160159 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 20:57:57.160243 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 20:57:57.162848 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 20:57:57.166526 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 20:57:57.166563 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 20:57:57.166608 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 20:57:57.169119 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 20:57:57.173159 main.go:193: Loaded workflows.html 
2022/11/22 20:57:57.173190 main.go:171: Persisting HTML Template workflows.html
2022/11/22 20:57:57.173219 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 20:57:57.175277 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 20:57:57.177794 main.go:193: Loaded adminspawidget.html 
2022/11/22 20:57:57.177826 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 20:57:57.177855 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 20:57:57.179900 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Persist Service Configs</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Persist Templates</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Persist XDW Configs</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="initsrvcs">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 20:57:57.183415 main.go:193: Loaded spawidget.html 
2022/11/22 20:57:57.183443 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 20:57:57.183473 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 20:57:57.185621 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/22 20:57:57.189166 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 20:57:57.189195 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 20:57:57.189224 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 20:57:57.191167 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 20:57:57.194489 main.go:193: Loaded footer.html 
2022/11/22 20:57:57.194519 main.go:171: Persisting HTML Template footer.html
2022/11/22 20:57:57.194549 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 20:57:57.196240 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 20:57:57.198993 main.go:193: Loaded events.html 
2022/11/22 20:57:57.199025 main.go:171: Persisting HTML Template events.html
2022/11/22 20:57:57.199055 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 20:57:57.201182 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 20:57:57.203662 main.go:193: Loaded header.html 
2022/11/22 20:57:57.203692 main.go:171: Persisting HTML Template header.html
2022/11/22 20:57:57.203721 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 20:57:57.205813 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/22 20:57:57.208506 main.go:193: Loaded pixpatient.html 
2022/11/22 20:57:57.208536 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 20:57:57.208564 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 20:57:57.210706 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/22 20:57:57.214004 main.go:193: Loaded horizontalline.html 
2022/11/22 20:57:57.214039 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 20:57:57.214097 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 20:57:57.216135 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 20:57:57.218587 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 20:57:57.218616 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 20:57:57.218644 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 20:57:57.220770 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 20:57:57.222908 main.go:193: Loaded workflow.html 
2022/11/22 20:57:57.222935 main.go:171: Persisting HTML Template workflow.html
2022/11/22 20:57:57.222964 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 20:57:57.225333 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}} workflow]
2022/11/22 20:57:57.227804 main.go:193: Loaded wfconfig.html 
2022/11/22 20:57:57.227834 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 20:57:57.227863 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 20:57:57.229230 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}} wfconfig]
2022/11/22 20:57:57.232157 main.go:193: Loaded timelinewidget.html 
2022/11/22 20:57:57.232190 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 20:57:57.232223 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/22 20:57:57.234239 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 21:51:37.237898 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 21:51:37.239096 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 21:51:37.239162 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 21:51:37.242910 main.go:193: Loaded subscribe.xml 
2022/11/22 21:51:37.242951 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 21:51:37.243103 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/22 21:51:37.255899 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/22 21:51:37.260544 main.go:193: Loaded brokerack.xml 
2022/11/22 21:51:37.260585 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 21:51:37.260623 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 21:51:37.263203 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 21:51:37.266369 main.go:193: Loaded cancel.xml 
2022/11/22 21:51:37.266403 main.go:153: Persisting XML Template cancel.xml
2022/11/22 21:51:37.266439 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 21:51:37.270067 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 21:51:37.275691 main.go:193: Loaded stsrst.xml 
2022/11/22 21:51:37.275732 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 21:51:37.275778 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 21:51:37.282007 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 21:51:37.285792 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 21:51:37.285822 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 21:51:37.285861 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 21:51:37.288311 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 21:51:37.292092 main.go:193: Loaded xdsodd.xml 
2022/11/22 21:51:37.292127 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 21:51:37.292159 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 21:51:37.295271 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 21:51:37.299235 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 21:51:37.299264 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 21:51:37.299295 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 21:51:37.302064 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 21:51:37.305225 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 21:51:37.305253 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 21:51:37.305292 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 21:51:37.307221 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 21:51:37.310693 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 21:51:37.310724 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 21:51:37.310757 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 21:51:37.313002 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/22 21:51:37.316480 main.go:193: Loaded pathwayoptions.html 
2022/11/22 21:51:37.316510 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 21:51:37.316540 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 21:51:37.320337 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}} pathwayoptions %!s(bool=false)]
2022/11/22 21:51:37.324502 main.go:193: Loaded pixmpatient.html 
2022/11/22 21:51:37.324536 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 21:51:37.324565 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/22 21:51:37.327350 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 21:51:37.330421 main.go:193: Loaded subscriptions.html 
2022/11/22 21:51:37.330452 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 21:51:37.330491 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 21:51:37.333044 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 21:51:37.336684 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 21:51:37.336712 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 21:51:37.336757 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 21:51:37.338977 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 21:51:37.342697 main.go:193: Loaded workflowtasks.html 
2022/11/22 21:51:37.342726 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 21:51:37.342756 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 21:51:37.344956 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/22 21:51:37.347926 main.go:193: Loaded dashboardwidget.html 
2022/11/22 21:51:37.347956 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 21:51:37.347984 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 21:51:37.350390 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 21:51:37.353475 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 21:51:37.353508 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 21:51:37.353547 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/22 21:51:37.354972 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 21:51:37.357538 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 21:51:37.357568 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 21:51:37.357597 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 21:51:37.359632 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 21:51:37.363815 main.go:193: Loaded workflows.html 
2022/11/22 21:51:37.363847 main.go:171: Persisting HTML Template workflows.html
2022/11/22 21:51:37.363878 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 21:51:37.365921 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 21:51:37.368371 main.go:193: Loaded adminspawidget.html 
2022/11/22 21:51:37.368406 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 21:51:37.368434 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 21:51:37.370398 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update Service Configs</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update Templates</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update XDW Configs</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="initsrvcs">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 21:51:37.374785 main.go:193: Loaded spawidget.html 
2022/11/22 21:51:37.374813 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 21:51:37.374842 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 21:51:37.376972 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 21:51:37.380807 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 21:51:37.380834 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 21:51:37.380863 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 21:51:37.381930 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 21:51:37.386349 main.go:193: Loaded footer.html 
2022/11/22 21:51:37.386378 main.go:171: Persisting HTML Template footer.html
2022/11/22 21:51:37.386407 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) footer]
2022/11/22 21:51:37.388471 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer]
2022/11/22 21:51:37.391856 main.go:193: Loaded events.html 
2022/11/22 21:51:37.391891 main.go:171: Persisting HTML Template events.html
2022/11/22 21:51:37.391919 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 21:51:37.393943 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 21:51:37.396576 main.go:193: Loaded header.html 
2022/11/22 21:51:37.396608 main.go:171: Persisting HTML Template header.html
2022/11/22 21:51:37.396650 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 21:51:37.397876 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header]
2022/11/22 21:51:37.400493 main.go:193: Loaded pixpatient.html 
2022/11/22 21:51:37.400523 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 21:51:37.400551 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 21:51:37.401785 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 21:51:37.403803 main.go:193: Loaded horizontalline.html 
2022/11/22 21:51:37.403830 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 21:51:37.403866 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 21:51:37.406040 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/22 21:51:37.408297 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 21:51:37.408329 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 21:51:37.408377 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 21:51:37.410648 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 21:51:37.412837 main.go:193: Loaded workflow.html 
2022/11/22 21:51:37.412869 main.go:171: Persisting HTML Template workflow.html
2022/11/22 21:51:37.412906 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 21:51:37.414928 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 21:51:37.418430 main.go:193: Loaded wfconfig.html 
2022/11/22 21:51:37.418464 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 21:51:37.418494 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/22 21:51:37.421270 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 21:51:37.424852 main.go:193: Loaded timelinewidget.html 
2022/11/22 21:51:37.424882 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 21:51:37.424912 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 21:51:37.427318 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 22:01:41.748338 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 22:01:41.749580 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 22:01:41.749647 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 22:01:41.751374 main.go:193: Loaded subscribe.xml 
2022/11/22 22:01:41.751420 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 22:01:41.751555 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 22:01:41.775571 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:01:41.781912 main.go:193: Loaded brokerack.xml 
2022/11/22 22:01:41.781965 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 22:01:41.782001 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 22:01:41.785774 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:01:41.788717 main.go:193: Loaded cancel.xml 
2022/11/22 22:01:41.788757 main.go:153: Persisting XML Template cancel.xml
2022/11/22 22:01:41.788807 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 22:01:41.791840 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 22:01:41.793757 main.go:193: Loaded stsrst.xml 
2022/11/22 22:01:41.793798 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 22:01:41.793860 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 22:01:41.795921 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 22:01:41.800790 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 22:01:41.800822 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 22:01:41.800863 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/22 22:01:41.803414 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:01:41.807230 main.go:193: Loaded xdsodd.xml 
2022/11/22 22:01:41.807264 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 22:01:41.807300 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 22:01:41.810027 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:01:41.814135 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 22:01:41.814269 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 22:01:41.814305 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 22:01:41.816807 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 22:01:41.820920 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 22:01:41.820956 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 22:01:41.821019 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 22:01:41.823490 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 22:01:41.827783 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 22:01:41.827819 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 22:01:41.827903 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 22:01:41.830576 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents]
2022/11/22 22:01:41.833935 main.go:193: Loaded pathwayoptions.html 
2022/11/22 22:01:41.833963 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 22:01:41.833998 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 22:01:41.836517 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 22:01:41.840272 main.go:193: Loaded pixmpatient.html 
2022/11/22 22:01:41.840299 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 22:01:41.840327 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 22:01:41.842635 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:01:41.846323 main.go:193: Loaded subscriptions.html 
2022/11/22 22:01:41.846359 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 22:01:41.846397 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 22:01:41.849111 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:01:41.851620 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 22:01:41.851645 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 22:01:41.851673 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 22:01:41.853905 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 22:01:41.858136 main.go:193: Loaded workflowtasks.html 
2022/11/22 22:01:41.858168 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 22:01:41.858203 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 22:01:41.861094 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 22:01:41.864461 main.go:193: Loaded dashboardwidget.html 
2022/11/22 22:01:41.864488 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 22:01:41.864517 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 22:01:41.868118 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 22:01:41.872634 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 22:01:41.872666 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 22:01:41.872701 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 22:01:41.875130 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 22:01:41.878937 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 22:01:41.878971 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 22:01:41.879005 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 22:01:41.881585 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 22:01:41.884918 main.go:193: Loaded workflows.html 
2022/11/22 22:01:41.884952 main.go:171: Persisting HTML Template workflows.html
2022/11/22 22:01:41.884988 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 22:01:41.887689 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows %!s(bool=false)]
2022/11/22 22:01:41.891848 main.go:193: Loaded adminspawidget.html 
2022/11/22 22:01:41.891884 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 22:01:41.891920 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 22:01:41.894671 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update Service Configs</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update Templates</a>
                </li>
                <li>
                    <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Update XDW Configs</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure</a>
                    <ul class="collapse list-unstyled" id="configsmenu">
                        <li>
                            <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                            <ul class="collapse list-unstyled" id="configsrvcsmenu">
                                {{range .EventServices.ServiceConfigs}}
                                <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                            <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                                {{range .EventServices.XMLMessages}}
                                <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                            <ul class="collapse list-unstyled" id="configwidgetmenu">
                                {{range .EventServices.HTMLWidgets}}
                                <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                            <ul class="collapse list-unstyled" id="configxdwmenu">
                                {{range .EventServices.WorkflowDefinitions}}
                                <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                            <ul class="collapse list-unstyled" id="initsrvcs">
                                {{range .EventServices.WorkflowXDWMeta}}
                                <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 22:01:41.899308 main.go:193: Loaded spawidget.html 
2022/11/22 22:01:41.899337 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 22:01:41.899365 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 22:01:41.902993 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/22 22:01:41.907144 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 22:01:41.907192 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 22:01:41.907229 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 22:01:41.909687 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 22:01:41.915580 main.go:193: Loaded footer.html 
2022/11/22 22:01:41.915612 main.go:171: Persisting HTML Template footer.html
2022/11/22 22:01:41.915649 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 22:01:41.918208 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 22:01:41.922543 main.go:193: Loaded events.html 
2022/11/22 22:01:41.922580 main.go:171: Persisting HTML Template events.html
2022/11/22 22:01:41.922631 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 22:01:41.925325 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} events]
2022/11/22 22:01:41.929412 main.go:193: Loaded header.html 
2022/11/22 22:01:41.929440 main.go:171: Persisting HTML Template header.html
2022/11/22 22:01:41.929475 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 22:01:41.931986 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/22 22:01:41.934727 main.go:193: Loaded pixpatient.html 
2022/11/22 22:01:41.934756 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 22:01:41.934785 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 22:01:41.936989 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient]
2022/11/22 22:01:41.940328 main.go:193: Loaded horizontalline.html 
2022/11/22 22:01:41.940354 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 22:01:41.940382 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 22:01:41.942166 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 22:01:41.944412 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 22:01:41.944446 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 22:01:41.944479 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 22:01:41.946741 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 22:01:41.949028 main.go:193: Loaded workflow.html 
2022/11/22 22:01:41.949059 main.go:171: Persisting HTML Template workflow.html
2022/11/22 22:01:41.949110 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 22:01:41.950295 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}} workflow %!s(bool=false)]
2022/11/22 22:01:41.953955 main.go:193: Loaded wfconfig.html 
2022/11/22 22:01:41.953992 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 22:01:41.954027 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 22:01:41.956382 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:01:41.960047 main.go:193: Loaded timelinewidget.html 
2022/11/22 22:01:41.960078 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 22:01:41.960107 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 22:01:41.962608 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 22:15:23.105877 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 22:15:23.107221 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 22:15:23.107293 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 22:15:23.109026 main.go:193: Loaded subscribe.xml 
2022/11/22 22:15:23.109082 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 22:15:23.109480 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 22:15:23.129367 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/22 22:15:23.131791 main.go:193: Loaded brokerack.xml 
2022/11/22 22:15:23.131831 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 22:15:23.131874 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 22:15:23.134425 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:15:23.139767 main.go:193: Loaded cancel.xml 
2022/11/22 22:15:23.139807 main.go:153: Persisting XML Template cancel.xml
2022/11/22 22:15:23.139863 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 22:15:23.143546 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 22:15:23.147542 main.go:193: Loaded stsrst.xml 
2022/11/22 22:15:23.147603 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 22:15:23.147661 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 22:15:23.150287 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/22 22:15:23.153893 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 22:15:23.153930 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 22:15:23.153965 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 22:15:23.155710 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:15:23.159144 main.go:193: Loaded xdsodd.xml 
2022/11/22 22:15:23.159191 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 22:15:23.159229 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 22:15:23.163080 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:15:23.166947 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 22:15:23.166983 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 22:15:23.167016 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 22:15:23.169186 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 22:15:23.171621 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 22:15:23.171654 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 22:15:23.171701 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 22:15:23.173913 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 22:15:23.176718 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 22:15:23.176756 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 22:15:23.176789 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 22:15:23.178172 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 22:15:23.180865 main.go:193: Loaded pathwayoptions.html 
2022/11/22 22:15:23.180895 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 22:15:23.180938 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 22:15:23.182112 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 22:15:23.185961 main.go:193: Loaded pixmpatient.html 
2022/11/22 22:15:23.185989 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 22:15:23.186022 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 22:15:23.188213 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:15:23.191758 main.go:193: Loaded subscriptions.html 
2022/11/22 22:15:23.191787 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 22:15:23.191818 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 22:15:23.194241 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:15:23.197593 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 22:15:23.197623 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 22:15:23.197652 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/22 22:15:23.200033 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}} snip_workflow_task_col_status]
2022/11/22 22:15:23.203782 main.go:193: Loaded workflowtasks.html 
2022/11/22 22:15:23.203810 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 22:15:23.203839 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 22:15:23.206230 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 22:15:23.209286 main.go:193: Loaded dashboardwidget.html 
2022/11/22 22:15:23.209319 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 22:15:23.209349 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 22:15:23.211503 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 22:15:23.215300 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 22:15:23.215330 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 22:15:23.215358 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 22:15:23.217368 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 22:15:23.220888 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 22:15:23.220917 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 22:15:23.220951 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 22:15:23.222960 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 22:15:23.226432 main.go:193: Loaded workflows.html 
2022/11/22 22:15:23.226461 main.go:171: Persisting HTML Template workflows.html
2022/11/22 22:15:23.226490 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 22:15:23.228405 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:15:23.230789 main.go:193: Loaded adminspawidget.html 
2022/11/22 22:15:23.230817 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 22:15:23.230845 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 22:15:23.233145 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Restart Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#updatesmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Update</a>
                    <ul class="collapse list-unstyled" id="updatesmenu">
                        <li>
                            <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Service Configs</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Templates</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">XDW Configs</a>
                        </li>
                    </ul>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure</a>
                    <ul class="collapse list-unstyled" id="configsmenu">
                        <li>
                            <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Services</a>
                            <ul class="collapse list-unstyled" id="configsrvcsmenu">
                                {{range .EventServices.ServiceConfigs}}
                                <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Messages</a>
                            <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                                {{range .EventServices.XMLMessages}}
                                <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">HTML</a>
                            <ul class="collapse list-unstyled" id="configwidgetmenu">
                                {{range .EventServices.HTMLWidgets}}
                                <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Pathways</a>
                            <ul class="collapse list-unstyled" id="configxdwmenu">
                                {{range .EventServices.WorkflowDefinitions}}
                                <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDS Meta</a>
                            <ul class="collapse list-unstyled" id="initsrvcs">
                                {{range .EventServices.WorkflowXDWMeta}}
                                <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 22:15:23.237081 main.go:193: Loaded spawidget.html 
2022/11/22 22:15:23.237109 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 22:15:23.237138 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 22:15:23.239167 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 22:15:23.242831 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 22:15:23.242865 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 22:15:23.242907 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 22:15:23.245122 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/22 22:15:23.247601 main.go:193: Loaded footer.html 
2022/11/22 22:15:23.247631 main.go:171: Persisting HTML Template footer.html
2022/11/22 22:15:23.247659 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 22:15:23.249190 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 22:15:23.252258 main.go:193: Loaded events.html 
2022/11/22 22:15:23.252288 main.go:171: Persisting HTML Template events.html
2022/11/22 22:15:23.252316 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 22:15:23.254613 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:15:23.257057 main.go:193: Loaded header.html 
2022/11/22 22:15:23.257086 main.go:171: Persisting HTML Template header.html
2022/11/22 22:15:23.257114 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 22:15:23.259316 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 22:15:23.261815 main.go:193: Loaded pixpatient.html 
2022/11/22 22:15:23.261845 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 22:15:23.261873 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 22:15:23.263172 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 22:15:23.266011 main.go:193: Loaded horizontalline.html 
2022/11/22 22:15:23.266043 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 22:15:23.266073 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 22:15:23.268530 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/22 22:15:23.270778 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 22:15:23.270807 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 22:15:23.270834 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 22:15:23.272919 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 22:15:23.276154 main.go:193: Loaded workflow.html 
2022/11/22 22:15:23.276185 main.go:171: Persisting HTML Template workflow.html
2022/11/22 22:15:23.276216 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 22:15:23.278306 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:15:23.280470 main.go:193: Loaded wfconfig.html 
2022/11/22 22:15:23.280500 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 22:15:23.280543 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 22:15:23.282738 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:15:23.284836 main.go:193: Loaded timelinewidget.html 
2022/11/22 22:15:23.284865 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 22:15:23.284894 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 22:15:23.287180 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/22 22:24:48.442144 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 22:24:48.443356 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 22:24:48.443420 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 22:24:48.445192 main.go:193: Loaded subscribe.xml 
2022/11/22 22:24:48.445236 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 22:24:48.445354 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 22:24:48.466407 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:24:48.471391 main.go:193: Loaded brokerack.xml 
2022/11/22 22:24:48.471447 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 22:24:48.471537 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/22 22:24:48.475025 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:24:48.478766 main.go:193: Loaded cancel.xml 
2022/11/22 22:24:48.478806 main.go:153: Persisting XML Template cancel.xml
2022/11/22 22:24:48.478849 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/22 22:24:48.481672 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/22 22:24:48.485779 main.go:193: Loaded stsrst.xml 
2022/11/22 22:24:48.485818 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 22:24:48.485852 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 22:24:48.488342 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 22:24:48.492388 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 22:24:48.492424 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 22:24:48.492476 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 22:24:48.495007 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:24:48.501612 main.go:193: Loaded xdsodd.xml 
2022/11/22 22:24:48.501658 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 22:24:48.501726 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 22:24:48.504368 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/22 22:24:48.508638 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 22:24:48.508678 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 22:24:48.508937 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/22 22:24:48.511314 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 22:24:48.516137 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 22:24:48.516196 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 22:24:48.516275 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 22:24:48.518980 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/22 22:24:48.522836 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 22:24:48.522869 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 22:24:48.522909 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 22:24:48.525364 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 22:24:48.529113 main.go:193: Loaded pathwayoptions.html 
2022/11/22 22:24:48.529153 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 22:24:48.529193 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 22:24:48.531713 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 22:24:48.534586 main.go:193: Loaded pixmpatient.html 
2022/11/22 22:24:48.534621 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 22:24:48.534658 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 22:24:48.536473 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:24:48.540231 main.go:193: Loaded subscriptions.html 
2022/11/22 22:24:48.540266 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 22:24:48.540303 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 22:24:48.542489 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:24:48.544934 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 22:24:48.544971 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 22:24:48.545004 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 22:24:48.546499 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 22:24:48.551179 main.go:193: Loaded workflowtasks.html 
2022/11/22 22:24:48.551213 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 22:24:48.551246 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 22:24:48.553394 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/22 22:24:48.557716 main.go:193: Loaded dashboardwidget.html 
2022/11/22 22:24:48.557754 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 22:24:48.557789 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 22:24:48.559801 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 22:24:48.562553 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 22:24:48.562589 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 22:24:48.562622 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 22:24:48.563874 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/22 22:24:48.566211 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 22:24:48.566246 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 22:24:48.566300 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/22 22:24:48.568239 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 22:24:48.570563 main.go:193: Loaded workflows.html 
2022/11/22 22:24:48.570599 main.go:171: Persisting HTML Template workflows.html
2022/11/22 22:24:48.570648 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 22:24:48.572875 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:24:48.576428 main.go:193: Loaded adminspawidget.html 
2022/11/22 22:24:48.576463 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 22:24:48.576496 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 22:24:48.578814 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Restart Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#updatesmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Update</a>
                    <ul class="collapse list-unstyled" id="updatesmenu">
                        <li>
                            <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Service Configs</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Templates</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">XDW Configs</a>
                        </li>
                    </ul>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure</a>
                    <ul class="collapse list-unstyled" id="configsmenu">
                        <li>
                            <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Services</a>
                            <ul class="collapse list-unstyled" id="configsrvcsmenu">
                                {{range .EventServices.ServiceConfigs}}
                                <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Messages</a>
                            <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                                {{range .EventServices.XMLMessages}}
                                <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">HTML</a>
                            <ul class="collapse list-unstyled" id="configwidgetmenu">
                                {{range .EventServices.HTMLWidgets}}
                                <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Pathways</a>
                            <ul class="collapse list-unstyled" id="configxdwmenu">
                                {{range .EventServices.WorkflowDefinitions}}
                                <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDS Meta</a>
                            <ul class="collapse list-unstyled" id="initsrvcs">
                                {{range .EventServices.WorkflowXDWMeta}}
                                <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 22:24:48.581336 main.go:193: Loaded spawidget.html 
2022/11/22 22:24:48.581379 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 22:24:48.581412 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 22:24:48.583708 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fas fa-align-left"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/22 22:24:48.586773 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 22:24:48.586805 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 22:24:48.586839 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/22 22:24:48.588832 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 22:24:48.591229 main.go:193: Loaded footer.html 
2022/11/22 22:24:48.591272 main.go:171: Persisting HTML Template footer.html
2022/11/22 22:24:48.591310 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 22:24:48.593695 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 22:24:48.597590 main.go:193: Loaded events.html 
2022/11/22 22:24:48.597624 main.go:171: Persisting HTML Template events.html
2022/11/22 22:24:48.597660 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) events]
2022/11/22 22:24:48.599702 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:24:48.603441 main.go:193: Loaded header.html 
2022/11/22 22:24:48.603473 main.go:171: Persisting HTML Template header.html
2022/11/22 22:24:48.603506 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/22 22:24:48.605547 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/22 22:24:48.609284 main.go:193: Loaded pixpatient.html 
2022/11/22 22:24:48.609318 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 22:24:48.609355 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 22:24:48.611375 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 22:24:48.614890 main.go:193: Loaded horizontalline.html 
2022/11/22 22:24:48.614924 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 22:24:48.614958 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 22:24:48.617248 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 22:24:48.619677 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 22:24:48.619716 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 22:24:48.619750 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 22:24:48.621773 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 22:24:48.623871 main.go:193: Loaded workflow.html 
2022/11/22 22:24:48.623912 main.go:171: Persisting HTML Template workflow.html
2022/11/22 22:24:48.623947 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 22:24:48.626538 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:24:48.628975 main.go:193: Loaded wfconfig.html 
2022/11/22 22:24:48.629011 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 22:24:48.629047 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/22 22:24:48.631192 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:24:48.633819 main.go:193: Loaded timelinewidget.html 
2022/11/22 22:24:48.633860 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 22:24:48.633894 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 22:24:48.636201 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/22 22:28:07.550676 tukutil.go:140: -----------------------------------------------------------------------------------
2022/11/22 22:28:07.551836 main.go:199: Loaded log file - ./logs/2022/1122.log
2022/11/22 22:28:07.551900 tukdbint.go:235: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/22 22:28:07.553659 main.go:193: Loaded subscribe.xml 
2022/11/22 22:28:07.553711 main.go:153: Persisting XML Template subscribe.xml
2022/11/22 22:28:07.553869 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/22 22:28:07.566893 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/22 22:28:07.575332 main.go:193: Loaded brokerack.xml 
2022/11/22 22:28:07.575386 main.go:153: Persisting XML Template brokerack.xml
2022/11/22 22:28:07.575439 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) brokerack]
2022/11/22 22:28:07.578171 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/22 22:28:07.581178 main.go:193: Loaded cancel.xml 
2022/11/22 22:28:07.581223 main.go:153: Persisting XML Template cancel.xml
2022/11/22 22:28:07.581265 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/22 22:28:07.583671 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}} cancel %!s(bool=true)]
2022/11/22 22:28:07.587221 main.go:193: Loaded stsrst.xml 
2022/11/22 22:28:07.587252 main.go:153: Persisting XML Template stsrst.xml
2022/11/22 22:28:07.587287 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/22 22:28:07.589618 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/22 22:28:07.593514 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/22 22:28:07.593547 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/22 22:28:07.593592 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/22 22:28:07.595899 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/22 22:28:07.599762 main.go:193: Loaded xdsodd.xml 
2022/11/22 22:28:07.599797 main.go:153: Persisting XML Template xdsodd.xml
2022/11/22 22:28:07.599861 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/22 22:28:07.601952 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/22 22:28:07.605851 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/22 22:28:07.605886 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/22 22:28:07.605918 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/22 22:28:07.608216 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/22 22:28:07.612179 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/22 22:28:07.612223 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/22 22:28:07.612287 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/22 22:28:07.614850 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{.CompletionTime}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/22 22:28:07.618767 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/22 22:28:07.618806 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/22 22:28:07.618849 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/22 22:28:07.621091 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> 
            {{if eq .ActualStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .ActualStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> 
            {{if eq .PreviousStatus "CREATED"}}
                <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i></p>
            {{end}}
            {{if eq .PreviousStatus "READY"}}
                <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "IN_PROGRESS"}}
                <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i></p>
            {{end}} 
            {{if eq .PreviousStatus "COMPLETE"}}
                <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i></p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/22 22:28:07.624742 main.go:193: Loaded pathwayoptions.html 
2022/11/22 22:28:07.624781 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/22 22:28:07.624822 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/22 22:28:07.627121 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/22 22:28:07.631067 main.go:193: Loaded pixmpatient.html 
2022/11/22 22:28:07.631107 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/22 22:28:07.631148 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/22 22:28:07.634457 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/22 22:28:07.637076 main.go:193: Loaded subscriptions.html 
2022/11/22 22:28:07.637115 main.go:171: Persisting HTML Template subscriptions.html
2022/11/22 22:28:07.637155 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/22 22:28:07.640163 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/22 22:28:07.644050 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/22 22:28:07.644094 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/22 22:28:07.644136 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/22 22:28:07.646868 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
    <label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> 
    {{if eq .TaskData.TaskDetails.Status "CREATED"}}
        <i class="fa fa-bars" aria-hidden="true"></i>
        <p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
        <i class="fa fa-hourglass-start" aria-hidden="true"></i>
        <p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
        <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
        <p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
    {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
        <i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
        <p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
    {{end}} 
{{end}}]
2022/11/22 22:28:07.650947 main.go:193: Loaded workflowtasks.html 
2022/11/22 22:28:07.650987 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/22 22:28:07.651028 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/22 22:28:07.653714 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
            {{$overdue := $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: darkblue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: darkblue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="overdue">Overdue</label>
                        {{if $overdue}}
                        <p style="color: red;" id="overdue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="completeby">Complete By</label> 
                        {{if $overdue}}
                        <p style="color: red;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        Completed On
                        {{else}}
                        Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                            <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                            <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if $event.IsBrokerExpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <a href="{{$url}}?act=events&task=create&pathway={{$event.Pathway}}&taskid={{$t.TaskData.TaskDetails.ID}}&vers={{$event.Vers}}&topic=addComment&expression={{.Part.AttachmentInfo.Name}}&notes=Demo simulation of DSUB Broker Notification&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}" target="workflowItem" onclick="togglesidebar()"><label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label></a>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes" placeholder={{$event.TaskNotes $t.TaskData.TaskDetails.ID}}></textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/22 22:28:07.657674 main.go:193: Loaded dashboardwidget.html 
2022/11/22 22:28:07.657708 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/22 22:28:07.657771 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/22 22:28:07.660299 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=open&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Open</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=closed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Closed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=met&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Met</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=missed&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Target Missed</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&status=escalated&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text ">Require Escalation</p>
                </a>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/22 22:28:07.664191 main.go:193: Loaded snip_workflow_header.html 
2022/11/22 22:28:07.664225 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/22 22:28:07.664258 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/22 22:28:07.666848 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{.PrettyTime .LastUpdateTime}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{.PrettyTime .CompletionTime}}</p>
            </div>
            <div class="col-sm-1">
                {{if .IsWorkflowOverdue}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> YES</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> NO</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{.WorkflowTimeRemaining}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/22 22:28:07.670759 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/22 22:28:07.670799 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/22 22:28:07.670840 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/22 22:28:07.673170 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/22 22:28:07.676958 main.go:193: Loaded workflows.html 
2022/11/22 22:28:07.677000 main.go:171: Persisting HTML Template workflows.html
2022/11/22 22:28:07.677040 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/22 22:28:07.679608 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{len .XDWDocuments}} {{.Status}} {{.GetMappedId $pw}}{{$nhsid}} Workflows</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:darkblue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:darkblue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:darkblue" for="created">Opened</label>
            <p id="created" name="created">{{$event.PrettyTime .Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:darkblue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="status">Status</label>
            <p id="status" name="status">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:darkblue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
        {{if eq .Status "CLOSED"}}
        <div class="col-sm-2">
            <label style="color:darkblue" for="duration">Workflow Duration</label>
            <p id="version" name="version">{{$event.ElapsedTime .}}</p></a>
        </div>
        {{end}}
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/22 22:28:07.684177 main.go:193: Loaded adminspawidget.html 
2022/11/22 22:28:07.684225 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/22 22:28:07.684267 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/22 22:28:07.686801 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Restart Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#updatesmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Update</a>
                    <ul class="collapse list-unstyled" id="updatesmenu">
                        <li>
                            <a href="{{$url}}?act=admin&task=initsrvcs&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Service Configs</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=inittmplts&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">Templates</a>
                        </li>
                        <li>
                            <a href="{{$url}}?act=admin&task=initxdws&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" onclick="togglesidebar()">XDW Configs</a>
                        </li>
                    </ul>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure</a>
                    <ul class="collapse list-unstyled" id="configsmenu">
                        <li>
                            <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Services</a>
                            <ul class="collapse list-unstyled" id="configsrvcsmenu">
                                {{range .EventServices.ServiceConfigs}}
                                <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Messages</a>
                            <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                                {{range .EventServices.XMLMessages}}
                                <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">HTML</a>
                            <ul class="collapse list-unstyled" id="configwidgetmenu">
                                {{range .EventServices.HTMLWidgets}}
                                <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Pathways</a>
                            <ul class="collapse list-unstyled" id="configxdwmenu">
                                {{range .EventServices.WorkflowDefinitions}}
                                <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                        <li>
                            <a href="#initsrvcs" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDS Meta</a>
                            <ul class="collapse list-unstyled" id="initsrvcs">
                                {{range .EventServices.WorkflowXDWMeta}}
                                <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                                {{end}}
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget]
2022/11/22 22:28:07.690846 main.go:193: Loaded spawidget.html 
2022/11/22 22:28:07.690880 main.go:171: Persisting HTML Template spawidget.html
2022/11/22 22:28:07.690913 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/22 22:28:07.693287 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:= .NHSId}}
{{$usr:= .EventServices.EventService.User}}
{{$org:= .EventServices.EventService.Org}}
{{$role:= .EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Consumer</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                 <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">XDW Creator</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                            <li><a href="{{$url}}?act=XDW_Creator&task=getworkflow&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">XDW Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fas fa-align-left"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/22 22:28:07.697630 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/22 22:28:07.697665 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/22 22:28:07.697696 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_elapsedtime]
2022/11/22 22:28:07.700086 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{.Elapsedtime}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{.Elapsedtime}}</p>
{{end}} {{end}}]
2022/11/22 22:28:07.703704 main.go:193: Loaded footer.html 
2022/11/22 22:28:07.703739 main.go:171: Persisting HTML Template footer.html
2022/11/22 22:28:07.703772 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/22 22:28:07.706448 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 10px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 45%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/22 22:28:07.710967 main.go:193: Loaded events.html 
2022/11/22 22:28:07.711001 main.go:171: Persisting HTML Template events.html
2022/11/22 22:28:07.711043 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/22 22:28:07.713965 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{template "header" .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.Pathway}} {{len .DBEvents}} Events</h3>
        </div>
    </div>
    {{range .DBEvents}}
        {{if ne .Id 0}}
        <div class="row">
                <div class="col-sm-2">
                <label style="color:darkblue" for="pathway">Pathway</label>
                <p id="pathway" name="pathway">{{.Pathway}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="expression">Event</label>
                <p id="expression" name="expression">{{.Expression}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="topic">Task</label>
                <p id="topic" name="topic">{{.TaskId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="authors">Created By</label>
                <p id="authors" name="authors">{{.Authors}}</p>
            </div>
            <div class="col-sm-1">
                <label style="color:darkblue" for="nhs">For Patient</label>
                <p id="nhs" name="nhs">{{.NhsId}}</p>
            </div>
            <div class="col-sm-2">
                <label style="color:darkblue" for="created">Created</label>
                <p id="created" name="created">{{.Creationtime}}</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <label style="color:darkblue" for="notes">Notes</label>
                <textarea disabled id="notes" name="notes">{{.Comments}}</textarea>
            </div>
        </div>
        {{template "horizontalline"}}
        {{end}}
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:28:07.718055 main.go:193: Loaded header.html 
2022/11/22 22:28:07.718094 main.go:171: Persisting HTML Template header.html
2022/11/22 22:28:07.718152 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/22 22:28:07.720868 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/22 22:28:07.724832 main.go:193: Loaded pixpatient.html 
2022/11/22 22:28:07.724877 main.go:171: Persisting HTML Template pixpatient.html
2022/11/22 22:28:07.724918 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/22 22:28:07.727660 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/22 22:28:07.731847 main.go:193: Loaded horizontalline.html 
2022/11/22 22:28:07.731880 main.go:171: Persisting HTML Template horizontalline.html
2022/11/22 22:28:07.731910 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/22 22:28:07.734194 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/22 22:28:07.738060 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/22 22:28:07.738102 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/22 22:28:07.738143 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/22 22:28:07.740680 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if .IsWorkflowOverdue}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/22 22:28:07.744030 main.go:193: Loaded workflow.html 
2022/11/22 22:28:07.744073 main.go:171: Persisting HTML Template workflow.html
2022/11/22 22:28:07.744114 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/22 22:28:07.746509 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}
{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</body>
{{template "footer"}}
{{end}}]
2022/11/22 22:28:07.750194 main.go:193: Loaded wfconfig.html 
2022/11/22 22:28:07.750236 main.go:171: Persisting HTML Template wfconfig.html
2022/11/22 22:28:07.750278 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/22 22:28:07.753833 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "wfconfig"}}
{{template "header"}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{if eq .Task "get"}}
         Service 
        {{end}} 
        {{if eq .Task "getxdw"}} 
         Pathway 
        {{end}} 
        {{if eq .Task "getmeta"}}
         XDS Meta 
        {{end}}
        {{if eq .Task "gethtml"}}
         HTML Widget 
        {{end}} 
        {{if eq .Task "getworkflow"}}
         Workflow  
        {{end}} 
        Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}">
            {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set">
            {{end}}
            {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> 
            {{end}}
            {{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> 
            {{end}}
            {{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> 
            {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        {{if ne .Task "getworkflow"}}
            <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{else}}
            <textarea disabled type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        {{end}}
        <p> </p>
        {{if ne .Task "getworkflow"}}
            <button type="submit" class="btn btn-primary sm-2">Update</button>
        {{else}}
            <button disabled type="submit" class="btn btn-primary sm-2">Update</button>
        {{end}}
    </form>
</div>
</body>
{{template "footer"}}
{{end}} wfconfig]
2022/11/22 22:28:07.758051 main.go:193: Loaded timelinewidget.html 
2022/11/22 22:28:07.758095 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/22 22:28:07.758128 tukdbint.go:922: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/22 22:28:07.760323 tukdbint.go:922: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <h6 class="timeline-title" style="color:darkgreen">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{else}}
                                    <h6 class="timeline-title" style="color:darkblue">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h6>
                                {{end}}
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <label style="color:darkblue">Type</label>
                                        <p>{{$t.TaskData.TaskDetails.TaskType}}</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <label style="color:darkblue">Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                    <div class="col-sm-2">
                                        <label style="color:darkblue">Status</label>
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <p style="color:darkgreen">{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{else}}
                                            <p>{{$t.TaskData.TaskDetails.Status}}</p>
                                        {{end}}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Started</label>
                                        <p>{{$event.PrettyTime $t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label style="color:darkblue">Completed On</label>
                                        {{else}}
                                            <label style="color:darkblue">Updated</label>
                                        {{end}}
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                            <p style="color:darkorange">{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{else}}
                                            <p>{{$event.PrettyTime $t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                        {{end}}
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Complete By</label>
                                        <p>{{$event.TaskCompleteByTimeString $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <label style="color:darkblue">Duration</label>
                                        <p>{{$event.TaskDuration $t.TaskData.TaskDetails.ID}}</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <label style="color:darkblue">Overdue</label>
                                        {{if $event.IsTaskOverdue $t.TaskData.TaskDetails.ID}}
                                        <p style="color:darkorange">Yes</p>
                                        {{else}}
                                        <p style="color:darkgreen">No</p>
                                        {{end}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
