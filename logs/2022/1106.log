2022/11/06 11:07:09.531924 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 11:07:09.532003 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 11:07:09.532037 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 11:07:09.535359 main.go:193: Loaded subscribe.xml 
2022/11/06 11:07:09.535403 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 11:07:09.535520 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 11:07:09.558334 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe %!s(bool=true)]
2022/11/06 11:07:09.583268 main.go:193: Loaded brokerack.xml 
2022/11/06 11:07:09.583363 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 11:07:09.583559 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 11:07:09.586711 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/06 11:07:09.590830 main.go:193: Loaded cancel.xml 
2022/11/06 11:07:09.590871 main.go:153: Persisting XML Template cancel.xml
2022/11/06 11:07:09.590911 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 11:07:09.595485 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 11:07:09.600029 main.go:193: Loaded stsrst.xml 
2022/11/06 11:07:09.600063 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 11:07:09.600100 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/06 11:07:09.602743 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 11:07:09.606617 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 11:07:09.606646 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 11:07:09.606684 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 11:07:09.609904 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/06 11:07:09.615152 main.go:193: Loaded xdsodd.xml 
2022/11/06 11:07:09.615189 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 11:07:09.615228 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 11:07:09.617892 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/06 11:07:09.625497 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 11:07:09.625526 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 11:07:09.625571 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/06 11:07:09.627907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 11:07:09.631849 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 11:07:09.631888 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 11:07:09.631938 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 11:07:09.636143 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 11:07:09.639468 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 11:07:09.639498 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 11:07:09.639536 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 11:07:09.641898 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 11:07:09.645962 main.go:193: Loaded pathwayoptions.html 
2022/11/06 11:07:09.645992 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 11:07:09.646034 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 11:07:09.651682 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 11:07:09.655134 main.go:193: Loaded pixmpatient.html 
2022/11/06 11:07:09.655160 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 11:07:09.655187 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 11:07:09.657491 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 11:07:09.661548 main.go:193: Loaded subscriptions.html 
2022/11/06 11:07:09.661580 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 11:07:09.661614 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 11:07:09.664095 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 11:07:09.667838 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 11:07:09.667874 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 11:07:09.667921 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 11:07:09.673077 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/06 11:07:09.678847 main.go:193: Loaded workflowtasks.html 
2022/11/06 11:07:09.678882 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 11:07:09.678916 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 11:07:09.684149 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 11:07:09.689498 main.go:193: Loaded dashboardwidget.html 
2022/11/06 11:07:09.689533 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 11:07:09.689567 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 11:07:09.694016 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 11:07:09.698068 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 11:07:09.698102 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 11:07:09.698137 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 11:07:09.702890 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 11:07:09.706872 main.go:193: Loaded notificationwidget.html 
2022/11/06 11:07:09.706910 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 11:07:09.706945 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 11:07:09.709488 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 11:07:09.711754 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 11:07:09.711785 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 11:07:09.711813 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/06 11:07:09.714765 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 11:07:09.717330 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 11:07:09.717381 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 11:07:09.717420 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 11:07:09.718589 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 11:07:09.720868 main.go:193: Loaded workflows.html 
2022/11/06 11:07:09.720898 main.go:171: Persisting HTML Template workflows.html
2022/11/06 11:07:09.720926 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 11:07:09.723062 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 11:07:09.728512 main.go:193: Loaded adminspawidget.html 
2022/11/06 11:07:09.728544 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 11:07:09.728578 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/06 11:07:09.732038 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 11:07:09.737804 main.go:193: Loaded spawidget.html 
2022/11/06 11:07:09.737844 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 11:07:09.737887 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 11:07:09.742006 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 11:07:09.746712 main.go:193: Loaded newworkflow.html 
2022/11/06 11:07:09.746763 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 11:07:09.746799 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) newworkflow]
2022/11/06 11:07:09.749584 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 11:07:09.753292 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 11:07:09.753325 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 11:07:09.753367 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 11:07:09.755760 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/06 11:07:09.759505 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 11:07:09.759536 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 11:07:09.759565 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event]
2022/11/06 11:07:09.763146 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/06 11:07:09.767090 main.go:193: Loaded footer.html 
2022/11/06 11:07:09.767121 main.go:171: Persisting HTML Template footer.html
2022/11/06 11:07:09.767171 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 11:07:09.771022 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 11:07:09.777927 main.go:193: Loaded events.html 
2022/11/06 11:07:09.777956 main.go:171: Persisting HTML Template events.html
2022/11/06 11:07:09.777985 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 11:07:09.780720 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 11:07:09.789254 main.go:193: Loaded header.html 
2022/11/06 11:07:09.789281 main.go:171: Persisting HTML Template header.html
2022/11/06 11:07:09.789309 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 11:07:09.791540 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/06 11:07:09.796201 main.go:193: Loaded pixpatient.html 
2022/11/06 11:07:09.796234 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 11:07:09.796264 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 11:07:09.800376 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 11:07:09.803072 main.go:193: Loaded horizontalline.html 
2022/11/06 11:07:09.803103 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 11:07:09.803130 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 11:07:09.804932 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 11:07:09.808395 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 11:07:09.808424 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 11:07:09.808461 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 11:07:09.810544 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 11:07:09.813094 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 11:07:09.813125 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 11:07:09.813159 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 11:07:09.815237 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 11:07:09.817521 main.go:193: Loaded workflow.html 
2022/11/06 11:07:09.817549 main.go:171: Persisting HTML Template workflow.html
2022/11/06 11:07:09.817577 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 11:07:09.819500 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/06 11:07:09.823612 main.go:193: Loaded usereventform.html 
2022/11/06 11:07:09.823644 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 11:07:09.823672 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 11:07:09.825352 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 11:07:09.827508 main.go:193: Loaded wfconfig.html 
2022/11/06 11:07:09.827537 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 11:07:09.827582 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 11:07:09.828701 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 11:07:09.837177 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 11:07:09.837203 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 11:07:09.837232 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 11:07:09.839166 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 11:07:09.841544 main.go:193: Loaded timelinewidget.html 
2022/11/06 11:07:09.841570 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 11:07:09.841597 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 11:07:09.843515 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 11:07:09.845417 tukxdw.go:506: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/06 11:07:09.845476 tukxdw.go:517: Obtaining XDS Meta for Pathway pathalert
2022/11/06 11:07:09.845504 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/06 11:07:09.847380 tukxdw.go:525: Loaded XDS Meta for Pathway pathalert
2022/11/06 11:07:09.847430 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 11:07:09.848302 tukxdw.go:532: Loaded XDW definition for Pathway pathalert
2022/11/06 11:07:09.848336 tukxdw.go:549: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/06 11:07:09.848372 tukdbint.go:919: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/06 11:07:09.854635 tukxdw.go:555: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/06 11:07:09.854703 tukdbint.go:919: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/06 11:07:09.858993 tukdbint.go:919: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/06 11:07:09.862304 tukdbint.go:919: Created Prepared Statement INSERT INTO events (taskid, classcode, facilitycode, repositoryuniqueid, user, pathway, org, topic, docname, practicecode, expression, authors, nhsid, formatcode, xdspid, xdsdocentryuid, comments, version, confcode, role) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [%!s(int=1) Workflow Management path ODD pbradley pathalert lth $XDSDocumentEntryTypeCode PATHALERT-9999999468 Path-PS1 Path_Anomaly_Identified Clinical pbradley 9999999468 urn:ihe:iti:xdw:2011:workflowDoc NA urn:ihe:iti:xdw:2013:workflowInstanceId User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) N Clinical]
2022/11/06 11:07:09.864522 tukxdw.go:914: Created Event ID :  = 188
2022/11/06 11:07:09.864559 tukxdw.go:598: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/06 11:07:09.864597 tukxdw.go:618: Created Input Part - Path_Anomaly_Identified
2022/11/06 11:07:09.864612 tukxdw.go:628: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/06 11:07:09.864634 tukxdw.go:638: Set Workflow Task Event 1 created status to complete
2022/11/06 11:07:09.864707 tukdbint.go:919: Created Prepared Statement INSERT INTO events (formatcode, xdsdocentryuid, user, version, authors, repositoryuniqueid, nhsid, topic, pathway, docname, classcode, confcode, facilitycode, expression, comments, practicecode, xdspid, org, role, taskid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId pbradley %!s(int=0) Clinical pbradley ODD 9999999468 $XDSDocumentEntryTypeCode pathalert PATHALERT-9999999468 Workflow Management N path Path_Anomily_Claimed User pbradley from lth in the role of Clinical created new pathalert Workflow Path-PS1 NA lth Clinical %!s(int=2)]
2022/11/06 11:07:09.867462 tukxdw.go:914: Created Event ID :  = 189
2022/11/06 11:07:09.867492 tukxdw.go:598: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/06 11:07:09.867506 tukxdw.go:618: Created Input Part - Path_Anomaly_Identified
2022/11/06 11:07:09.867537 tukxdw.go:618: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/06 11:07:09.867549 tukxdw.go:628: Created Output Part - Path_Anomaly_Claimed
2022/11/06 11:07:09.867560 tukxdw.go:638: Set Workflow Task Event 2 created status to complete
2022/11/06 11:07:09.867842 tukxdw.go:649: pbradley Created new PATHALERT Workflow for Patient 9999999468
2022/11/06 11:07:09.868015 tukdbint.go:919: Created Prepared Statement INSERT INTO workflows (pathway, nhsid, xdw_key, xdw_uid, version, published, xdw_doc, xdw_def, status) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211110709859.53107 %!s(int=0) %!s(bool=false) <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211110709859.53107" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-06 11:07:09.86219 +0000 GMT"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211110709859.53107^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-06 11:07:09.86219 +0000 GMT</eventTime>
      <eventType>created</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>pbradley Clinical</author>
      <previousStatus></previousStatus>
      <actualStatus>OPEN</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 11:07:09.86219 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 11:07:09.86219 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>188</id>
          <eventTime>2022-11-06 11:07:09.86219 +0000 GMT</eventTime>
          <identifier>1</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 11:07:09.86219 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 11:07:09.86219 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>189</id>
          <eventTime>2022-11-06 11:07:09.86219 +0000 GMT</eventTime>
          <identifier>2</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} OPEN]
2022/11/06 11:07:09.869585 tukxdw.go:881: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/06 12:04:46.460938 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 12:04:46.462717 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 12:04:46.462789 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 12:04:46.463622 main.go:193: Loaded subscribe.xml 
2022/11/06 12:04:46.463673 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 12:04:46.463811 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/06 12:04:46.515769 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 12:04:46.522011 main.go:193: Loaded brokerack.xml 
2022/11/06 12:04:46.522043 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 12:04:46.522077 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 12:04:46.527757 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 12:04:46.530522 main.go:193: Loaded cancel.xml 
2022/11/06 12:04:46.530551 main.go:153: Persisting XML Template cancel.xml
2022/11/06 12:04:46.530580 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 12:04:46.534978 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 12:04:46.536774 main.go:193: Loaded stsrst.xml 
2022/11/06 12:04:46.536805 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 12:04:46.536840 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 12:04:46.540373 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 12:04:46.545130 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 12:04:46.545162 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 12:04:46.545198 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 12:04:46.548758 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 12:04:46.553200 main.go:193: Loaded xdsodd.xml 
2022/11/06 12:04:46.553230 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 12:04:46.553259 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 12:04:46.555533 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 12:04:46.562550 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 12:04:46.562581 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 12:04:46.562609 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 12:04:46.566178 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 12:04:46.568177 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 12:04:46.568208 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 12:04:46.568242 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 12:04:46.570230 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 12:04:46.573761 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 12:04:46.573789 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 12:04:46.573816 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 12:04:46.575761 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 12:04:46.580352 main.go:193: Loaded pathwayoptions.html 
2022/11/06 12:04:46.580385 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 12:04:46.580414 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 12:04:46.582467 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 12:04:46.584729 main.go:193: Loaded pixmpatient.html 
2022/11/06 12:04:46.584758 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 12:04:46.584789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 12:04:46.587631 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 12:04:46.591053 main.go:193: Loaded subscriptions.html 
2022/11/06 12:04:46.591079 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 12:04:46.591107 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 12:04:46.593960 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 12:04:46.596334 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 12:04:46.596366 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 12:04:46.596392 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 12:04:46.598194 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/06 12:04:46.600473 main.go:193: Loaded workflowtasks.html 
2022/11/06 12:04:46.600503 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 12:04:46.600541 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 12:04:46.602816 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 12:04:46.615772 main.go:193: Loaded dashboardwidget.html 
2022/11/06 12:04:46.615815 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 12:04:46.615856 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 12:04:46.618837 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget]
2022/11/06 12:04:46.624808 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 12:04:46.624844 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 12:04:46.624878 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 12:04:46.629055 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/06 12:04:46.631395 main.go:193: Loaded notificationwidget.html 
2022/11/06 12:04:46.631432 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 12:04:46.631463 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 12:04:46.636575 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/06 12:04:46.642085 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 12:04:46.642117 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 12:04:46.642151 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 12:04:46.644818 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/06 12:04:46.648618 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 12:04:46.648656 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 12:04:46.648704 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/06 12:04:46.650302 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 12:04:46.658140 main.go:193: Loaded workflows.html 
2022/11/06 12:04:46.658177 main.go:171: Persisting HTML Template workflows.html
2022/11/06 12:04:46.658247 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 12:04:46.662120 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 12:04:46.665782 main.go:193: Loaded adminspawidget.html 
2022/11/06 12:04:46.665810 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 12:04:46.665837 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 12:04:46.671949 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 12:04:46.679265 main.go:193: Loaded spawidget.html 
2022/11/06 12:04:46.679305 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 12:04:46.679339 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 12:04:46.682113 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 12:04:46.686957 main.go:193: Loaded newworkflow.html 
2022/11/06 12:04:46.686985 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 12:04:46.687013 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 12:04:46.688553 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 12:04:46.692755 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 12:04:46.692782 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 12:04:46.692810 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 12:04:46.695146 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 12:04:46.702605 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 12:04:46.702631 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 12:04:46.702658 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 12:04:46.707634 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event %!s(bool=false)]
2022/11/06 12:04:46.710063 main.go:193: Loaded footer.html 
2022/11/06 12:04:46.710101 main.go:171: Persisting HTML Template footer.html
2022/11/06 12:04:46.710142 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 12:04:46.713854 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/06 12:04:46.718524 main.go:193: Loaded events.html 
2022/11/06 12:04:46.718554 main.go:171: Persisting HTML Template events.html
2022/11/06 12:04:46.718586 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 12:04:46.720674 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 12:04:46.723428 main.go:193: Loaded header.html 
2022/11/06 12:04:46.723458 main.go:171: Persisting HTML Template header.html
2022/11/06 12:04:46.723495 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 12:04:46.725020 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 12:04:46.727568 main.go:193: Loaded pixpatient.html 
2022/11/06 12:04:46.727599 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 12:04:46.727627 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 12:04:46.731495 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 12:04:46.733915 main.go:193: Loaded horizontalline.html 
2022/11/06 12:04:46.733943 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 12:04:46.733968 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 12:04:46.735881 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/06 12:04:46.737962 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 12:04:46.737990 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 12:04:46.738044 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 12:04:46.740841 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/06 12:04:46.742888 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 12:04:46.742917 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 12:04:46.742944 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 12:04:46.744952 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 12:04:46.747310 main.go:193: Loaded workflow.html 
2022/11/06 12:04:46.747338 main.go:171: Persisting HTML Template workflow.html
2022/11/06 12:04:46.747364 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 12:04:46.750682 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 12:04:46.752839 main.go:193: Loaded usereventform.html 
2022/11/06 12:04:46.752872 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 12:04:46.752908 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 12:04:46.754922 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 12:04:46.757163 main.go:193: Loaded wfconfig.html 
2022/11/06 12:04:46.757194 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 12:04:46.757220 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 12:04:46.760592 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 12:04:46.762355 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 12:04:46.762384 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 12:04:46.762419 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 12:04:46.765615 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 12:04:46.768080 main.go:193: Loaded timelinewidget.html 
2022/11/06 12:04:46.768107 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 12:04:46.768133 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) timelinewidget]
2022/11/06 12:04:46.769256 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 12:26:37.679767 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 12:26:37.681269 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 12:26:37.681342 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 12:26:37.688987 main.go:193: Loaded subscribe.xml 
2022/11/06 12:26:37.689031 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 12:26:37.689163 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 12:26:37.712816 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 12:26:37.723274 main.go:193: Loaded brokerack.xml 
2022/11/06 12:26:37.723318 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 12:26:37.723372 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 12:26:37.725608 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 12:26:37.728466 main.go:193: Loaded cancel.xml 
2022/11/06 12:26:37.728502 main.go:153: Persisting XML Template cancel.xml
2022/11/06 12:26:37.728534 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 12:26:37.731265 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 12:26:37.737905 main.go:193: Loaded stsrst.xml 
2022/11/06 12:26:37.737941 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 12:26:37.737974 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 12:26:37.739660 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst]
2022/11/06 12:26:37.742873 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 12:26:37.742921 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 12:26:37.742970 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 12:26:37.744405 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 12:26:37.747476 main.go:193: Loaded xdsodd.xml 
2022/11/06 12:26:37.747515 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 12:26:37.747548 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 12:26:37.755637 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd %!s(bool=true)]
2022/11/06 12:26:37.764716 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 12:26:37.764747 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 12:26:37.764777 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/06 12:26:37.769061 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/06 12:26:37.772376 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 12:26:37.772405 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 12:26:37.772443 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 12:26:37.774599 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 12:26:37.778227 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 12:26:37.778259 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 12:26:37.778297 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/06 12:26:37.782485 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 12:26:37.787592 main.go:193: Loaded pathwayoptions.html 
2022/11/06 12:26:37.787626 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 12:26:37.787654 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/06 12:26:37.789710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 12:26:37.791936 main.go:193: Loaded pixmpatient.html 
2022/11/06 12:26:37.791970 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 12:26:37.791998 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 12:26:37.796073 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 12:26:37.803055 main.go:193: Loaded subscriptions.html 
2022/11/06 12:26:37.803091 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 12:26:37.803120 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/06 12:26:37.805281 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 12:26:37.809364 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 12:26:37.809397 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 12:26:37.809427 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 12:26:37.813110 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/06 12:26:37.819757 main.go:193: Loaded workflowtasks.html 
2022/11/06 12:26:37.819795 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 12:26:37.819833 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 12:26:37.826192 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 12:26:37.834817 main.go:193: Loaded dashboardwidget.html 
2022/11/06 12:26:37.834851 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 12:26:37.834880 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 12:26:37.837415 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/06 12:26:37.842817 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 12:26:37.842844 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 12:26:37.842871 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 12:26:37.852120 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 12:26:37.856205 main.go:193: Loaded notificationwidget.html 
2022/11/06 12:26:37.856234 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 12:26:37.856262 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 12:26:37.861822 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/06 12:26:37.871786 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 12:26:37.871822 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 12:26:37.871859 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 12:26:37.876762 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient]
2022/11/06 12:26:37.881663 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 12:26:37.881695 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 12:26:37.881728 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/06 12:26:37.885351 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 12:26:37.902645 main.go:193: Loaded workflows.html 
2022/11/06 12:26:37.902748 main.go:171: Persisting HTML Template workflows.html
2022/11/06 12:26:37.902901 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 12:26:37.905159 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 12:26:37.909041 main.go:193: Loaded adminspawidget.html 
2022/11/06 12:26:37.909077 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 12:26:37.909108 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 12:26:37.911954 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 12:26:37.921569 main.go:193: Loaded spawidget.html 
2022/11/06 12:26:37.921602 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 12:26:37.921631 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 12:26:37.924773 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 12:26:37.955423 main.go:193: Loaded newworkflow.html 
2022/11/06 12:26:37.955461 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 12:26:37.955492 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 12:26:37.958066 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 12:26:37.962620 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 12:26:37.962648 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 12:26:37.962676 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 12:26:37.968611 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/06 12:26:37.974706 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 12:26:37.974738 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 12:26:37.974766 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 12:26:37.976728 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/06 12:26:37.980165 main.go:193: Loaded footer.html 
2022/11/06 12:26:37.980204 main.go:171: Persisting HTML Template footer.html
2022/11/06 12:26:37.980241 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 12:26:37.985854 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 12:26:37.993561 main.go:193: Loaded events.html 
2022/11/06 12:26:37.993597 main.go:171: Persisting HTML Template events.html
2022/11/06 12:26:37.993642 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) events]
2022/11/06 12:26:37.997795 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 12:26:38.013292 main.go:193: Loaded header.html 
2022/11/06 12:26:38.013324 main.go:171: Persisting HTML Template header.html
2022/11/06 12:26:38.013353 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 12:26:38.018181 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 12:26:38.024760 main.go:193: Loaded pixpatient.html 
2022/11/06 12:26:38.024792 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 12:26:38.024823 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/06 12:26:38.026331 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 12:26:38.030823 main.go:193: Loaded horizontalline.html 
2022/11/06 12:26:38.030852 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 12:26:38.030881 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 12:26:38.036244 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 12:26:38.042187 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 12:26:38.042221 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 12:26:38.042267 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 12:26:38.044961 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events %!s(bool=false)]
2022/11/06 12:26:38.047238 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 12:26:38.047268 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 12:26:38.047297 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 12:26:38.051929 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 12:26:38.056591 main.go:193: Loaded workflow.html 
2022/11/06 12:26:38.056624 main.go:171: Persisting HTML Template workflow.html
2022/11/06 12:26:38.056653 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 12:26:38.061977 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 12:26:38.071718 main.go:193: Loaded usereventform.html 
2022/11/06 12:26:38.071766 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 12:26:38.071819 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 12:26:38.092525 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 12:26:38.104679 main.go:193: Loaded wfconfig.html 
2022/11/06 12:26:38.104709 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 12:26:38.104739 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 12:26:38.117050 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 12:26:38.128650 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 12:26:38.128678 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 12:26:38.128707 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 12:26:38.130710 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 12:26:38.134753 main.go:193: Loaded timelinewidget.html 
2022/11/06 12:26:38.134784 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 12:26:38.134820 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 12:26:38.137282 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 13:13:11.372549 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 13:13:11.373817 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 13:13:11.373881 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 13:13:11.375494 main.go:193: Loaded subscribe.xml 
2022/11/06 13:13:11.375538 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 13:13:11.375673 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) subscribe]
2022/11/06 13:13:11.417947 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 13:13:11.429806 main.go:193: Loaded brokerack.xml 
2022/11/06 13:13:11.429849 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 13:13:11.429911 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 13:13:11.435959 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 13:13:11.438276 main.go:193: Loaded cancel.xml 
2022/11/06 13:13:11.438312 main.go:153: Persisting XML Template cancel.xml
2022/11/06 13:13:11.438347 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 13:13:11.442481 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 13:13:11.444719 main.go:193: Loaded stsrst.xml 
2022/11/06 13:13:11.444753 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 13:13:11.444787 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 13:13:11.447083 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 13:13:11.450577 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 13:13:11.450615 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 13:13:11.450661 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 13:13:11.457343 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/06 13:13:11.461687 main.go:193: Loaded xdsodd.xml 
2022/11/06 13:13:11.461729 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 13:13:11.461772 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 13:13:11.466907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 13:13:11.476400 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 13:13:11.476429 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 13:13:11.476458 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/06 13:13:11.479215 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 13:13:11.483784 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 13:13:11.483818 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 13:13:11.483861 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 13:13:11.486301 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 13:13:11.488433 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 13:13:11.488462 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 13:13:11.488497 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 13:13:11.490376 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 13:13:11.494498 main.go:193: Loaded pathwayoptions.html 
2022/11/06 13:13:11.494524 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 13:13:11.494552 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 13:13:11.496694 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 13:13:11.500161 main.go:193: Loaded pixmpatient.html 
2022/11/06 13:13:11.500190 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 13:13:11.500219 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 13:13:11.502159 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 13:13:11.505476 main.go:193: Loaded subscriptions.html 
2022/11/06 13:13:11.505506 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 13:13:11.505533 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 13:13:11.507639 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 13:13:11.511088 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 13:13:11.511116 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 13:13:11.511144 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/06 13:13:11.516037 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/06 13:13:11.518324 main.go:193: Loaded workflowtasks.html 
2022/11/06 13:13:11.518354 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 13:13:11.518381 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflowtasks]
2022/11/06 13:13:11.521248 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 13:13:11.525812 main.go:193: Loaded dashboardwidget.html 
2022/11/06 13:13:11.525845 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 13:13:11.525874 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 13:13:11.530200 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 13:13:11.533941 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 13:13:11.533969 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 13:13:11.533997 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 13:13:11.537013 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 13:13:11.542854 main.go:193: Loaded notificationwidget.html 
2022/11/06 13:13:11.542883 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 13:13:11.542912 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 13:13:11.546904 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 13:13:11.549860 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 13:13:11.549884 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 13:13:11.549913 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 13:13:11.554117 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/06 13:13:11.557508 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 13:13:11.557537 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 13:13:11.557572 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 13:13:11.565618 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 13:13:11.569825 main.go:193: Loaded workflows.html 
2022/11/06 13:13:11.569876 main.go:171: Persisting HTML Template workflows.html
2022/11/06 13:13:11.569910 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 13:13:11.574403 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 13:13:11.580654 main.go:193: Loaded adminspawidget.html 
2022/11/06 13:13:11.580687 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 13:13:11.580718 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 13:13:11.582585 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 13:13:11.587823 main.go:193: Loaded spawidget.html 
2022/11/06 13:13:11.588091 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 13:13:11.588131 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 13:13:11.590422 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget]
2022/11/06 13:13:11.594929 main.go:193: Loaded newworkflow.html 
2022/11/06 13:13:11.594959 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 13:13:11.594987 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 13:13:11.600315 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 13:13:11.604260 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 13:13:11.604290 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 13:13:11.604322 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 13:13:11.607058 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 13:13:11.610971 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 13:13:11.611010 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 13:13:11.611098 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 13:13:11.616530 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/06 13:13:11.619366 main.go:193: Loaded footer.html 
2022/11/06 13:13:11.619398 main.go:171: Persisting HTML Template footer.html
2022/11/06 13:13:11.619428 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 13:13:11.621672 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 13:13:11.630971 main.go:193: Loaded events.html 
2022/11/06 13:13:11.631005 main.go:171: Persisting HTML Template events.html
2022/11/06 13:13:11.631059 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 13:13:11.633645 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events %!s(bool=false)]
2022/11/06 13:13:11.639175 main.go:193: Loaded header.html 
2022/11/06 13:13:11.639210 main.go:171: Persisting HTML Template header.html
2022/11/06 13:13:11.639250 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 13:13:11.641807 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 13:13:11.644662 main.go:193: Loaded pixpatient.html 
2022/11/06 13:13:11.644692 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 13:13:11.644719 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 13:13:11.647747 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 13:13:11.652052 main.go:193: Loaded horizontalline.html 
2022/11/06 13:13:11.652081 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 13:13:11.652109 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 13:13:11.654161 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/06 13:13:11.657348 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 13:13:11.657379 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 13:13:11.657476 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 13:13:11.659846 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 13:13:11.663779 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 13:13:11.663808 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 13:13:11.663834 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 13:13:11.665121 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 13:13:11.668490 main.go:193: Loaded workflow.html 
2022/11/06 13:13:11.668518 main.go:171: Persisting HTML Template workflow.html
2022/11/06 13:13:11.668544 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflow]
2022/11/06 13:13:11.670495 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 13:13:11.673640 main.go:193: Loaded usereventform.html 
2022/11/06 13:13:11.673671 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 13:13:11.673708 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 13:13:11.676866 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 13:13:11.685194 main.go:193: Loaded wfconfig.html 
2022/11/06 13:13:11.685223 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 13:13:11.685265 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 13:13:11.687889 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}} wfconfig %!s(bool=false)]
2022/11/06 13:13:11.691324 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 13:13:11.691350 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 13:13:11.691394 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 13:13:11.695172 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 13:13:11.699326 main.go:193: Loaded timelinewidget.html 
2022/11/06 13:13:11.699353 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 13:13:11.699380 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 13:13:11.701349 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 13:14:25.214230 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 13:14:25.215310 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 13:14:25.215379 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 13:14:25.215460 main.go:112: Processing XDW Config Files
2022/11/06 13:14:25.217590 main.go:193: Loaded pathalert_meta.json 
2022/11/06 13:14:25.217658 tukxdw.go:1324: Persisting Workflow XDS Meta
2022/11/06 13:14:25.217781 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE isxdsmeta= ? AND name= ? - Values [%!s(bool=true) pathalert_meta]
2022/11/06 13:14:25.229811 tukxdw.go:1384: Deleted Existing XDS Meta for Pathway pathalert
2022/11/06 13:14:25.229907 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert_meta %!s(bool=true) {
    "id": "pathalert_publish",
    "repositoryuniqueid": "",
    "registryoid": "",
    "languagecode": "en-GB",
    "docname": "Completed Pathology Alert Workflow",
    "docdesc": "Pathology Alert Workflow",
    "DocID": "",
    "Authorinstitution": "",
    "Authorperson": "",
    "classcode": "Workflow Management",
    "classcodescheme": "LPRES ClassCode",
    "classcodevalue": "Workflow Management",
    "typecode": "PathAlert_100",
    "typecodescheme": "TypeCode_LPRES_2018",
    "typecodevalue": "Patholgy Alert",
    "practicesettingcode": "Path-PS1",
    "practicesettingscheme": "PracticeSettingCode LPRES",
    "practicesettingvalue": "Path-PS1",
    "confcode": "N",
    "confcodescheme": "LPRES Confidentiality Codes",
    "confcodevalue": "Normal",
    "facilitycode": "path",
    "facilitycodescheme": "Healthcare Facility LPRES",
    "facilitycodevalue": "Pathology",
    "formatcode": "urn:ihe:iti:xdw:2011:workflowDoc",
    "formatcodescheme": "IHE",
    "formatcodevalue": "ITI XDW",
    "mimetype": "application/xml",
    "objecttype": "urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248"
}]
2022/11/06 13:14:25.237780 tukxdw.go:1389: Persisted Workflow XDS Meta for Pathway pathalert
2022/11/06 13:14:25.238284 main.go:193: Loaded pathalert_def.json 
2022/11/06 13:14:25.238325 tukxdw.go:1327: Registering Workflow Definition
2022/11/06 13:14:25.238749 tukdsub.go:187: Processing Cancel Subscriptions
2022/11/06 13:14:25.238796 tukdbint.go:919: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [pathalert]
2022/11/06 13:14:25.255775 tukxdw.go:1341: Cleaned Event Service Subscriptions for Pathway pathalert
2022/11/06 13:14:25.255915 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 13:14:25.258799 tukxdw.go:1400: Deleted Existing XDW Definition for Pathway pathalert
2022/11/06 13:14:25.258903 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert %!s(bool=false) {
    "ref": "pathalert",
    "name": "Pathology Anomaly Workflow",
    "confidentialitycode": "Normal",
    "startbytime": "hour(1)",
    "completebytime": "day(2)",
    "expirationtime": "day(3)",
    "completionBehavior": [{
        "completion": {
            "condition": "task(3)"
        }
    }],
    "tasks": [
        {   "id": "1",
            "tasktype": "NOTIFICATION",
            "name": "Lab_Report",
            "description": "Send Pathology Result Anomaly Alert for Claiming",
            "expirationtime": "hour(8)",
            "completebytime": "hour(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report)"
                }}
            ],
            "output": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }]
        },
        {   "id": "2",
            "tasktype": "Notification",
            "name": "Lab_Report_Claimed",
            "description": "Claim Pathology Result Anomaly",
            "expirationtime": "hour(8)",
            "completebytime": "hour(4)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report_Claimed)"
                }
            }],
            "input": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }],
            "output": [{
                "name": "Lab_Report_Claimed",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }]
        },
        {   "id": "3",
            "tasktype": "Task",
            "name": "Lab_Result",
            "description": "Publish Lab Result for Pathology Anomaly",
            "expirationtime": "day(3)",
            "completebytime": "day(2)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Result^^TypeCode_LPRES_2018)"
                }
            }],
            "input": [{
                "name": "Lab_Report_Claimed",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }],
            "output": [{
                "name": "Lab_Result^^TypeCode_LPRES_2018",
                "contenttype": "text/xml",
                "accesstype": "urn:ihe:iti:xdw:2011:XDSregistered"
            }]
        }
    ]
}]
2022/11/06 13:14:25.261591 tukxdw.go:1405: Persisted New XDW Definition for Pathway pathalert
2022/11/06 13:14:25.261635 tukxdw.go:1344: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/11/06 13:14:25.261655 tukxdw.go:1356: Checking Output Task Lab_Report
2022/11/06 13:14:25.261681 tukxdw.go:1361: Output Task Lab_Report does not require a dsub broker subscription
2022/11/06 13:14:25.261700 tukxdw.go:1347: Checking Input Task Lab_Report
2022/11/06 13:14:25.261716 tukxdw.go:1352: Input Task Lab_Report does not require a dsub broker subscription
2022/11/06 13:14:25.261733 tukxdw.go:1356: Checking Output Task Lab_Report_Claimed
2022/11/06 13:14:25.261749 tukxdw.go:1361: Output Task Lab_Report_Claimed does not require a dsub broker subscription
2022/11/06 13:14:25.261765 tukxdw.go:1347: Checking Input Task Lab_Report_Claimed
2022/11/06 13:14:25.261781 tukxdw.go:1352: Input Task Lab_Report_Claimed does not require a dsub broker subscription
2022/11/06 13:14:25.261797 tukxdw.go:1356: Checking Output Task Lab_Result^^TypeCode_LPRES_2018
2022/11/06 13:14:25.261838 tukxdw.go:1359: Task 3 Lab_Result task output Lab_Result^^TypeCode_LPRES_2018 included in potential DSUB Broker subscriptions
2022/11/06 13:14:25.261874 tukxdw.go:1366: Found 1 potential DSUB Broker Subscriptions - map[Lab_Result^^TypeCode_LPRES_2018:pathalert]
2022/11/06 13:14:25.261893 tukdsub.go:184: Processing Create Subscriptions
2022/11/06 13:14:25.261913 tukdsub.go:387: Checking for existing Subscriptions for Expression Lab_Result^^TypeCode_LPRES_2018
2022/11/06 13:14:25.261954 tukdbint.go:919: Created Prepared Statement SELECT * FROM subscriptions WHERE expression= ? AND pathway= ? AND topic= ? - Values [Lab_Result^^TypeCode_LPRES_2018 pathalert $XDSDocumentEntryTypeCode]
2022/11/06 13:14:25.263010 tukdsub.go:402: No Subscription for Pathway pathalert Topic $XDSDocumentEntryTypeCode Expression Lab_Result^^TypeCode_LPRES_2018 found
2022/11/06 13:14:25.263927 tukdsub.go:425: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/11/06 13:14:25.264043 tukhttp.go:215: SOAP Request Headers
2022/11/06 13:14:25.264125 tukutil.go:166: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/11/06 13:14:25.264735 tukhttp.go:217: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:a263866d-9827-406b-9c1c-b214c3b11507</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('Lab_Result^^TypeCode_LPRES_2018')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/11/06 13:14:26.292795 tukhttp.go:220: SOAP Response - Status Code = 200
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"><env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing"><addressing:Action env:mustUnderstand="1">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeResponse</addressing:Action><addressing:MessageID>uuid:0710A537-9263-4E7A-9D37-9BF3361B8EBB</addressing:MessageID><addressing:RelatesTo>urn:uuid:a263866d-9827-406b-9c1c-b214c3b11507</addressing:RelatesTo></env:Header><env:Body><wsnt:SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2">    <wsnt:SubscriptionReference>        <a:Address xmlns:a="http://www.w3.org/2005/08/addressing">http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec</a:Address>    </wsnt:SubscriptionReference>    <wsnt:TerminationTime>2099-09-20T00:00:00.000Z</wsnt:TerminationTime></wsnt:SubscribeResponse></env:Body></env:Envelope>
2022/11/06 13:14:26.293340 tukdsub.go:439: Set Broker Ref =  http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec
2022/11/06 13:14:26.293402 tukdsub.go:446: Registering Subscription with Event Service
2022/11/06 13:14:26.293460 tukdbint.go:919: Created Prepared Statement INSERT INTO subscriptions (topic, expression, brokerref, pathway) VALUES (?, ?, ?, ?) - Values [$XDSDocumentEntryTypeCode Lab_Result^^TypeCode_LPRES_2018 http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec pathalert]
2022/11/06 13:17:13.035244 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 13:17:13.036669 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 13:17:13.036735 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 13:17:13.036848 tukxdw.go:506: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/06 13:17:13.036874 tukxdw.go:517: Obtaining XDS Meta for Pathway pathalert
2022/11/06 13:17:13.036975 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/06 13:17:13.063595 tukxdw.go:525: Loaded XDS Meta for Pathway pathalert
2022/11/06 13:17:13.063663 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 13:17:13.064818 tukxdw.go:532: Loaded XDW definition for Pathway pathalert
2022/11/06 13:17:13.064871 tukxdw.go:549: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/06 13:17:13.064903 tukdbint.go:919: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/06 13:17:13.079471 tukxdw.go:555: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/06 13:17:13.079567 tukdbint.go:919: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/06 13:17:13.087492 tukdbint.go:919: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/06 13:17:13.092308 tukdbint.go:919: Created Prepared Statement INSERT INTO events (classcode, confcode, pathway, version, practicecode, authors, xdspid, xdsdocentryuid, nhsid, org, topic, docname, formatcode, user, role, comments, taskid, facilitycode, expression, repositoryuniqueid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Workflow Management N pathalert %!s(int=0) Path-PS1 Clinical pbradley NA urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 lth $XDSDocumentEntryTypeCode PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc pbradley Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=1) path Lab_Report ODD]
2022/11/06 13:17:13.102783 tukxdw.go:914: Created Event ID :  = 191
2022/11/06 13:17:13.102855 tukxdw.go:598: Creating Workflow Task ID - 1 Name - Lab_Report
2022/11/06 13:17:13.102890 tukxdw.go:628: Created Output Part - Lab_Report
2022/11/06 13:17:13.102917 tukxdw.go:638: Set Workflow Task Event 1 created status to complete
2022/11/06 13:17:13.103002 tukdbint.go:919: Created Prepared Statement INSERT INTO events (formatcode, expression, taskid, docname, classcode, practicecode, authors, xdspid, xdsdocentryuid, nhsid, facilitycode, role, comments, version, confcode, repositoryuniqueid, user, org, topic, pathway) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2011:workflowDoc Lab_Report_Claimed %!s(int=2) PATHALERT-9999999468 Workflow Management Path-PS1 Clinical pbradley NA urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 path Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) N ODD pbradley lth $XDSDocumentEntryTypeCode pathalert]
2022/11/06 13:17:13.105549 tukxdw.go:914: Created Event ID :  = 192
2022/11/06 13:17:13.105612 tukxdw.go:598: Creating Workflow Task ID - 2 Name - Lab_Report_Claimed
2022/11/06 13:17:13.105640 tukxdw.go:618: Created Input Part - Lab_Report
2022/11/06 13:17:13.105661 tukxdw.go:628: Created Output Part - Lab_Report_Claimed
2022/11/06 13:17:13.105682 tukxdw.go:638: Set Workflow Task Event 2 created status to complete
2022/11/06 13:17:13.105816 tukdbint.go:919: Created Prepared Statement INSERT INTO events (xdsdocentryuid, org, pathway, version, practicecode, confcode, formatcode, xdspid, repositoryuniqueid, user, comments, taskid, docname, facilitycode, authors, nhsid, topic, classcode, role, expression) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2013:workflowInstanceId lth pathalert %!s(int=0) Path-PS1 N urn:ihe:iti:xdw:2011:workflowDoc NA ODD pbradley User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=3) PATHALERT-9999999468 path Clinical pbradley 9999999468 $XDSDocumentEntryTypeCode Workflow Management Clinical Lab_Result]
2022/11/06 13:17:13.108284 tukxdw.go:914: Created Event ID :  = 193
2022/11/06 13:17:13.108335 tukxdw.go:598: Creating Workflow Task ID - 3 Name - Lab_Result
2022/11/06 13:17:13.108358 tukxdw.go:618: Created Input Part - Lab_Report_Claimed
2022/11/06 13:17:13.108378 tukxdw.go:628: Created Output Part - Lab_Result^^TypeCode_LPRES_2018
2022/11/06 13:17:13.108410 tukxdw.go:638: Set Workflow Task Event 3 created status to complete
2022/11/06 13:17:13.108789 tukxdw.go:649: pbradley Created new PATHALERT Workflow for Patient 9999999468
2022/11/06 13:17:13.109062 tukdbint.go:919: Created Prepared Statement INSERT INTO workflows (version, published, status, xdw_key, xdw_uid, xdw_doc, xdw_def, pathway, nhsid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [%!s(int=0) %!s(bool=false) OPEN PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211131713918.34619 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211131713918.34619" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-06 13:17:13.091966 +0000 GMT"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211131713918.34619^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-06 13:17:13.091966 +0000 GMT</eventTime>
      <eventType>created</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>pbradley Clinical</author>
      <previousStatus></previousStatus>
      <actualStatus>OPEN</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Lab_Report</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 13:17:13.091966 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 13:17:13.091966 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Send Pathology Result Anomaly Alert for Claiming</description>
        <output>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>191</id>
          <eventTime>2022-11-06 13:17:13.091966 +0000 GMT</eventTime>
          <identifier>1</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Lab_Report_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 13:17:13.091966 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 13:17:13.091966 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Claim Pathology Result Anomaly</description>
        <input>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Lab_Report_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>192</id>
          <eventTime>2022-11-06 13:17:13.091966 +0000 GMT</eventTime>
          <identifier>2</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>Task</taskType>
          <name>Lab_Result</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 13:17:13.091966 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 13:17:13.091966 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Publish Lab Result for Pathology Anomaly</description>
        <input>
          <part name="Lab_Report_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Lab_Result^^TypeCode_LPRES_2018">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Result^^TypeCode_LPRES_2018</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>text/xml</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>193</id>
          <eventTime>2022-11-06 13:17:13.091966 +0000 GMT</eventTime>
          <identifier>3</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Anomaly Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Lab_Report","description":"Send Pathology Result Anomaly Alert for Claiming","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report)"}}],"output":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"2","tasktype":"Notification","name":"Lab_Report_Claimed","description":"Claim Pathology Result Anomaly","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(4)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report_Claimed)"}}],"input":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"Lab_Report_Claimed","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"3","tasktype":"Task","name":"Lab_Result","description":"Publish Lab Result for Pathology Anomaly","actualowner":"","expirationtime":"day(3)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Result^^TypeCode_LPRES_2018)"}}],"input":[{"name":"Lab_Report_Claimed","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"Lab_Result^^TypeCode_LPRES_2018","contenttype":"text/xml","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} pathalert 9999999468]
2022/11/06 13:17:13.110963 tukxdw.go:881: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/06 14:42:27.685412 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 14:42:27.686881 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 14:42:27.686950 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 14:42:27.687027 main.go:112: Processing XDW Config Files
2022/11/06 14:42:27.688703 main.go:193: Loaded pathalert_meta.json 
2022/11/06 14:42:27.688780 tukxdw.go:1324: Persisting Workflow XDS Meta
2022/11/06 14:42:27.688908 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/06 14:42:27.723291 tukxdw.go:1384: Deleted Existing XDS Meta for Pathway pathalert
2022/11/06 14:42:27.723410 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert_meta %!s(bool=true) {
    "id": "pathalert_publish",
    "repositoryuniqueid": "",
    "registryoid": "",
    "languagecode": "en-GB",
    "docname": "Completed Pathology Alert Workflow",
    "docdesc": "Pathology Alert Workflow",
    "DocID": "",
    "Authorinstitution": "",
    "Authorperson": "",
    "classcode": "Workflow Management",
    "classcodescheme": "LPRES ClassCode",
    "classcodevalue": "Workflow Management",
    "typecode": "PathAlert_100",
    "typecodescheme": "TypeCode_LPRES_2018",
    "typecodevalue": "Patholgy Alert",
    "practicesettingcode": "Path-PS1",
    "practicesettingscheme": "PracticeSettingCode LPRES",
    "practicesettingvalue": "Path-PS1",
    "confcode": "N",
    "confcodescheme": "LPRES Confidentiality Codes",
    "confcodevalue": "Normal",
    "facilitycode": "path",
    "facilitycodescheme": "Healthcare Facility LPRES",
    "facilitycodevalue": "Pathology",
    "formatcode": "urn:ihe:iti:xdw:2011:workflowDoc",
    "formatcodescheme": "IHE",
    "formatcodevalue": "ITI XDW",
    "mimetype": "application/xml",
    "objecttype": "urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248"
}]
2022/11/06 14:42:27.726590 tukxdw.go:1389: Persisted Workflow XDS Meta for Pathway pathalert
2022/11/06 14:42:27.727409 main.go:193: Loaded pathalert_def.json 
2022/11/06 14:42:27.727446 tukxdw.go:1327: Registering Workflow Definition
2022/11/06 14:42:27.727887 tukdsub.go:187: Processing Cancel Subscriptions
2022/11/06 14:42:27.727933 tukdbint.go:919: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [pathalert]
2022/11/06 14:42:27.738020 tukxdw.go:1341: Cleaned Event Service Subscriptions for Pathway pathalert
2022/11/06 14:42:27.738073 tukdbint.go:919: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 14:42:27.741470 tukxdw.go:1400: Deleted Existing XDW Definition for Pathway pathalert
2022/11/06 14:42:27.741536 tukdbint.go:919: Created Prepared Statement INSERT INTO xdws (xdw, name, isxdsmeta) VALUES (?, ?, ?) - Values [{
    "ref": "pathalert",
    "name": "Pathology Anomaly Workflow",
    "confidentialitycode": "Normal",
    "startbytime": "hour(1)",
    "completebytime": "day(2)",
    "expirationtime": "day(3)",
    "completionBehavior": [{
        "completion": {
            "condition": "task(3)"
        }
    }],
    "tasks": [
        {   "id": "1",
            "tasktype": "NOTIFICATION",
            "name": "Lab_Report",
            "description": "Send Pathology Result Anomaly Alert for Claiming",
            "expirationtime": "hour(8)",
            "completebytime": "hour(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report)"
                }}
            ],
            "output": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }]
        },
        {   "id": "2",
            "tasktype": "Notification",
            "name": "Lab_Report_Claimed",
            "description": "Claim Pathology Result Anomaly",
            "expirationtime": "hour(8)",
            "completebytime": "hour(4)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Report_Claimed)"
                }
            }],
            "input": [{
                "name": "Lab_Report",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }],
            "output": [{
                "name": "Lab_Report_Claimed",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }]
        },
        {   "id": "3",
            "tasktype": "Task",
            "name": "Lab_Result",
            "description": "Publish Lab Result for Pathology Anomaly",
            "expirationtime": "day(3)",
            "completebytime": "day(2)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Lab_Result^^TypeCode_LPRES_2018)"
                }
            }],
            "output": [{
                "name": "Lab_Result^^TypeCode_LPRES_2018",
                "contenttype": "text/xml",
                "accesstype": "urn:ihe:iti:xdw:2011:XDSregistered"
            }]
        }
    ]
} pathalert %!s(bool=false)]
2022/11/06 14:42:27.743696 tukxdw.go:1405: Persisted New XDW Definition for Pathway pathalert
2022/11/06 14:42:27.743727 tukxdw.go:1344: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/11/06 14:42:27.743738 tukxdw.go:1356: Checking Output Task Lab_Report
2022/11/06 14:42:27.743748 tukxdw.go:1361: Output Task Lab_Report does not require a dsub broker subscription
2022/11/06 14:42:27.743757 tukxdw.go:1347: Checking Input Task Lab_Report
2022/11/06 14:42:27.743766 tukxdw.go:1352: Input Task Lab_Report does not require a dsub broker subscription
2022/11/06 14:42:27.743774 tukxdw.go:1356: Checking Output Task Lab_Report_Claimed
2022/11/06 14:42:27.743783 tukxdw.go:1361: Output Task Lab_Report_Claimed does not require a dsub broker subscription
2022/11/06 14:42:27.743806 tukxdw.go:1356: Checking Output Task Lab_Result^^TypeCode_LPRES_2018
2022/11/06 14:42:27.743827 tukxdw.go:1359: Task 3 Lab_Result task output Lab_Result^^TypeCode_LPRES_2018 included in potential DSUB Broker subscriptions
2022/11/06 14:42:27.743848 tukxdw.go:1366: Found 1 potential DSUB Broker Subscriptions - map[Lab_Result^^TypeCode_LPRES_2018:pathalert]
2022/11/06 14:42:27.743859 tukdsub.go:184: Processing Create Subscriptions
2022/11/06 14:42:27.743870 tukdsub.go:387: Checking for existing Subscriptions for Expression Lab_Result^^TypeCode_LPRES_2018
2022/11/06 14:42:27.743893 tukdbint.go:919: Created Prepared Statement SELECT * FROM subscriptions WHERE topic= ? AND expression= ? AND pathway= ? - Values [$XDSDocumentEntryTypeCode Lab_Result^^TypeCode_LPRES_2018 pathalert]
2022/11/06 14:42:27.744652 tukdsub.go:402: No Subscription for Pathway pathalert Topic $XDSDocumentEntryTypeCode Expression Lab_Result^^TypeCode_LPRES_2018 found
2022/11/06 14:42:27.744946 tukdsub.go:425: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/11/06 14:42:27.745037 tukhttp.go:215: SOAP Request Headers
2022/11/06 14:42:27.745098 tukutil.go:166: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/11/06 14:42:27.745117 tukhttp.go:217: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:4a5d1b01-7d51-4bdd-ab6b-a8d0c90814dd</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('Lab_Result^^TypeCode_LPRES_2018')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/11/06 14:42:27.869201 tukhttp.go:220: SOAP Response - Status Code = 200
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope"><env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing"><addressing:Action env:mustUnderstand="1">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeResponse</addressing:Action><addressing:MessageID>uuid:1588574F-4E1B-44B4-AE98-1E0AC52807A8</addressing:MessageID><addressing:RelatesTo>urn:uuid:4a5d1b01-7d51-4bdd-ab6b-a8d0c90814dd</addressing:RelatesTo></env:Header><env:Body><wsnt:SubscribeResponse xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2">    <wsnt:SubscriptionReference>        <a:Address xmlns:a="http://www.w3.org/2005/08/addressing">http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec</a:Address>    </wsnt:SubscriptionReference>    <wsnt:TerminationTime>2099-09-20T00:00:00.000Z</wsnt:TerminationTime></wsnt:SubscribeResponse></env:Body></env:Envelope>
2022/11/06 14:42:27.869536 tukdsub.go:439: Set Broker Ref =  http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec
2022/11/06 14:42:27.869568 tukdsub.go:446: Registering Subscription with Event Service
2022/11/06 14:42:27.869605 tukdbint.go:919: Created Prepared Statement INSERT INTO subscriptions (brokerref, pathway, topic, expression) VALUES (?, ?, ?, ?) - Values [http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub/dsubid/b2ce40bc-5f0c-4820-9f8e-cc4b626d64ec pathalert $XDSDocumentEntryTypeCode Lab_Result^^TypeCode_LPRES_2018]
2022/11/06 14:42:27.873047 tukxdw.go:506: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/06 14:42:27.873082 tukxdw.go:517: Obtaining XDS Meta for Pathway pathalert
2022/11/06 14:42:27.873109 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/06 14:42:27.873797 tukxdw.go:525: Loaded XDS Meta for Pathway pathalert
2022/11/06 14:42:27.873838 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 14:42:27.875928 tukxdw.go:532: Loaded XDW definition for Pathway pathalert
2022/11/06 14:42:27.875987 tukxdw.go:549: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/06 14:42:27.876018 tukdbint.go:919: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/06 14:42:27.878966 tukxdw.go:555: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/06 14:42:27.879053 tukdbint.go:919: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/06 14:42:27.881675 tukdbint.go:919: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/06 14:42:27.883099 tukdbint.go:919: Created Prepared Statement INSERT INTO events (user, comments, version, taskid, authors, confcode, practicecode, org, role, topic, docname, xdspid, xdsdocentryuid, pathway, expression, formatcode, facilitycode, repositoryuniqueid, nhsid, classcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pbradley User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) %!s(int=1) Clinical pbradley N Path-PS1 lth Clinical $XDSDocumentEntryTypeCode PATHALERT-9999999468 NA urn:ihe:iti:xdw:2013:workflowInstanceId pathalert Lab_Report urn:ihe:iti:xdw:2011:workflowDoc path ODD 9999999468 Workflow Management]
2022/11/06 14:42:27.889601 tukxdw.go:914: Created Event ID :  = 196
2022/11/06 14:42:27.889658 tukxdw.go:598: Creating Workflow Task ID - 1 Name - Lab_Report
2022/11/06 14:42:27.889692 tukxdw.go:628: Created Output Part - Lab_Report
2022/11/06 14:42:27.889720 tukxdw.go:638: Set Workflow Task Event 1 created status to complete
2022/11/06 14:42:27.889809 tukdbint.go:919: Created Prepared Statement INSERT INTO events (user, comments, version, docname, classcode, authors, topic, taskid, formatcode, expression, nhsid, pathway, confcode, practicecode, xdsdocentryuid, org, role, facilitycode, xdspid, repositoryuniqueid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pbradley User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) PATHALERT-9999999468 Workflow Management Clinical pbradley $XDSDocumentEntryTypeCode %!s(int=2) urn:ihe:iti:xdw:2011:workflowDoc Lab_Report_Claimed 9999999468 pathalert N Path-PS1 urn:ihe:iti:xdw:2013:workflowInstanceId lth Clinical path NA ODD]
2022/11/06 14:42:27.892526 tukxdw.go:914: Created Event ID :  = 197
2022/11/06 14:42:27.892624 tukxdw.go:598: Creating Workflow Task ID - 2 Name - Lab_Report_Claimed
2022/11/06 14:42:27.892649 tukxdw.go:618: Created Input Part - Lab_Report
2022/11/06 14:42:27.892668 tukxdw.go:628: Created Output Part - Lab_Report_Claimed
2022/11/06 14:42:27.892701 tukxdw.go:638: Set Workflow Task Event 2 created status to complete
2022/11/06 14:42:27.892903 tukdbint.go:919: Created Prepared Statement INSERT INTO events (role, version, docname, formatcode, facilitycode, authors, pathway, comments, classcode, confcode, expression, repositoryuniqueid, topic, xdspid, xdsdocentryuid, nhsid, org, practicecode, user, taskid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Clinical %!s(int=0) PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc path Clinical pbradley pathalert User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management N Lab_Result ODD $XDSDocumentEntryTypeCode NA urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 lth Path-PS1 pbradley %!s(int=3)]
2022/11/06 14:42:27.896284 tukxdw.go:914: Created Event ID :  = 198
2022/11/06 14:42:27.896323 tukxdw.go:598: Creating Workflow Task ID - 3 Name - Lab_Result
2022/11/06 14:42:27.896340 tukxdw.go:628: Created Output Part - Lab_Result^^TypeCode_LPRES_2018
2022/11/06 14:42:27.896376 tukxdw.go:638: Set Workflow Task Event 3 created status to complete
2022/11/06 14:42:27.896752 tukxdw.go:649: pbradley Created new PATHALERT Workflow for Patient 9999999468
2022/11/06 14:42:27.897031 tukdbint.go:919: Created Prepared Statement INSERT INTO workflows (nhsid, xdw_uid, xdw_doc, xdw_def, published, status, pathway, version, xdw_key) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [9999999468 1.2.40.0.13.1.1.3542466645.202211144227882.68480 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211144227882.68480" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-06 14:42:27.882987 +0000 GMT"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211144227882.68480^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-06 14:42:27.882987 +0000 GMT</eventTime>
      <eventType>created</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>pbradley Clinical</author>
      <previousStatus></previousStatus>
      <actualStatus>OPEN</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Lab_Report</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 14:42:27.882987 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 14:42:27.882987 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Send Pathology Result Anomaly Alert for Claiming</description>
        <output>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>196</id>
          <eventTime>2022-11-06 14:42:27.882987 +0000 GMT</eventTime>
          <identifier>1</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Lab_Report_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 14:42:27.882987 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 14:42:27.882987 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Claim Pathology Result Anomaly</description>
        <input>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Lab_Report_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>197</id>
          <eventTime>2022-11-06 14:42:27.882987 +0000 GMT</eventTime>
          <identifier>2</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>Task</taskType>
          <name>Lab_Result</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 14:42:27.882987 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 14:42:27.882987 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Publish Lab Result for Pathology Anomaly</description>
        <output>
          <part name="Lab_Result^^TypeCode_LPRES_2018">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Result^^TypeCode_LPRES_2018</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>text/xml</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>198</id>
          <eventTime>2022-11-06 14:42:27.882987 +0000 GMT</eventTime>
          <identifier>3</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Anomaly Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Lab_Report","description":"Send Pathology Result Anomaly Alert for Claiming","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report)"}}],"output":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"2","tasktype":"Notification","name":"Lab_Report_Claimed","description":"Claim Pathology Result Anomaly","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(4)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report_Claimed)"}}],"input":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"Lab_Report_Claimed","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"3","tasktype":"Task","name":"Lab_Result","description":"Publish Lab Result for Pathology Anomaly","actualowner":"","expirationtime":"day(3)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Result^^TypeCode_LPRES_2018)"}}],"output":[{"name":"Lab_Result^^TypeCode_LPRES_2018","contenttype":"text/xml","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(bool=false) OPEN pathalert %!s(int=0) PATHALERT9999999468]
2022/11/06 14:42:27.900496 tukxdw.go:881: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/06 16:48:35.312444 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 16:48:35.313954 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 16:48:35.314013 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 16:48:35.314122 tukxdw.go:506: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/06 16:48:35.314147 tukxdw.go:517: Obtaining XDS Meta for Pathway pathalert
2022/11/06 16:48:35.314247 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/06 16:48:35.340482 tukxdw.go:525: Loaded XDS Meta for Pathway pathalert
2022/11/06 16:48:35.340544 tukdbint.go:919: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/06 16:48:35.344774 tukxdw.go:532: Loaded XDW definition for Pathway pathalert
2022/11/06 16:48:35.344829 tukxdw.go:549: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/06 16:48:35.344862 tukdbint.go:919: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/06 16:48:35.363518 tukxdw.go:555: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/06 16:48:35.363609 tukdbint.go:919: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/06 16:48:35.377618 tukdbint.go:919: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/06 16:48:35.380362 tukdbint.go:919: Created Prepared Statement INSERT INTO events (pathway, comments, version, docname, expression, repositoryuniqueid, nhsid, user, role, topic, classcode, formatcode, facilitycode, authors, xdspid, org, confcode, practicecode, xdsdocentryuid, taskid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) PATHALERT-9999999468 Lab_Report ODD 9999999468 pbradley Clinical $XDSDocumentEntryTypeCode Workflow Management urn:ihe:iti:xdw:2011:workflowDoc path Clinical pbradley NA lth N Path-PS1 urn:ihe:iti:xdw:2013:workflowInstanceId %!s(int=1)]
2022/11/06 16:48:35.382663 tukxdw.go:914: Created Event ID :  = 201
2022/11/06 16:48:35.382722 tukxdw.go:598: Creating Workflow Task ID - 1 Name - Lab_Report
2022/11/06 16:48:35.382744 tukxdw.go:628: Created Output Part - Lab_Report
2022/11/06 16:48:35.382760 tukxdw.go:638: Set Workflow Task Event 1 created status to complete
2022/11/06 16:48:35.382863 tukdbint.go:919: Created Prepared Statement INSERT INTO events (xdsdocentryuid, repositoryuniqueid, docname, facilitycode, expression, authors, org, comments, classcode, formatcode, practicecode, nhsid, confcode, xdspid, user, taskid, role, topic, pathway, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2013:workflowInstanceId ODD PATHALERT-9999999468 path Lab_Report_Claimed Clinical pbradley lth User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management urn:ihe:iti:xdw:2011:workflowDoc Path-PS1 9999999468 N NA pbradley %!s(int=2) Clinical $XDSDocumentEntryTypeCode pathalert %!s(int=0)]
2022/11/06 16:48:35.388415 tukxdw.go:914: Created Event ID :  = 202
2022/11/06 16:48:35.388461 tukxdw.go:598: Creating Workflow Task ID - 2 Name - Lab_Report_Claimed
2022/11/06 16:48:35.388479 tukxdw.go:618: Created Input Part - Lab_Report
2022/11/06 16:48:35.388494 tukxdw.go:628: Created Output Part - Lab_Report_Claimed
2022/11/06 16:48:35.388509 tukxdw.go:638: Set Workflow Task Event 2 created status to complete
2022/11/06 16:48:35.388563 tukdbint.go:919: Created Prepared Statement INSERT INTO events (taskid, docname, practicecode, authors, xdspid, org, pathway, version, formatcode, expression, xdsdocentryuid, comments, facilitycode, repositoryuniqueid, nhsid, user, role, topic, classcode, confcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [%!s(int=3) PATHALERT-9999999468 Path-PS1 Clinical pbradley NA lth pathalert %!s(int=0) urn:ihe:iti:xdw:2011:workflowDoc Lab_Result urn:ihe:iti:xdw:2013:workflowInstanceId User pbradley from lth in the role of Clinical created new pathalert Workflow path ODD 9999999468 pbradley Clinical $XDSDocumentEntryTypeCode Workflow Management N]
2022/11/06 16:48:35.393598 tukxdw.go:914: Created Event ID :  = 203
2022/11/06 16:48:35.393659 tukxdw.go:598: Creating Workflow Task ID - 3 Name - Lab_Result
2022/11/06 16:48:35.393679 tukxdw.go:628: Created Output Part - Lab_Result^^TypeCode_LPRES_2018
2022/11/06 16:48:35.393710 tukxdw.go:638: Set Workflow Task Event 3 created status to complete
2022/11/06 16:48:35.394015 tukxdw.go:649: pbradley Created new PATHALERT Workflow for Patient 9999999468
2022/11/06 16:48:35.394231 tukdbint.go:919: Created Prepared Statement INSERT INTO workflows (xdw_uid, xdw_def, version, published, status, pathway, nhsid, xdw_key, xdw_doc) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [1.2.40.0.13.1.1.3542466645.202211164835378.29652 {"ref":"pathalert","name":"Pathology Anomaly Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Lab_Report","description":"Send Pathology Result Anomaly Alert for Claiming","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report)"}}],"output":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"2","tasktype":"Notification","name":"Lab_Report_Claimed","description":"Claim Pathology Result Anomaly","actualowner":"","expirationtime":"hour(8)","startbytime":"","completebytime":"hour(4)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Report_Claimed)"}}],"input":[{"name":"Lab_Report","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"Lab_Report_Claimed","contenttype":"text/plain","accesstype":"MIME"}]},{"id":"3","tasktype":"Task","name":"Lab_Result","description":"Publish Lab Result for Pathology Anomaly","actualowner":"","expirationtime":"day(3)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Lab_Result^^TypeCode_LPRES_2018)"}}],"output":[{"name":"Lab_Result^^TypeCode_LPRES_2018","contenttype":"text/xml","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(int=0) %!s(bool=false) OPEN pathalert 9999999468 PATHALERT9999999468 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211164835378.29652" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-06 16:48:35.380228 +0000 GMT"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211164835378.29652^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-06 16:48:35.380228 +0000 GMT</eventTime>
      <eventType>created</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>pbradley Clinical</author>
      <previousStatus></previousStatus>
      <actualStatus>OPEN</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Lab_Report</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 16:48:35.380228 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 16:48:35.380228 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Send Pathology Result Anomaly Alert for Claiming</description>
        <output>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>201</id>
          <eventTime>2022-11-06 16:48:35.380228 +0000 GMT</eventTime>
          <identifier>1</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Lab_Report_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 16:48:35.380228 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 16:48:35.380228 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Claim Pathology Result Anomaly</description>
        <input>
          <part name="Lab_Report">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Lab_Report_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Report_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>202</id>
          <eventTime>2022-11-06 16:48:35.380228 +0000 GMT</eventTime>
          <identifier>2</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>Task</taskType>
          <name>Lab_Result</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-06 16:48:35.380228 +0000 GMT</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationTime></activationTime>
          <lastModifiedTime>2022-11-06 16:48:35.380228 +0000 GMT</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Publish Lab Result for Pathology Anomaly</description>
        <output>
          <part name="Lab_Result^^TypeCode_LPRES_2018">
            <attachmentInfo>
              <identifier></identifier>
              <name>Lab_Result^^TypeCode_LPRES_2018</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>text/xml</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>203</id>
          <eventTime>2022-11-06 16:48:35.380228 +0000 GMT</eventTime>
          <identifier>3</identifier>
          <eventType>created</eventType>
          <status>complete</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument>]
2022/11/06 16:48:35.403284 tukxdw.go:881: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/06 16:55:20.361951 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 16:55:20.363441 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 16:55:20.363515 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 16:55:20.366090 main.go:193: Loaded subscribe.xml 
2022/11/06 16:55:20.366133 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 16:55:20.366257 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 16:55:20.384201 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 16:55:20.391442 main.go:193: Loaded brokerack.xml 
2022/11/06 16:55:20.391480 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 16:55:20.391551 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 16:55:20.394106 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 16:55:20.396963 main.go:193: Loaded cancel.xml 
2022/11/06 16:55:20.397002 main.go:153: Persisting XML Template cancel.xml
2022/11/06 16:55:20.397043 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 16:55:20.400104 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 16:55:20.405170 main.go:193: Loaded stsrst.xml 
2022/11/06 16:55:20.405207 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 16:55:20.405321 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 16:55:20.407737 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 16:55:20.410541 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 16:55:20.410585 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 16:55:20.410638 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/06 16:55:20.413498 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 16:55:20.417524 main.go:193: Loaded xdsodd.xml 
2022/11/06 16:55:20.417575 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 16:55:20.417613 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 16:55:20.420542 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 16:55:20.426766 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 16:55:20.426800 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 16:55:20.426831 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 16:55:20.429436 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 16:55:20.432789 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 16:55:20.432823 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 16:55:20.432867 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 16:55:20.435568 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 16:55:20.441193 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 16:55:20.441228 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 16:55:20.441272 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 16:55:20.443314 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 16:55:20.446458 main.go:193: Loaded pathwayoptions.html 
2022/11/06 16:55:20.446487 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 16:55:20.446544 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 16:55:20.448416 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 16:55:20.451073 main.go:193: Loaded pixmpatient.html 
2022/11/06 16:55:20.451102 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 16:55:20.451146 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 16:55:20.453521 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 16:55:20.457710 main.go:193: Loaded subscriptions.html 
2022/11/06 16:55:20.457748 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 16:55:20.457784 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 16:55:20.460347 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}} subscriptions]
2022/11/06 16:55:20.464243 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 16:55:20.464295 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 16:55:20.464358 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 16:55:20.467317 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/06 16:55:20.471053 main.go:193: Loaded workflowtasks.html 
2022/11/06 16:55:20.471089 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 16:55:20.471123 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 16:55:20.473907 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/06 16:55:20.481088 main.go:193: Loaded dashboardwidget.html 
2022/11/06 16:55:20.481133 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 16:55:20.481179 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 16:55:20.484758 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 16:55:20.487483 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 16:55:20.487512 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 16:55:20.487539 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 16:55:20.490077 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/06 16:55:20.492998 main.go:193: Loaded notificationwidget.html 
2022/11/06 16:55:20.493026 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 16:55:20.493052 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 16:55:20.495481 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 16:55:20.499250 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 16:55:20.499281 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 16:55:20.499319 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 16:55:20.501311 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 16:55:20.503689 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 16:55:20.503720 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 16:55:20.503753 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 16:55:20.507244 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header]
2022/11/06 16:55:20.510121 main.go:193: Loaded workflows.html 
2022/11/06 16:55:20.510149 main.go:171: Persisting HTML Template workflows.html
2022/11/06 16:55:20.510187 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 16:55:20.512484 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 16:55:20.516253 main.go:193: Loaded adminspawidget.html 
2022/11/06 16:55:20.516285 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 16:55:20.516324 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 16:55:20.518937 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 16:55:20.525261 main.go:193: Loaded spawidget.html 
2022/11/06 16:55:20.525295 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 16:55:20.525340 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 16:55:20.530182 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 16:55:20.534293 main.go:193: Loaded newworkflow.html 
2022/11/06 16:55:20.534325 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 16:55:20.534362 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 16:55:20.537055 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 16:55:20.541136 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 16:55:20.541173 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 16:55:20.541218 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 16:55:20.543666 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 16:55:20.547307 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 16:55:20.547334 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 16:55:20.547362 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 16:55:20.549314 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/06 16:55:20.551296 main.go:193: Loaded footer.html 
2022/11/06 16:55:20.551323 main.go:171: Persisting HTML Template footer.html
2022/11/06 16:55:20.551363 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 16:55:20.553422 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 16:55:20.557024 main.go:193: Loaded events.html 
2022/11/06 16:55:20.557055 main.go:171: Persisting HTML Template events.html
2022/11/06 16:55:20.557083 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 16:55:20.559234 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 16:55:20.562332 main.go:193: Loaded header.html 
2022/11/06 16:55:20.562358 main.go:171: Persisting HTML Template header.html
2022/11/06 16:55:20.562392 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 16:55:20.564498 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 16:55:20.566927 main.go:193: Loaded pixpatient.html 
2022/11/06 16:55:20.566957 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 16:55:20.566992 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/06 16:55:20.569616 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 16:55:20.572045 main.go:193: Loaded horizontalline.html 
2022/11/06 16:55:20.572075 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 16:55:20.572109 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 16:55:20.574123 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 16:55:20.576513 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 16:55:20.576559 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 16:55:20.576590 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 16:55:20.578838 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 16:55:20.581471 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 16:55:20.581505 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 16:55:20.581535 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 16:55:20.582885 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 16:55:20.586181 main.go:193: Loaded workflow.html 
2022/11/06 16:55:20.586211 main.go:171: Persisting HTML Template workflow.html
2022/11/06 16:55:20.586238 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 16:55:20.588326 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 16:55:20.590790 main.go:193: Loaded usereventform.html 
2022/11/06 16:55:20.590820 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 16:55:20.590847 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 16:55:20.592084 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 16:55:20.594281 main.go:193: Loaded wfconfig.html 
2022/11/06 16:55:20.594310 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 16:55:20.594338 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 16:55:20.596962 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 16:55:20.598908 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 16:55:20.598935 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 16:55:20.598964 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 16:55:20.601096 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 16:55:20.602940 main.go:193: Loaded timelinewidget.html 
2022/11/06 16:55:20.602970 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 16:55:20.602998 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 16:55:20.605129 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 16:58:47.380193 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 16:58:47.381798 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 16:58:47.381875 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 16:58:47.383684 main.go:193: Loaded subscribe.xml 
2022/11/06 16:58:47.383726 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 16:58:47.383852 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 16:58:47.426974 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/06 16:58:47.436410 main.go:193: Loaded brokerack.xml 
2022/11/06 16:58:47.436461 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 16:58:47.436512 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 16:58:47.441091 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 16:58:47.445605 main.go:193: Loaded cancel.xml 
2022/11/06 16:58:47.445644 main.go:153: Persisting XML Template cancel.xml
2022/11/06 16:58:47.445712 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 16:58:47.448998 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 16:58:47.452435 main.go:193: Loaded stsrst.xml 
2022/11/06 16:58:47.452474 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 16:58:47.452515 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 16:58:47.455166 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 16:58:47.462024 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 16:58:47.462058 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 16:58:47.462109 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 16:58:47.464486 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 16:58:47.470341 main.go:193: Loaded xdsodd.xml 
2022/11/06 16:58:47.470382 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 16:58:47.470424 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 16:58:47.473126 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 16:58:47.478517 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 16:58:47.478555 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 16:58:47.478588 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 16:58:47.482086 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 16:58:47.486350 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 16:58:47.486390 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 16:58:47.486445 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 16:58:47.488942 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 16:58:47.492704 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 16:58:47.492745 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 16:58:47.492797 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/06 16:58:47.495185 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 16:58:47.503542 main.go:193: Loaded pathwayoptions.html 
2022/11/06 16:58:47.503589 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 16:58:47.503636 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 16:58:47.506232 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 16:58:47.511841 main.go:193: Loaded pixmpatient.html 
2022/11/06 16:58:47.511882 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 16:58:47.511923 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixmpatient]
2022/11/06 16:58:47.514008 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/06 16:58:47.517656 main.go:193: Loaded subscriptions.html 
2022/11/06 16:58:47.517689 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 16:58:47.517733 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 16:58:47.523004 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 16:58:47.528537 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 16:58:47.528568 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 16:58:47.528613 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 16:58:47.531242 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 16:58:47.536859 main.go:193: Loaded workflowtasks.html 
2022/11/06 16:58:47.536892 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 16:58:47.536937 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 16:58:47.541514 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 16:58:47.545471 main.go:193: Loaded dashboardwidget.html 
2022/11/06 16:58:47.545506 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 16:58:47.545554 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 16:58:47.551075 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 16:58:47.558778 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 16:58:47.558814 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 16:58:47.558849 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 16:58:47.561441 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/06 16:58:47.565540 main.go:193: Loaded notificationwidget.html 
2022/11/06 16:58:47.565575 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 16:58:47.565610 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 16:58:47.568104 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/06 16:58:47.571943 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 16:58:47.571980 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 16:58:47.572011 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 16:58:47.575262 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 16:58:47.580839 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 16:58:47.580874 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 16:58:47.580907 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 16:58:47.583461 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 16:58:47.586527 main.go:193: Loaded workflows.html 
2022/11/06 16:58:47.586564 main.go:171: Persisting HTML Template workflows.html
2022/11/06 16:58:47.586601 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 16:58:47.589095 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/06 16:58:47.594881 main.go:193: Loaded adminspawidget.html 
2022/11/06 16:58:47.594912 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 16:58:47.594947 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 16:58:47.597489 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget %!s(bool=false)]
2022/11/06 16:58:47.601142 main.go:193: Loaded spawidget.html 
2022/11/06 16:58:47.601174 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 16:58:47.601207 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 16:58:47.603232 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} spawidget %!s(bool=false)]
2022/11/06 16:58:47.606942 main.go:193: Loaded newworkflow.html 
2022/11/06 16:58:47.606977 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 16:58:47.607011 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 16:58:47.611079 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 16:58:47.614557 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 16:58:47.614590 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 16:58:47.614626 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 16:58:47.616730 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/06 16:58:47.620657 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 16:58:47.620692 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 16:58:47.620752 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 16:58:47.623277 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/06 16:58:47.625878 main.go:193: Loaded footer.html 
2022/11/06 16:58:47.625912 main.go:171: Persisting HTML Template footer.html
2022/11/06 16:58:47.625943 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 16:58:47.628262 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 16:58:47.640944 main.go:193: Loaded events.html 
2022/11/06 16:58:47.640973 main.go:171: Persisting HTML Template events.html
2022/11/06 16:58:47.641018 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 16:58:47.643347 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 16:58:47.646354 main.go:193: Loaded header.html 
2022/11/06 16:58:47.646384 main.go:171: Persisting HTML Template header.html
2022/11/06 16:58:47.646431 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 16:58:47.647783 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/06 16:58:47.650244 main.go:193: Loaded pixpatient.html 
2022/11/06 16:58:47.650286 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 16:58:47.650314 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 16:58:47.652837 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 16:58:47.655756 main.go:193: Loaded horizontalline.html 
2022/11/06 16:58:47.655788 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 16:58:47.655816 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 16:58:47.656912 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 16:58:47.658860 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 16:58:47.658890 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 16:58:47.658926 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 16:58:47.660170 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 16:58:47.662397 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 16:58:47.662426 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 16:58:47.662454 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 16:58:47.664463 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 16:58:47.666705 main.go:193: Loaded workflow.html 
2022/11/06 16:58:47.666734 main.go:171: Persisting HTML Template workflow.html
2022/11/06 16:58:47.666770 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 16:58:47.668695 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 16:58:47.671450 main.go:193: Loaded usereventform.html 
2022/11/06 16:58:47.671522 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 16:58:47.671552 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 16:58:47.673696 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 16:58:47.676080 main.go:193: Loaded wfconfig.html 
2022/11/06 16:58:47.676111 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 16:58:47.676139 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/06 16:58:47.678746 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 16:58:47.682592 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 16:58:47.682629 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 16:58:47.682660 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 16:58:47.684751 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 16:58:47.688125 main.go:193: Loaded timelinewidget.html 
2022/11/06 16:58:47.688152 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 16:58:47.688181 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 16:58:47.690076 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{.Vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget]
2022/11/06 17:00:18.631703 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 17:00:18.632876 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 17:00:18.632947 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 17:00:18.635226 main.go:193: Loaded subscribe.xml 
2022/11/06 17:00:18.635377 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 17:00:18.637074 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 17:00:18.663503 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 17:00:18.668332 main.go:193: Loaded brokerack.xml 
2022/11/06 17:00:18.668393 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 17:00:18.668445 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 17:00:18.671978 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 17:00:18.679349 main.go:193: Loaded cancel.xml 
2022/11/06 17:00:18.679386 main.go:153: Persisting XML Template cancel.xml
2022/11/06 17:00:18.679419 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 17:00:18.681634 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 17:00:18.686630 main.go:193: Loaded stsrst.xml 
2022/11/06 17:00:18.686667 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 17:00:18.686699 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 17:00:18.688946 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/06 17:00:18.695608 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 17:00:18.695682 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 17:00:18.695719 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 17:00:18.697600 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 17:00:18.703771 main.go:193: Loaded xdsodd.xml 
2022/11/06 17:00:18.703802 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 17:00:18.703846 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 17:00:18.708020 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 17:00:18.714419 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 17:00:18.714448 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 17:00:18.714494 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/06 17:00:18.718018 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/06 17:00:18.722183 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 17:00:18.722216 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 17:00:18.722261 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 17:00:18.725732 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 17:00:18.729747 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 17:00:18.729780 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 17:00:18.729822 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 17:00:18.733978 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 17:00:18.736481 main.go:193: Loaded pathwayoptions.html 
2022/11/06 17:00:18.736520 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 17:00:18.736550 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 17:00:18.739034 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 17:00:18.742920 main.go:193: Loaded pixmpatient.html 
2022/11/06 17:00:18.742955 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 17:00:18.742988 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 17:00:18.745978 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/06 17:00:18.750597 main.go:193: Loaded subscriptions.html 
2022/11/06 17:00:18.750647 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 17:00:18.750693 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 17:00:18.753672 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 17:00:18.758265 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 17:00:18.758302 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 17:00:18.758334 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 17:00:18.760893 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 17:00:18.763342 main.go:193: Loaded workflowtasks.html 
2022/11/06 17:00:18.763377 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 17:00:18.763407 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 17:00:18.765942 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 17:00:18.769897 main.go:193: Loaded dashboardwidget.html 
2022/11/06 17:00:18.769924 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 17:00:18.769951 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 17:00:18.772471 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 17:00:18.778345 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 17:00:18.778388 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 17:00:18.778417 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 17:00:18.782527 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 17:00:18.786625 main.go:193: Loaded notificationwidget.html 
2022/11/06 17:00:18.786652 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 17:00:18.786679 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 17:00:18.788999 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 17:00:18.793024 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 17:00:18.793055 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 17:00:18.793084 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 17:00:18.795639 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 17:00:18.799590 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 17:00:18.799624 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 17:00:18.799678 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 17:00:18.802523 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header]
2022/11/06 17:00:18.807722 main.go:193: Loaded workflows.html 
2022/11/06 17:00:18.807759 main.go:171: Persisting HTML Template workflows.html
2022/11/06 17:00:18.807789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 17:00:18.810580 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/06 17:00:18.815200 main.go:193: Loaded adminspawidget.html 
2022/11/06 17:00:18.815236 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 17:00:18.815263 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 17:00:18.817854 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 17:00:18.825326 main.go:193: Loaded spawidget.html 
2022/11/06 17:00:18.825364 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 17:00:18.825393 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/06 17:00:18.837950 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 17:00:18.847878 main.go:193: Loaded newworkflow.html 
2022/11/06 17:00:18.847922 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 17:00:18.847974 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 17:00:18.850449 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 17:00:18.855651 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 17:00:18.855687 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 17:00:18.855720 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 17:00:18.859402 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}} snip_workflow_col_elapsedtime]
2022/11/06 17:00:18.863199 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 17:00:18.863231 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 17:00:18.863260 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 17:00:18.865688 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/06 17:00:18.869820 main.go:193: Loaded footer.html 
2022/11/06 17:00:18.869865 main.go:171: Persisting HTML Template footer.html
2022/11/06 17:00:18.869913 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 17:00:18.874199 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/06 17:00:18.880439 main.go:193: Loaded events.html 
2022/11/06 17:00:18.880474 main.go:171: Persisting HTML Template events.html
2022/11/06 17:00:18.880503 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 17:00:18.884471 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 17:00:18.888596 main.go:193: Loaded header.html 
2022/11/06 17:00:18.888629 main.go:171: Persisting HTML Template header.html
2022/11/06 17:00:18.888659 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 17:00:18.893025 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/06 17:00:18.898716 main.go:193: Loaded pixpatient.html 
2022/11/06 17:00:18.898764 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 17:00:18.898801 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/06 17:00:18.901421 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 17:00:18.905523 main.go:193: Loaded horizontalline.html 
2022/11/06 17:00:18.905554 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 17:00:18.905582 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 17:00:18.909511 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 17:00:18.912572 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 17:00:18.912608 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 17:00:18.912646 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 17:00:18.914834 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 17:00:18.920112 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 17:00:18.920161 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 17:00:18.920213 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_overdue]
2022/11/06 17:00:18.922789 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 17:00:18.926713 main.go:193: Loaded workflow.html 
2022/11/06 17:00:18.926747 main.go:171: Persisting HTML Template workflow.html
2022/11/06 17:00:18.926776 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 17:00:18.929074 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 17:00:18.932867 main.go:193: Loaded usereventform.html 
2022/11/06 17:00:18.932900 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 17:00:18.932929 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 17:00:18.936186 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 17:00:18.938204 main.go:193: Loaded wfconfig.html 
2022/11/06 17:00:18.938233 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 17:00:18.938277 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 17:00:18.942069 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 17:00:18.946554 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 17:00:18.946640 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 17:00:18.946687 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 17:00:18.953136 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 17:00:18.962919 main.go:193: Loaded timelinewidget.html 
2022/11/06 17:00:18.962958 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 17:00:18.962991 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 17:00:18.965868 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 18:27:51.725431 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 18:27:51.726724 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 18:27:51.726794 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 18:27:51.728386 main.go:193: Loaded subscribe.xml 
2022/11/06 18:27:51.728427 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 18:27:51.728563 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 18:27:51.757411 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 18:27:51.772588 main.go:193: Loaded brokerack.xml 
2022/11/06 18:27:51.772623 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 18:27:51.772655 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 18:27:51.775263 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 18:27:51.779410 main.go:193: Loaded cancel.xml 
2022/11/06 18:27:51.779450 main.go:153: Persisting XML Template cancel.xml
2022/11/06 18:27:51.779504 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 18:27:51.786985 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 18:27:51.790037 main.go:193: Loaded stsrst.xml 
2022/11/06 18:27:51.790068 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 18:27:51.790099 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 18:27:51.792770 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 18:27:51.797532 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 18:27:51.797567 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 18:27:51.797603 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 18:27:51.801176 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/06 18:27:51.806907 main.go:193: Loaded xdsodd.xml 
2022/11/06 18:27:51.806940 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 18:27:51.806971 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 18:27:51.809312 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 18:27:51.814550 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 18:27:51.814599 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 18:27:51.814655 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 18:27:51.820743 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/06 18:27:51.825163 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 18:27:51.825202 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 18:27:51.825257 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 18:27:51.827849 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 18:27:51.832211 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 18:27:51.832249 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 18:27:51.832302 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 18:27:51.834781 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 18:27:51.839599 main.go:193: Loaded pathwayoptions.html 
2022/11/06 18:27:51.839647 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 18:27:51.839680 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 18:27:51.841236 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 18:27:51.844740 main.go:193: Loaded pixmpatient.html 
2022/11/06 18:27:51.844788 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 18:27:51.844834 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 18:27:51.848315 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 18:27:51.850386 main.go:193: Loaded subscriptions.html 
2022/11/06 18:27:51.850415 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 18:27:51.850449 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 18:27:51.855894 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 18:27:51.860252 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 18:27:51.860289 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 18:27:51.860331 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 18:27:51.864401 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 18:27:51.873704 main.go:193: Loaded workflowtasks.html 
2022/11/06 18:27:51.873757 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 18:27:51.873882 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 18:27:51.876164 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 18:27:51.880087 main.go:193: Loaded dashboardwidget.html 
2022/11/06 18:27:51.880120 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 18:27:51.880152 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) dashboardwidget]
2022/11/06 18:27:51.881947 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 18:27:51.887507 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 18:27:51.887534 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 18:27:51.887568 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 18:27:51.890171 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 18:27:51.893351 main.go:193: Loaded notificationwidget.html 
2022/11/06 18:27:51.893392 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 18:27:51.893596 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 18:27:51.896621 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 18:27:51.900762 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 18:27:51.900790 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 18:27:51.900818 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/06 18:27:51.904245 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 18:27:51.908164 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 18:27:51.908214 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 18:27:51.908259 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 18:27:51.910966 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 18:27:51.914478 main.go:193: Loaded workflows.html 
2022/11/06 18:27:51.914513 main.go:171: Persisting HTML Template workflows.html
2022/11/06 18:27:51.914547 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 18:27:51.919197 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 18:27:51.921575 main.go:193: Loaded adminspawidget.html 
2022/11/06 18:27:51.921599 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 18:27:51.921633 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 18:27:51.924226 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">New {{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 18:27:51.928584 main.go:193: Loaded spawidget.html 
2022/11/06 18:27:51.928612 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 18:27:51.928639 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 18:27:51.931051 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 18:27:51.936767 main.go:193: Loaded newworkflow.html 
2022/11/06 18:27:51.936804 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 18:27:51.936832 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 18:27:51.939451 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 18:27:51.943511 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 18:27:51.943539 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 18:27:51.943580 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 18:27:51.945904 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/06 18:27:51.949698 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 18:27:51.949734 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 18:27:51.950059 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 18:27:51.953004 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/06 18:27:51.957111 main.go:193: Loaded footer.html 
2022/11/06 18:27:51.957143 main.go:171: Persisting HTML Template footer.html
2022/11/06 18:27:51.957201 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 18:27:51.960732 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 18:27:51.964712 main.go:193: Loaded events.html 
2022/11/06 18:27:51.964744 main.go:171: Persisting HTML Template events.html
2022/11/06 18:27:51.964946 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 18:27:51.968192 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events %!s(bool=false)]
2022/11/06 18:27:51.971789 main.go:193: Loaded header.html 
2022/11/06 18:27:51.971817 main.go:171: Persisting HTML Template header.html
2022/11/06 18:27:51.971846 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/06 18:27:51.974291 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header %!s(bool=false)]
2022/11/06 18:27:51.978425 main.go:193: Loaded pixpatient.html 
2022/11/06 18:27:51.978458 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 18:27:51.978486 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 18:27:51.980960 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/06 18:27:51.985595 main.go:193: Loaded horizontalline.html 
2022/11/06 18:27:51.985625 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 18:27:51.985662 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 18:27:51.987851 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/06 18:27:51.991369 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 18:27:51.991396 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 18:27:51.991425 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 18:27:51.993868 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 18:27:51.995235 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 18:27:51.995263 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 18:27:51.995292 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 18:27:51.996578 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 18:27:52.000249 main.go:193: Loaded workflow.html 
2022/11/06 18:27:52.000277 main.go:171: Persisting HTML Template workflow.html
2022/11/06 18:27:52.000314 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 18:27:52.002403 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/06 18:27:52.005019 main.go:193: Loaded usereventform.html 
2022/11/06 18:27:52.005048 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 18:27:52.005074 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/06 18:27:52.007401 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 18:27:52.010599 main.go:193: Loaded wfconfig.html 
2022/11/06 18:27:52.010629 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 18:27:52.010657 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/06 18:27:52.012042 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 18:27:52.014673 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 18:27:52.014706 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 18:27:52.014743 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 18:27:52.017388 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 18:27:52.020695 main.go:193: Loaded timelinewidget.html 
2022/11/06 18:27:52.020724 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 18:27:52.020751 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 18:27:52.022824 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 18:31:32.562601 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 18:31:32.564034 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 18:31:32.564098 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 18:31:32.565687 main.go:193: Loaded subscribe.xml 
2022/11/06 18:31:32.565730 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 18:31:32.565860 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 18:31:32.589197 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/06 18:31:32.598754 main.go:193: Loaded brokerack.xml 
2022/11/06 18:31:32.598794 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 18:31:32.598841 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/06 18:31:32.604344 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/06 18:31:32.607857 main.go:193: Loaded cancel.xml 
2022/11/06 18:31:32.607890 main.go:153: Persisting XML Template cancel.xml
2022/11/06 18:31:32.607929 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 18:31:32.612042 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 18:31:32.617111 main.go:193: Loaded stsrst.xml 
2022/11/06 18:31:32.617148 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 18:31:32.617180 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 18:31:32.619899 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 18:31:32.623698 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 18:31:32.623737 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 18:31:32.623789 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/06 18:31:32.626621 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 18:31:32.633002 main.go:193: Loaded xdsodd.xml 
2022/11/06 18:31:32.633037 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 18:31:32.633071 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 18:31:32.637988 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/06 18:31:32.646709 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 18:31:32.646743 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 18:31:32.646774 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 18:31:32.649090 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 18:31:32.654342 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 18:31:32.654376 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 18:31:32.654425 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 18:31:32.656534 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 18:31:32.660878 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 18:31:32.660911 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 18:31:32.660996 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 18:31:32.663343 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 18:31:32.671172 main.go:193: Loaded pathwayoptions.html 
2022/11/06 18:31:32.671212 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 18:31:32.671245 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 18:31:32.673877 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 18:31:32.677427 main.go:193: Loaded pixmpatient.html 
2022/11/06 18:31:32.677463 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 18:31:32.677498 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 18:31:32.680170 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/06 18:31:32.687309 main.go:193: Loaded subscriptions.html 
2022/11/06 18:31:32.687343 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 18:31:32.687377 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) subscriptions]
2022/11/06 18:31:32.689701 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 18:31:32.695585 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 18:31:32.695623 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 18:31:32.695655 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 18:31:32.697600 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/06 18:31:32.702836 main.go:193: Loaded workflowtasks.html 
2022/11/06 18:31:32.702871 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 18:31:32.702901 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 18:31:32.705754 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/06 18:31:32.711665 main.go:193: Loaded dashboardwidget.html 
2022/11/06 18:31:32.711718 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 18:31:32.711778 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 18:31:32.714212 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/06 18:31:32.733497 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 18:31:32.733541 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 18:31:32.733573 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 18:31:32.736150 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 18:31:32.740822 main.go:193: Loaded notificationwidget.html 
2022/11/06 18:31:32.740857 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 18:31:32.740895 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 18:31:32.743415 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/06 18:31:32.747321 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 18:31:32.747358 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 18:31:32.747391 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/06 18:31:32.750365 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 18:31:32.756188 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 18:31:32.756228 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 18:31:32.756280 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/06 18:31:32.758632 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 18:31:32.765667 main.go:193: Loaded workflows.html 
2022/11/06 18:31:32.765717 main.go:171: Persisting HTML Template workflows.html
2022/11/06 18:31:32.765758 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 18:31:32.769180 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 18:31:32.773331 main.go:193: Loaded adminspawidget.html 
2022/11/06 18:31:32.773365 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 18:31:32.773397 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 18:31:32.776013 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">New {{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 18:31:32.779820 main.go:193: Loaded spawidget.html 
2022/11/06 18:31:32.779859 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 18:31:32.779895 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 18:31:32.781854 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>   
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 18:31:32.786100 main.go:193: Loaded newworkflow.html 
2022/11/06 18:31:32.786137 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 18:31:32.786283 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/06 18:31:32.788433 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 18:31:32.794220 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 18:31:32.794262 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 18:31:32.794304 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 18:31:32.796923 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/06 18:31:32.800749 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 18:31:32.800780 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 18:31:32.800810 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 18:31:32.803302 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/06 18:31:32.806870 main.go:193: Loaded footer.html 
2022/11/06 18:31:32.806906 main.go:171: Persisting HTML Template footer.html
2022/11/06 18:31:32.806938 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 18:31:32.809433 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/06 18:31:32.813742 main.go:193: Loaded events.html 
2022/11/06 18:31:32.813773 main.go:171: Persisting HTML Template events.html
2022/11/06 18:31:32.813809 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 18:31:32.815921 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/06 18:31:32.818446 main.go:193: Loaded header.html 
2022/11/06 18:31:32.818480 main.go:171: Persisting HTML Template header.html
2022/11/06 18:31:32.818516 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 18:31:32.820552 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 18:31:32.823250 main.go:193: Loaded pixpatient.html 
2022/11/06 18:31:32.823284 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 18:31:32.823315 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/06 18:31:32.824523 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/06 18:31:32.827726 main.go:193: Loaded horizontalline.html 
2022/11/06 18:31:32.827759 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 18:31:32.827793 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 18:31:32.831380 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/06 18:31:32.833256 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 18:31:32.833289 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 18:31:32.833319 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 18:31:32.835377 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 18:31:32.837519 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 18:31:32.837551 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 18:31:32.837580 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_overdue]
2022/11/06 18:31:32.839597 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/06 18:31:32.841937 main.go:193: Loaded workflow.html 
2022/11/06 18:31:32.841972 main.go:171: Persisting HTML Template workflow.html
2022/11/06 18:31:32.842017 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflow]
2022/11/06 18:31:32.844141 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/06 18:31:32.848046 main.go:193: Loaded usereventform.html 
2022/11/06 18:31:32.848082 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 18:31:32.848113 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/06 18:31:32.849358 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform %!s(bool=false)]
2022/11/06 18:31:32.853752 main.go:193: Loaded wfconfig.html 
2022/11/06 18:31:32.853786 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 18:31:32.853818 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/06 18:31:32.855933 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 18:31:32.859667 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 18:31:32.859710 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 18:31:32.859741 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_timeline]
2022/11/06 18:31:32.862967 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/06 18:31:32.865423 main.go:193: Loaded timelinewidget.html 
2022/11/06 18:31:32.865464 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 18:31:32.865505 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 18:31:32.868687 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/06 19:10:54.681431 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/06 19:10:54.682784 main.go:199: Loaded log file - ./logs/2022/1106.log
2022/11/06 19:10:54.682884 tukdbint.go:234: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/06 19:10:54.684531 main.go:193: Loaded subscribe.xml 
2022/11/06 19:10:54.684619 main.go:153: Persisting XML Template subscribe.xml
2022/11/06 19:10:54.684741 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/06 19:10:54.720886 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/06 19:10:54.734056 main.go:193: Loaded brokerack.xml 
2022/11/06 19:10:54.734108 main.go:153: Persisting XML Template brokerack.xml
2022/11/06 19:10:54.734172 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) brokerack]
2022/11/06 19:10:54.737291 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/06 19:10:54.741322 main.go:193: Loaded cancel.xml 
2022/11/06 19:10:54.741354 main.go:153: Persisting XML Template cancel.xml
2022/11/06 19:10:54.741396 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/06 19:10:54.744044 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/06 19:10:54.748340 main.go:193: Loaded stsrst.xml 
2022/11/06 19:10:54.748373 main.go:153: Persisting XML Template stsrst.xml
2022/11/06 19:10:54.748406 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/06 19:10:54.756731 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/06 19:10:54.761598 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/06 19:10:54.761638 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/06 19:10:54.761674 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/06 19:10:54.764053 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/06 19:10:54.769504 main.go:193: Loaded xdsodd.xml 
2022/11/06 19:10:54.769599 main.go:153: Persisting XML Template xdsodd.xml
2022/11/06 19:10:54.769678 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/06 19:10:54.773797 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/06 19:10:54.780269 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/06 19:10:54.780303 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/06 19:10:54.780340 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/06 19:10:54.782899 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/06 19:10:54.787096 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/06 19:10:54.787131 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/06 19:10:54.787174 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/06 19:10:54.789759 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/06 19:10:54.793497 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/06 19:10:54.793574 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/06 19:10:54.793769 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/06 19:10:54.796789 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/06 19:10:54.800586 main.go:193: Loaded pathwayoptions.html 
2022/11/06 19:10:54.800625 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/06 19:10:54.800679 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/06 19:10:54.804697 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/06 19:10:54.808513 main.go:193: Loaded pixmpatient.html 
2022/11/06 19:10:54.808552 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/06 19:10:54.808610 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/06 19:10:54.812319 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient]
2022/11/06 19:10:54.831190 main.go:193: Loaded subscriptions.html 
2022/11/06 19:10:54.831227 main.go:171: Persisting HTML Template subscriptions.html
2022/11/06 19:10:54.831270 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/06 19:10:54.839325 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/06 19:10:54.844379 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/06 19:10:54.844413 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/06 19:10:54.844461 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/06 19:10:54.846679 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/06 19:10:54.855047 main.go:193: Loaded workflowtasks.html 
2022/11/06 19:10:54.855127 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/06 19:10:54.855175 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/06 19:10:54.857483 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for {{.Part.AttachmentInfo.Name}} to be Published</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                        <textarea disabled type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}} workflowtasks]
2022/11/06 19:10:54.861175 main.go:193: Loaded dashboardwidget.html 
2022/11/06 19:10:54.861206 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/06 19:10:54.861237 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/06 19:10:54.863834 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}} dashboardwidget %!s(bool=false)]
2022/11/06 19:10:54.869488 main.go:193: Loaded snip_workflow_header.html 
2022/11/06 19:10:54.869539 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/06 19:10:54.869588 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/06 19:10:54.873101 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/06 19:10:54.878618 main.go:193: Loaded notificationwidget.html 
2022/11/06 19:10:54.878660 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/06 19:10:54.878700 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/06 19:10:54.881213 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/06 19:10:54.887465 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/06 19:10:54.887505 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/06 19:10:54.887648 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_patient]
2022/11/06 19:10:54.890711 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/06 19:10:54.894724 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/06 19:10:54.894763 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/06 19:10:54.894803 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/06 19:10:54.897335 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/06 19:10:54.902461 main.go:193: Loaded workflows.html 
2022/11/06 19:10:54.902514 main.go:171: Persisting HTML Template workflows.html
2022/11/06 19:10:54.902552 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/06 19:10:54.915375 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Status</label>
            <p id="published" name="published">{{.Status}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/06 19:10:54.919226 main.go:193: Loaded adminspawidget.html 
2022/11/06 19:10:54.919273 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/06 19:10:54.919329 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/06 19:10:54.922750 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}
{{$saml := .SAML}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&vers=-1&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#newxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Start New Workflow</a>
                    <ul class="collapse list-unstyled" id="newxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=XDW_Creator&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}} Workflow</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 19:10:54.931458 main.go:193: Loaded spawidget.html 
2022/11/06 19:10:54.931495 main.go:171: Persisting HTML Template spawidget.html
2022/11/06 19:10:54.931527 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/06 19:10:54.935482 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                            <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&pathway={{.}}&nhs={{$nhsid}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>   
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/06 19:10:54.940688 main.go:193: Loaded newworkflow.html 
2022/11/06 19:10:54.940722 main.go:171: Persisting HTML Template newworkflow.html
2022/11/06 19:10:54.940758 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) newworkflow]
2022/11/06 19:10:54.944164 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/06 19:10:54.946567 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/06 19:10:54.946609 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/06 19:10:54.946643 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/06 19:10:54.950180 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/06 19:10:54.954009 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/06 19:10:54.954045 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/06 19:10:54.954152 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/06 19:10:54.956756 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/06 19:10:54.959278 main.go:193: Loaded footer.html 
2022/11/06 19:10:54.959311 main.go:171: Persisting HTML Template footer.html
2022/11/06 19:10:54.959346 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/06 19:10:54.960590 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer]
2022/11/06 19:10:54.965270 main.go:193: Loaded events.html 
2022/11/06 19:10:54.965311 main.go:171: Persisting HTML Template events.html
2022/11/06 19:10:54.965343 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/06 19:10:54.969600 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}} events]
2022/11/06 19:10:54.973826 main.go:193: Loaded header.html 
2022/11/06 19:10:54.973862 main.go:171: Persisting HTML Template header.html
2022/11/06 19:10:54.973894 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/06 19:10:54.975180 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/06 19:10:54.979469 main.go:193: Loaded pixpatient.html 
2022/11/06 19:10:54.979505 main.go:171: Persisting HTML Template pixpatient.html
2022/11/06 19:10:54.979538 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pixpatient]
2022/11/06 19:10:54.981965 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient]
2022/11/06 19:10:54.988036 main.go:193: Loaded horizontalline.html 
2022/11/06 19:10:54.988071 main.go:171: Persisting HTML Template horizontalline.html
2022/11/06 19:10:54.988104 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/06 19:10:54.990365 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/06 19:10:54.992669 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/06 19:10:54.992702 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/06 19:10:54.992733 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/06 19:10:54.993985 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/06 19:10:54.997882 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/06 19:10:54.997918 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/06 19:10:54.997960 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/06 19:10:55.002098 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue]
2022/11/06 19:10:55.006342 main.go:193: Loaded workflow.html 
2022/11/06 19:10:55.006388 main.go:171: Persisting HTML Template workflow.html
2022/11/06 19:10:55.006421 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/06 19:10:55.008476 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow %!s(bool=false)]
2022/11/06 19:10:55.011239 main.go:193: Loaded usereventform.html 
2022/11/06 19:10:55.011274 main.go:171: Persisting HTML Template usereventform.html
2022/11/06 19:10:55.011306 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/06 19:10:55.013884 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/06 19:10:55.019223 main.go:193: Loaded wfconfig.html 
2022/11/06 19:10:55.019269 main.go:171: Persisting HTML Template wfconfig.html
2022/11/06 19:10:55.019331 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/06 19:10:55.023885 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/06 19:10:55.029520 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/06 19:10:55.029991 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/06 19:10:55.030026 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 19:10:55.046221 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline %!s(bool=false)]
2022/11/06 19:10:55.062249 main.go:193: Loaded timelinewidget.html 
2022/11/06 19:10:55.062283 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/06 19:10:55.062316 tukdbint.go:919: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/06 19:10:55.064451 tukdbint.go:919: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
{{$vers := .Vers}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&vers={{$vers}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                            {{else}}
                                <div class="timeline-badge primary"><i class="fa fa-thumbs-up"></i></div>
                            {{end}}
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                            </div>
                            <div class="timeline-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Task Duration</label>
                                        <p>{{taskduration $event $t.TaskData.TaskDetails.ID}}</p>                               
                                    </div>
                                    <div class="col-sm-6">
                                        <label>Current Owner</label>
                                        <p>{{$t.TaskData.TaskDetails.ActualOwner}}</p>                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <label>Activation Time</label>
                                        <p>{{$t.TaskData.TaskDetails.ActivationTime}}</p>
                                    </div>
                                    <div class="col-sm-6">
                                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                            <label>Completed On</label>
                                        {{else}}
                                            <label>Updated</label>
                                        {{end}}
                                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
