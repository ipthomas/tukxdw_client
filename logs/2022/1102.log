2022/11/02 11:54:55.496542 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 11:54:55.496592 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 11:54:55.496630 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 11:54:55.498436 main.go:193: Loaded queryDocumentsReturnAllTypeCodes.xml 
2022/11/02 11:54:55.498476 main.go:153: Persisting XML Template queryDocumentsReturnAllTypeCodes.xml
2022/11/02 11:54:55.498605 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [queryDocumentsReturnAllTypeCodes %!s(bool=true)]
2022/11/02 11:54:55.517114 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [queryDocumentsReturnAllTypeCodes %!s(bool=true) {{define "queryDocumentsReturnAllTypeCodes"}}
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <ns2:queryDocumentsReturnAll xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
        <arg0>
            <stateID>{{.StateID}}</stateID>
            <requestData>
                <domain>
                    <domain>
                        <authNamespaceID>NHS ID</authNamespaceID>
                        <authUniversalID>2.16.840.1.113883.2.1.4.1</authUniversalID>
                        <authUniversalIDType>ISO</authUniversalIDType>
                    </domain>
                    <ehrPIDType>32</ehrPIDType>
                    <patientID>{{.NHSId}}</patientID>
                    <patientIDType>HC</patientIDType>
            </requestData>           
            <xdsQArgsDocument>
                <!--<useAltXdsCons>false</useAltXdsCons>-->
                <typeCodes>
                    <nodeRepresentation>{{.ODDDocument.Typecode}}</nodeRepresentation>
                    <schema>{{.ODDDocument.Typecodescheme}}</schema>
                    <value>{{.ODDDocument.TypecodeValue}}</value>
                </typeCodes>
                <documentStatus>urn:oasis:names:tc:ebxml-regrep:StatusType:Approved</documentStatus>
            </xdsQArgsDocument>
        </arg0>
    </ns2:queryDocumentsReturnAll>
  </S:Body>
</S:Envelope>
{{end}}
]
2022/11/02 11:54:55.523630 main.go:193: Loaded retrieveDocument.xml 
2022/11/02 11:54:55.523678 main.go:153: Persisting XML Template retrieveDocument.xml
2022/11/02 11:54:55.523729 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [retrieveDocument %!s(bool=true)]
2022/11/02 11:54:55.530648 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "retrieveDocument"}}
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <ns2:retrieveDocument xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
      <arg0>
        <stateID>{{.StateID}}</stateID>
        <requestData>
            {{.DocumentRequestXML}}
       </requestData>
      </arg0>
    </ns2:retrieveDocument>
  </S:Body>
</S:Envelope>
{{end}} retrieveDocument %!s(bool=true)]
2022/11/02 11:54:55.534180 main.go:193: Loaded workflowDocument.xml 
2022/11/02 11:54:55.534218 main.go:153: Persisting XML Template workflowDocument.xml
2022/11/02 11:54:55.534272 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowDocument %!s(bool=true)]
2022/11/02 11:54:55.539723 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowDocument %!s(bool=true) {{define "workflowDocument"}}
<xdw:WorkflowDocument xmlns:hl7="urn:hl7-org:v3"
    xmlns:ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803"
    xmlns:xdw="urn:ihe:iti:xdw:2011"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
    <xdw:id root="{{.XDWWorkflowDocument.ID.Root}}"/>
    <xdw:effectiveTime value="{{.XDWWorkflowDocument.EffectiveTime.Value}}"/>
    <xdw:confidentialityCode code="{{.XDWWorkflowDocument.ConfidentialityCode.Code}}"/>
    <xdw:patient>
        <xdw:id root="{{.XDWWorkflowDocument.Patient.ID.Root}}" extension="{{.XDWWorkflowDocument.Patient.ID.Extension}}" assigningAuthorityName="{{.XDWWorkflowDocument.Patient.ID.AssigningAuthorityName}}"/>
    </xdw:patient>
    <xdw:author>
        <xdw:assignedAuthor>
            <hl7:id root="{{.XDWWorkflowDocument.Author.AssignedAuthor.ID.Root}}" extension="{{.XDWWorkflowDocument.Author.AssignedAuthor.ID.Extension}}"/>
            <hl7:assignedPerson>
                <hl7:name>
                    <hl7:family>{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</hl7:family>
                    <hl7:prefix>{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}}</hl7:prefix>
                </hl7:name>
            </hl7:assignedPerson>
        </xdw:assignedAuthor>
    </xdw:author>
    <xdw:workflowInstanceId>{{.XDWWorkflowDocument.WorkflowInstanceId}}</xdw:workflowInstanceId>
    <xdw:workflowDocumentSequenceNumber>{{.XDWWorkflowDocument.WorkflowDocumentSequenceNumber}}</xdw:workflowDocumentSequenceNumber>
    <xdw:workflowStatus>{{.XDWWorkflowDocument.WorkflowStatus}}</xdw:workflowStatus>
    <xdw:workflowStatusHistory>
        {{- range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
        <xdw:documentEvent>
            <xdw:eventTime>{{.EventTime}}</xdw:eventTime>
            <xdw:eventType>{{.EventType}}</xdw:eventType>
            <xdw:taskEventIdentifier>{{.TaskEventIdentifier}}</xdw:taskEventIdentifier>
            <xdw:author>{{.Author}}</xdw:author>
            <xdw:previousStatus>{{- .PreviousStatus}}</xdw:previousStatus>
            <xdw:actualStatus>{{.ActualStatus}}</xdw:actualStatus>
        </xdw:documentEvent>
        {{- end}}
    </xdw:workflowStatusHistory>
    <xdw:workflowDefinitionReference>urn:oid:{{.XDWWorkflowDocument.WorkflowDefinitionReference}}</xdw:workflowDefinitionReference>
    <xdw:TaskList>
        {{- range .XDWWorkflowDocument.TaskList.XDWTask}}
        <xdw:XDWTask>
            <xdw:taskData>
                <ws-ht:taskDetails>
                    <ws-ht:id>{{.TaskData.TaskDetails.ID}}</ws-ht:id>
                    <ws-ht:taskType>{{.TaskData.TaskDetails.TaskType}}</ws-ht:taskType>
                    <ws-ht:name>{{.TaskData.TaskDetails.Name}}</ws-ht:name>
                    <ws-ht:status>{{.TaskData.TaskDetails.Status}}</ws-ht:status>
                    <ws-ht:actualOwner>{{.TaskData.TaskDetails.ActualOwner}}</ws-ht:actualOwner>
                    <ws-ht:createdTime>{{.TaskData.TaskDetails.CreatedTime}}</ws-ht:createdTime>
                    <ws-ht:createdBy>{{.TaskData.TaskDetails.CreatedBy}}</ws-ht:createdBy>
                    <ws-ht:lastModifiedTime>{{.TaskData.TaskDetails.LastModifiedTime}}</ws-ht:lastModifiedTime>
                    <ws-ht:renderingMethodExists>false</ws-ht:renderingMethodExists>
                </ws-ht:taskDetails>
                <ws-ht:description>{{.TaskData.Description}}</ws-ht:description>
                <ws-ht:input>
                    {{- range .TaskData.Input}}
                    <ws-ht:part name="{{.Part.Name}}">
                        <ws-ht:attachmentInfo>
                            <ws-ht:identifier>{{.Part.AttachmentInfo.Identifier}}</ws-ht:identifier>
                            <ws-ht:name>{{.Part.AttachmentInfo.Name}}</ws-ht:name>
                            <ws-ht:accessType>{{.Part.AttachmentInfo.AccessType}}</ws-ht:accessType>
                            <ws-ht:contentType>{{.Part.AttachmentInfo.ContentType}}</ws-ht:contentType>
                            <ws-ht:contentCategory>{{.Part.AttachmentInfo.ContentCategory}}</ws-ht:contentCategory>
                            <ws-ht:attachedTime>{{.Part.AttachmentInfo.AttachedTime}}</ws-ht:attachedTime>
                            <ws-ht:attachedBy>{{.Part.AttachmentInfo.AttachedBy}}</ws-ht:attachedBy>
                            <xdw:homeCommunityId>{{.Part.AttachmentInfo.HomeCommunityId}}</xdw:homeCommunityId>
                        </ws-ht:attachmentInfo>
                    </ws-ht:part>
                    {{- end}}
                </ws-ht:input>
                <ws-ht:output>
                    {{- range .TaskData.Output}}
                    <ws-ht:part name="{{.Part.Name}}">
                        <ws-ht:attachmentInfo>
                            <ws-ht:identifier>{{.Part.AttachmentInfo.Identifier}}</ws-ht:identifier>
                            <ws-ht:name>{{.Part.AttachmentInfo.Name}}</ws-ht:name>
                            <ws-ht:accessType>{{.Part.AttachmentInfo.AccessType}}</ws-ht:accessType>
                            <ws-ht:contentType>{{.Part.AttachmentInfo.ContentType}}</ws-ht:contentType>
                            <ws-ht:contentCategory>{{.Part.AttachmentInfo.ContentCategory}}</ws-ht:contentCategory>
                            <ws-ht:attachedTime>{{.Part.AttachmentInfo.AttachedTime}}</ws-ht:attachedTime>
                            <ws-ht:attachedBy>{{.Part.AttachmentInfo.AttachedBy}}</ws-ht:attachedBy>
                            <xdw:homeCommunityId>{{.Part.AttachmentInfo.HomeCommunityId}}</xdw:homeCommunityId>
                        </ws-ht:attachmentInfo>
                    </ws-ht:part>
                    {{- end}}
                </ws-ht:output>
            </xdw:taskData>
            <xdw:taskEventHistory>
                {{- range .TaskEventHistory.TaskEvent}}
                <xdw:taskEvent>
                    <xdw:id>{{.ID}}</xdw:id>
                    <xdw:eventTime>{{.EventTime}}</xdw:eventTime>
                    <xdw:identifier>{{.Identifier}}</xdw:identifier>
                    <xdw:eventType>{{.EventType}}</xdw:eventType>
                    <xdw:status>{{.Status}}</xdw:status>
                </xdw:taskEvent>
                {{- end}}
            </xdw:taskEventHistory>           
        </xdw:XDWTask>
        {{end}}
    </xdw:TaskList>
</xdw:WorkflowDocument>
{{end}}]
2022/11/02 11:54:55.544522 main.go:193: Loaded pixquery.xml 
2022/11/02 11:54:55.544550 main.go:153: Persisting XML Template pixquery.xml
2022/11/02 11:54:55.544592 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixquery %!s(bool=true)]
2022/11/02 11:54:55.546601 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixquery %!s(bool=true) {{define "pixquery"}}
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
  <S:Body>
    <ns2:queryPatients xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
      <arg0>
        <stateID>{{.StateID}}</stateID>
        <requestData>
          <pid>
            <domain>
              <authUniversalID>{{.PIDOid}}</authUniversalID>
            </domain>
            <patientID>{{.PID}}</patientID>
          </pid>
        </requestData>
        <xcpd>false</xcpd>
      </arg0>
    </ns2:queryPatients>
  </S:Body>
</S:Envelope>
{{end}}]
2022/11/02 11:54:55.550575 main.go:193: Loaded subscribe.xml 
2022/11/02 11:54:55.550622 main.go:153: Persisting XML Template subscribe.xml
2022/11/02 11:54:55.550653 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/02 11:54:55.554654 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/02 11:54:55.557148 main.go:193: Loaded tswsrst.xml 
2022/11/02 11:54:55.557177 main.go:153: Persisting XML Template tswsrst.xml
2022/11/02 11:54:55.557207 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [tswsrst %!s(bool=true)]
2022/11/02 11:54:55.559428 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [tswsrst %!s(bool=true) {{define "tswsrst"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:rem="http://remoting.ws.ehr.spirit.com/">
   <soap:Header/>
   <soap:Body>
      <rem:requestSTS>
         <arg0>
            <claims>{{.ClaimDialect}}</claims>
            <endpoint>{{.ClaimValue}}</endpoint>
            <organization>{{.Organisation}}</organization>
            <organizationID>urn:oid:{{mappedid .Organisation}}</organizationID>
            <password>{{.Password}}</password>
            <purposeOfUse>{{.POU}}</purposeOfUse>
            <role>{{.Role}}</role>
            <subjectID>{{.User}}</subjectID>
            <username>{{.User}}</username>
         </arg0>
      </rem:requestSTS>
   </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 11:54:55.562311 main.go:193: Loaded brokerack.xml 
2022/11/02 11:54:55.562342 main.go:153: Persisting XML Template brokerack.xml
2022/11/02 11:54:55.562373 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/02 11:54:55.564464 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/02 11:54:55.566965 main.go:193: Loaded cancel.xml 
2022/11/02 11:54:55.566996 main.go:153: Persisting XML Template cancel.xml
2022/11/02 11:54:55.567026 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/02 11:54:55.569949 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 11:54:55.573145 main.go:193: Loaded stsrst.xml 
2022/11/02 11:54:55.573173 main.go:153: Persisting XML Template stsrst.xml
2022/11/02 11:54:55.573203 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/02 11:54:55.577006 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/02 11:54:55.581327 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/02 11:54:55.581373 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/02 11:54:55.581407 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/02 11:54:55.583578 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/02 11:54:55.586304 main.go:193: Loaded xdsodd.xml 
2022/11/02 11:54:55.586335 main.go:153: Persisting XML Template xdsodd.xml
2022/11/02 11:54:55.586364 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/02 11:54:55.587788 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/02 11:54:55.590880 main.go:193: Loaded submitDocument.xml 
2022/11/02 11:54:55.590910 main.go:153: Persisting XML Template submitDocument.xml
2022/11/02 11:54:55.590940 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [submitDocument %!s(bool=true)]
2022/11/02 11:54:55.593360 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [submitDocument %!s(bool=true) {{define "submitDocument"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Header/>
   <soap:Body>
      <rem:submit xmlns:rem="http://remoting.ws.ehr.spirit.com/">
         <arg0>
            <stateID>{{.StateID}}</stateID>
            <patient>
               <allowRemoteSubmit>false</allowRemoteSubmit>
               <birthdate>{{.PatientDetails.BirthDate}}</birthdate>
               <deathIndicator>false</deathIndicator>
               <familyName>{{.PatientDetails.FamilyName}}</familyName>
               <givenName>{{.PatientDetails.GivenName}}</givenName>
               <multipleBirth>false</multipleBirth>
               <nameTypeCode>L</nameTypeCode>
               <patientFlags>
                  <entry>
                     <key xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">NHS</key>
                     <value xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9999999468</value>
                  </entry>
               </patientFlags>
               <pid>
                  <domain>
                     <authNamespaceID>NHS</authNamespaceID>
                     <authUniversalID>2.16.840.1.113883.2.1.4.1</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>32</ehrPIDType>
                  <patientID>{{.NHSId}}</patientID>
                  <patientIDType>HC</patientIDType>
               </pid>
               <pid>
                  <domain>
                     <authNamespaceID>{{mappedid .PIDOid}}</authNamespaceID>
                     <authUniversalID>{{.PIDOid}}</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>6</ehrPIDType>
                  <patientID>{{.PID}}</patientID>
                  <patientIDType>PI</patientIDType>
               </pid>
               <pid>
                  <domain>
                     <authNamespaceID>{{mappedid .REGOid}}</authNamespaceID>
                     <authUniversalID>{{.REGOid}}</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>1048</ehrPIDType>
                  <patientID>{{.REGId}}</patientID>
                  <patientIDType>RRI</patientIDType>
               </pid>
               <sex>F</sex>
               <subsetPatIdBehavior>2</subsetPatIdBehavior>
            </patient>
            <useHL7v3Style>false</useHL7v3Style>
            <encrypted>false</encrypted>
            <signed>false</signed>
            <srcSubmission>
               <documents>
                  <author>
                     <institution>{{.EventServices.EventService.Org}}</institution>
                     <person>{{.EventServices.EventService.User}}</person>
                  </author>
                  <bytes>{{.Base64EncodedFile}}</bytes>
                  <classCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Classcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Classcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Classcodevalue}}</value>
                  </classCode>
                  <confidentialityCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Confcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Confcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Confcodevalue}}</value>
                  </confidentialityCode>
                  <description>{{.XDSDocumentMeta.Docdesc}}</description>
                  <formatCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Formatcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Formatcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Formatcodevalue}}</value>
                  </formatCode>
                  <healthcareFacilityCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Facilitycode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Facilitycodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Facilitycodevalue}}</value>
                  </healthcareFacilityCode>
                  <languageCode>{{.XDSDocumentMeta.Languagecode}}</languageCode>
                  <mimeType>{{.XDSDocumentMeta.Mimetype}}</mimeType>
                  <name>{{.XDSDocumentMeta.Docname}}</name>
                  <practiceSettingCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Practicesettingcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Practicesettingscheme}}</schema>
                     <value>{{.XDSDocumentMeta.Practicesettingvalue}}</value>
                  </practiceSettingCode>
                  <typeCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Typecode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Typecodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Typecodevalue}}</value>
                  </typeCode>
               </documents>
               <submissionSet>
                  <author>
                     <institution>{{.EventServices.EventService.Org}}</institution>
                     <person>{{.EventServices.EventService.User}}</person>
                  </author>
                  <contentTypeCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Typecode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Typecodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Typecodevalue}}</value>
                  </contentTypeCode>
                  <!-- <intendedRecipient>
                     <INet>whatever</INet>
                     <organisation>whatever</organisation>
                     <person>A00005</person>
                  </intendedRecipient> -->
                  <description>{{.XDSDocumentMeta.Docdesc}}</description>
                  <name>{{.XDSDocumentMeta.Docname}}</name>
               </submissionSet>
            </srcSubmission>
         </arg0>
      </rem:submit>
   </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 11:54:55.596510 main.go:193: Loaded samllogin.xml 
2022/11/02 11:54:55.596544 main.go:153: Persisting XML Template samllogin.xml
2022/11/02 11:54:55.596574 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [samllogin %!s(bool=true)]
2022/11/02 11:54:55.599496 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [samllogin %!s(bool=true) {{define "samllogin"}}
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope">
   <env:Header/>
   <S:Body>
      <ns2:loginIdentityAssertion xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
         <arg0>
            <assertion>{{.B64SAML}}</assertion>
         </arg0>
      </ns2:loginIdentityAssertion>
   </S:Body>
</S:Envelope>
{{end}}]
2022/11/02 11:54:55.603358 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/02 11:54:55.603382 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/02 11:54:55.603411 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/02 11:54:55.605104 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}} snip_workflow_col_status %!s(bool=false)]
2022/11/02 11:54:55.608129 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/02 11:54:55.608156 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/02 11:54:55.608196 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/02 11:54:55.610407 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/02 11:54:55.613919 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/02 11:54:55.613963 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/02 11:54:55.613991 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/02 11:54:55.617961 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{mappedid .EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/02 11:54:55.621702 main.go:193: Loaded pathwayoptions.html 
2022/11/02 11:54:55.621734 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/02 11:54:55.621771 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) pathwayoptions]
2022/11/02 11:54:55.623980 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}{{template "header"}}{{$pw := .Pathway}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{mappedid .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{mappedid .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/02 11:54:55.627136 main.go:193: Loaded pixmpatient.html 
2022/11/02 11:54:55.627182 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/02 11:54:55.627211 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/02 11:54:55.628859 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{mappedid (mappedid (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}} pixmpatient %!s(bool=false)]
2022/11/02 11:54:55.631699 main.go:193: Loaded subscriptions.html 
2022/11/02 11:54:55.631727 main.go:171: Persisting HTML Template subscriptions.html
2022/11/02 11:54:55.631757 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/02 11:54:55.633444 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} {{ template "header" .}}{{$url := .EventServices.EventService.EventUrl}}{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{mappedid $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
{{ template "footer"}} {{end}}]
2022/11/02 11:54:55.636054 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/02 11:54:55.636083 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/02 11:54:55.636119 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/02 11:54:55.638076 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/02 11:54:55.642362 main.go:193: Loaded workflowtasks.html 
2022/11/02 11:54:55.642392 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/02 11:54:55.642430 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/02 11:54:55.644589 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Version}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Version}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/02 11:54:55.649999 main.go:193: Loaded dashboardwidget.html 
2022/11/02 11:54:55.650027 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/02 11:54:55.650057 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/02 11:54:55.652261 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{mappedid .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/02 11:54:55.655016 main.go:193: Loaded snip_workflow_header.html 
2022/11/02 11:54:55.655047 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/02 11:54:55.655081 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/02 11:54:55.656733 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header]
2022/11/02 11:54:55.659419 main.go:193: Loaded notificationwidget.html 
2022/11/02 11:54:55.659454 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/02 11:54:55.659484 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/02 11:54:55.662570 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/02 11:54:55.666031 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/02 11:54:55.666061 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/02 11:54:55.666090 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/02 11:54:55.668492 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{mappedid .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/02 11:54:55.672799 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/02 11:54:55.672829 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/02 11:54:55.672857 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 11:54:55.674552 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 11:54:55.680173 main.go:193: Loaded workflows.html 
2022/11/02 11:54:55.680225 main.go:171: Persisting HTML Template workflows.html
2022/11/02 11:54:55.680257 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/02 11:54:55.682572 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{mappedid $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{mappedid .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/02 11:54:55.686843 main.go:193: Loaded adminspawidget.html 
2022/11/02 11:54:55.686872 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/02 11:54:55.686901 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/02 11:54:55.691651 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 11:54:55.697035 main.go:193: Loaded spawidget.html 
2022/11/02 11:54:55.697092 main.go:171: Persisting HTML Template spawidget.html
2022/11/02 11:54:55.697133 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/02 11:54:55.699311 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}{{$url:= .EventServices.EventService.EventUrl}}{{$pwy:= .Pathway}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{mappedid .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 11:54:55.702124 main.go:193: Loaded newworkflow.html 
2022/11/02 11:54:55.702165 main.go:171: Persisting HTML Template newworkflow.html
2022/11/02 11:54:55.702198 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/02 11:54:55.704496 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "newworkflow"}}{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{mappedid .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
{{template "footer" .}} {{end}} newworkflow]
2022/11/02 11:54:55.707940 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/02 11:54:55.707963 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/02 11:54:55.707991 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/02 11:54:55.711054 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/02 11:54:55.714353 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/02 11:54:55.714383 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/02 11:54:55.714418 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/02 11:54:55.716493 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{mappedid .EventType}}</p>
</div>
{{end}}]
2022/11/02 11:54:55.719349 main.go:193: Loaded footer.html 
2022/11/02 11:54:55.719380 main.go:171: Persisting HTML Template footer.html
2022/11/02 11:54:55.719409 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/02 11:54:55.721640 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/02 11:54:55.725431 main.go:193: Loaded events.html 
2022/11/02 11:54:55.725475 main.go:171: Persisting HTML Template events.html
2022/11/02 11:54:55.725505 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/02 11:54:55.731967 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} {{ template "header" .}}{{$url := .EventServices.EventService.EventUrl}}{{$usr := .EventServices.EventService.User}}{{$org := .EventServices.EventService.Org}}{{$role := .EventServices.EventService.Role}}{{$pw:=.Pathway}}{{$exp:=.Expression}}{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{mappedid .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/02 11:54:55.734978 main.go:193: Loaded header.html 
2022/11/02 11:54:55.735002 main.go:171: Persisting HTML Template header.html
2022/11/02 11:54:55.735029 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) header]
2022/11/02 11:54:55.738413 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/02 11:54:55.742348 main.go:193: Loaded pixpatient.html 
2022/11/02 11:54:55.742387 main.go:171: Persisting HTML Template pixpatient.html
2022/11/02 11:54:55.742420 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/02 11:54:55.748005 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "pixpatient"}}{{template "header" .}} {{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{mappedid .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}} pixpatient %!s(bool=false)]
2022/11/02 11:54:55.750836 main.go:193: Loaded horizontalline.html 
2022/11/02 11:54:55.750864 main.go:171: Persisting HTML Template horizontalline.html
2022/11/02 11:54:55.750890 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) horizontalline]
2022/11/02 11:54:55.752382 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline %!s(bool=false)]
2022/11/02 11:54:55.754657 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/02 11:54:55.754685 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/02 11:54:55.754712 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/02 11:54:55.756349 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/02 11:54:55.760362 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/02 11:54:55.760397 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/02 11:54:55.760452 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 11:54:55.763008 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/02 11:54:55.765136 main.go:193: Loaded workflow.html 
2022/11/02 11:54:55.765164 main.go:171: Persisting HTML Template workflow.html
2022/11/02 11:54:55.765190 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/02 11:54:55.767269 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}{{$event := .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/02 11:54:55.769652 main.go:193: Loaded usereventform.html 
2022/11/02 11:54:55.769681 main.go:171: Persisting HTML Template usereventform.html
2022/11/02 11:54:55.769707 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/02 11:54:55.770926 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/02 11:54:55.774595 main.go:193: Loaded wfconfig.html 
2022/11/02 11:54:55.774625 main.go:171: Persisting HTML Template wfconfig.html
2022/11/02 11:54:55.774654 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/02 11:54:55.776588 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/02 11:54:55.781043 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/02 11:54:55.781075 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/02 11:54:55.781102 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/02 11:54:55.783460 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/02 11:54:55.787206 main.go:193: Loaded timelinewidget.html 
2022/11/02 11:54:55.787233 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/02 11:54:55.787260 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/02 11:54:55.789298 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{mappedid .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "CREATED"}}
                                    <p style="color:rgb(4, 164, 192)">Last Updated By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:green">COMPLETED {{lasttaskcompletetime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:rgb(214, 23, 198)">{{$t.TaskData.TaskDetails.Status}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "CREATED"}}
                                    <p>Workflow Task Not Started</p>
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/02 11:54:55.791427 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 11:54:55.791467 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 11:54:55.791507 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/02 11:54:55.797126 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 11:54:55.797181 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 11:54:55.797959 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 11:54:55.798003 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 11:54:55.798029 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 11:54:55.801512 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 11:54:55.801587 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 11:54:55.803508 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 11:54:55.804260 tukdbint.go:917: Created Prepared Statement INSERT INTO events (org, topic, confcode, expression, authors, xdsdocentryuid, repositoryuniqueid, comments, classcode, facilitycode, xdspid, nhsid, user, pathway, taskid, docname, practicecode, role, version, formatcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [lth $XDSDocumentEntryTypeCode N Path_Anomaly_Identified Clinical pbradley urn:ihe:iti:xdw:2013:workflowInstanceId ODD User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management Social Care NA 9999999468 pbradley pathalert %!s(int=1) PATHALERT-9999999468 LAC-PS1 Clinical %!s(int=0) urn:ihe:iti:xdw:2011:workflowDoc]
2022/11/02 11:54:55.808826 tukxdw.go:738: Created Event ID :  = 100
2022/11/02 11:54:55.808890 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 11:54:55.808913 tukxdw.go:474: Created Output Part - Path_Anomaly_Identified
2022/11/02 11:54:55.808932 tukxdw.go:474: Created Output Part - Path1^^TypeCode_LPRES_2022
2022/11/02 11:54:55.808953 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 11:54:55.808967 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 11:54:55.809217 tukdbint.go:917: Created Prepared Statement INSERT INTO events (classcode, confcode, practicecode, facilitycode, xdspid, repositoryuniqueid, user, pathway, taskid, formatcode, expression, role, topic, comments, version, docname, authors, xdsdocentryuid, nhsid, org) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Workflow Management N LAC-PS1 Social Care NA ODD pbradley pathalert %!s(int=2) urn:ihe:iti:xdw:2011:workflowDoc Path_Anomily_Claimed Clinical $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) PATHALERT-9999999468 Clinical pbradley urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 lth]
2022/11/02 11:54:55.813643 tukxdw.go:738: Created Event ID :  = 101
2022/11/02 11:54:55.813684 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 11:54:55.813697 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 11:54:55.813709 tukxdw.go:464: Created Input Part - Path1^^TypeCode_LPRES_2022
2022/11/02 11:54:55.813720 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 11:54:55.813730 tukxdw.go:474: Created Output Part - Path2^^TypeCode_LPRES_2022
2022/11/02 11:54:55.813742 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 11:54:55.813752 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 11:54:55.814070 tukdbint.go:917: Created Prepared Statement INSERT INTO events (expression, xdsdocentryuid, org, docname, classcode, facilitycode, user, role, topic, version, practicecode, authors, nhsid, comments, confcode, formatcode, xdspid, repositoryuniqueid, pathway, taskid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Path_Results urn:ihe:iti:xdw:2013:workflowInstanceId lth PATHALERT-9999999468 Workflow Management Social Care pbradley Clinical $XDSDocumentEntryTypeCode %!s(int=0) LAC-PS1 Clinical pbradley 9999999468 User pbradley from lth in the role of Clinical created new pathalert Workflow N urn:ihe:iti:xdw:2011:workflowDoc NA ODD pathalert %!s(int=3)]
2022/11/02 11:54:55.815975 tukxdw.go:738: Created Event ID :  = 102
2022/11/02 11:54:55.816017 tukxdw.go:444: Creating Workflow Task ID - 3 Name - Path_Results
2022/11/02 11:54:55.816044 tukxdw.go:464: Created Input Part - Path_Anomaly_Claimed
2022/11/02 11:54:55.816059 tukxdw.go:464: Created Input Part - Path2^^TypeCode_LPRES_2022
2022/11/02 11:54:55.816071 tukxdw.go:474: Created Output Part - Path3^^TypeCode_LPRES_2022
2022/11/02 11:54:55.816083 tukxdw.go:484: Set Workflow Task Event 3 create status to COMPLETE
2022/11/02 11:54:55.816093 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 11:54:55.816441 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 11:54:55.816687 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (published, pathway, nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [%!s(bool=false) pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211115455804.49548 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211115455804.49548" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T11:54:55.804154Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211115455804.49548^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>3</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T11:54:55.804154Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T11:54:55.804154Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <output>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>100</id>
          <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T11:54:55.804154Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T11:54:55.804154Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>101</id>
          <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>TASK</taskType>
          <name>Path_Results</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T11:54:55.804154Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T11:54:55.804154Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Provider Claimed Health Assessment E-Referral</description>
        <input>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path3^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path3^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>102</id>
          <eventTime>2022-11-02T11:54:55.804154Z</eventTime>
          <identifier>3</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(1)","startbytime":"hour(1)","completebytime":"hour(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Identified)"}},{"completion":{"condition":"output(Path1^^TypeCode_LPRES_2022)"}}],"output":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(1)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(LAC2^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Path_Results","description":"Provider Claimed Health Assessment E-Referral","actualowner":"","expirationtime":"day(2)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path3^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path3^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(int=0)]
2022/11/02 11:54:55.818466 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/02 12:42:40.724834 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 12:42:40.725876 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 12:42:40.725944 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 12:42:40.726507 main.go:193: Loaded queryDocumentsReturnAllTypeCodes.xml 
2022/11/02 12:42:40.726547 main.go:153: Persisting XML Template queryDocumentsReturnAllTypeCodes.xml
2022/11/02 12:42:40.726666 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [queryDocumentsReturnAllTypeCodes %!s(bool=true)]
2022/11/02 12:42:40.740568 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "queryDocumentsReturnAllTypeCodes"}}
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <ns2:queryDocumentsReturnAll xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
        <arg0>
            <stateID>{{.StateID}}</stateID>
            <requestData>
                <domain>
                    <domain>
                        <authNamespaceID>NHS ID</authNamespaceID>
                        <authUniversalID>2.16.840.1.113883.2.1.4.1</authUniversalID>
                        <authUniversalIDType>ISO</authUniversalIDType>
                    </domain>
                    <ehrPIDType>32</ehrPIDType>
                    <patientID>{{.NHSId}}</patientID>
                    <patientIDType>HC</patientIDType>
            </requestData>           
            <xdsQArgsDocument>
                <!--<useAltXdsCons>false</useAltXdsCons>-->
                <typeCodes>
                    <nodeRepresentation>{{.ODDDocument.Typecode}}</nodeRepresentation>
                    <schema>{{.ODDDocument.Typecodescheme}}</schema>
                    <value>{{.ODDDocument.TypecodeValue}}</value>
                </typeCodes>
                <documentStatus>urn:oasis:names:tc:ebxml-regrep:StatusType:Approved</documentStatus>
            </xdsQArgsDocument>
        </arg0>
    </ns2:queryDocumentsReturnAll>
  </S:Body>
</S:Envelope>
{{end}}
 queryDocumentsReturnAllTypeCodes %!s(bool=true)]
2022/11/02 12:42:40.744794 main.go:193: Loaded retrieveDocument.xml 
2022/11/02 12:42:40.744825 main.go:153: Persisting XML Template retrieveDocument.xml
2022/11/02 12:42:40.744854 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [retrieveDocument %!s(bool=true)]
2022/11/02 12:42:40.752042 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "retrieveDocument"}}
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <ns2:retrieveDocument xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
      <arg0>
        <stateID>{{.StateID}}</stateID>
        <requestData>
            {{.DocumentRequestXML}}
       </requestData>
      </arg0>
    </ns2:retrieveDocument>
  </S:Body>
</S:Envelope>
{{end}} retrieveDocument %!s(bool=true)]
2022/11/02 12:42:40.754270 main.go:193: Loaded workflowDocument.xml 
2022/11/02 12:42:40.754301 main.go:153: Persisting XML Template workflowDocument.xml
2022/11/02 12:42:40.754330 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowDocument %!s(bool=true)]
2022/11/02 12:42:40.756171 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowDocument %!s(bool=true) {{define "workflowDocument"}}
<xdw:WorkflowDocument xmlns:hl7="urn:hl7-org:v3"
    xmlns:ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803"
    xmlns:xdw="urn:ihe:iti:xdw:2011"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
    <xdw:id root="{{.XDWWorkflowDocument.ID.Root}}"/>
    <xdw:effectiveTime value="{{.XDWWorkflowDocument.EffectiveTime.Value}}"/>
    <xdw:confidentialityCode code="{{.XDWWorkflowDocument.ConfidentialityCode.Code}}"/>
    <xdw:patient>
        <xdw:id root="{{.XDWWorkflowDocument.Patient.ID.Root}}" extension="{{.XDWWorkflowDocument.Patient.ID.Extension}}" assigningAuthorityName="{{.XDWWorkflowDocument.Patient.ID.AssigningAuthorityName}}"/>
    </xdw:patient>
    <xdw:author>
        <xdw:assignedAuthor>
            <hl7:id root="{{.XDWWorkflowDocument.Author.AssignedAuthor.ID.Root}}" extension="{{.XDWWorkflowDocument.Author.AssignedAuthor.ID.Extension}}"/>
            <hl7:assignedPerson>
                <hl7:name>
                    <hl7:family>{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</hl7:family>
                    <hl7:prefix>{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}}</hl7:prefix>
                </hl7:name>
            </hl7:assignedPerson>
        </xdw:assignedAuthor>
    </xdw:author>
    <xdw:workflowInstanceId>{{.XDWWorkflowDocument.WorkflowInstanceId}}</xdw:workflowInstanceId>
    <xdw:workflowDocumentSequenceNumber>{{.XDWWorkflowDocument.WorkflowDocumentSequenceNumber}}</xdw:workflowDocumentSequenceNumber>
    <xdw:workflowStatus>{{.XDWWorkflowDocument.WorkflowStatus}}</xdw:workflowStatus>
    <xdw:workflowStatusHistory>
        {{- range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
        <xdw:documentEvent>
            <xdw:eventTime>{{.EventTime}}</xdw:eventTime>
            <xdw:eventType>{{.EventType}}</xdw:eventType>
            <xdw:taskEventIdentifier>{{.TaskEventIdentifier}}</xdw:taskEventIdentifier>
            <xdw:author>{{.Author}}</xdw:author>
            <xdw:previousStatus>{{- .PreviousStatus}}</xdw:previousStatus>
            <xdw:actualStatus>{{.ActualStatus}}</xdw:actualStatus>
        </xdw:documentEvent>
        {{- end}}
    </xdw:workflowStatusHistory>
    <xdw:workflowDefinitionReference>urn:oid:{{.XDWWorkflowDocument.WorkflowDefinitionReference}}</xdw:workflowDefinitionReference>
    <xdw:TaskList>
        {{- range .XDWWorkflowDocument.TaskList.XDWTask}}
        <xdw:XDWTask>
            <xdw:taskData>
                <ws-ht:taskDetails>
                    <ws-ht:id>{{.TaskData.TaskDetails.ID}}</ws-ht:id>
                    <ws-ht:taskType>{{.TaskData.TaskDetails.TaskType}}</ws-ht:taskType>
                    <ws-ht:name>{{.TaskData.TaskDetails.Name}}</ws-ht:name>
                    <ws-ht:status>{{.TaskData.TaskDetails.Status}}</ws-ht:status>
                    <ws-ht:actualOwner>{{.TaskData.TaskDetails.ActualOwner}}</ws-ht:actualOwner>
                    <ws-ht:createdTime>{{.TaskData.TaskDetails.CreatedTime}}</ws-ht:createdTime>
                    <ws-ht:createdBy>{{.TaskData.TaskDetails.CreatedBy}}</ws-ht:createdBy>
                    <ws-ht:lastModifiedTime>{{.TaskData.TaskDetails.LastModifiedTime}}</ws-ht:lastModifiedTime>
                    <ws-ht:renderingMethodExists>false</ws-ht:renderingMethodExists>
                </ws-ht:taskDetails>
                <ws-ht:description>{{.TaskData.Description}}</ws-ht:description>
                <ws-ht:input>
                    {{- range .TaskData.Input}}
                    <ws-ht:part name="{{.Part.Name}}">
                        <ws-ht:attachmentInfo>
                            <ws-ht:identifier>{{.Part.AttachmentInfo.Identifier}}</ws-ht:identifier>
                            <ws-ht:name>{{.Part.AttachmentInfo.Name}}</ws-ht:name>
                            <ws-ht:accessType>{{.Part.AttachmentInfo.AccessType}}</ws-ht:accessType>
                            <ws-ht:contentType>{{.Part.AttachmentInfo.ContentType}}</ws-ht:contentType>
                            <ws-ht:contentCategory>{{.Part.AttachmentInfo.ContentCategory}}</ws-ht:contentCategory>
                            <ws-ht:attachedTime>{{.Part.AttachmentInfo.AttachedTime}}</ws-ht:attachedTime>
                            <ws-ht:attachedBy>{{.Part.AttachmentInfo.AttachedBy}}</ws-ht:attachedBy>
                            <xdw:homeCommunityId>{{.Part.AttachmentInfo.HomeCommunityId}}</xdw:homeCommunityId>
                        </ws-ht:attachmentInfo>
                    </ws-ht:part>
                    {{- end}}
                </ws-ht:input>
                <ws-ht:output>
                    {{- range .TaskData.Output}}
                    <ws-ht:part name="{{.Part.Name}}">
                        <ws-ht:attachmentInfo>
                            <ws-ht:identifier>{{.Part.AttachmentInfo.Identifier}}</ws-ht:identifier>
                            <ws-ht:name>{{.Part.AttachmentInfo.Name}}</ws-ht:name>
                            <ws-ht:accessType>{{.Part.AttachmentInfo.AccessType}}</ws-ht:accessType>
                            <ws-ht:contentType>{{.Part.AttachmentInfo.ContentType}}</ws-ht:contentType>
                            <ws-ht:contentCategory>{{.Part.AttachmentInfo.ContentCategory}}</ws-ht:contentCategory>
                            <ws-ht:attachedTime>{{.Part.AttachmentInfo.AttachedTime}}</ws-ht:attachedTime>
                            <ws-ht:attachedBy>{{.Part.AttachmentInfo.AttachedBy}}</ws-ht:attachedBy>
                            <xdw:homeCommunityId>{{.Part.AttachmentInfo.HomeCommunityId}}</xdw:homeCommunityId>
                        </ws-ht:attachmentInfo>
                    </ws-ht:part>
                    {{- end}}
                </ws-ht:output>
            </xdw:taskData>
            <xdw:taskEventHistory>
                {{- range .TaskEventHistory.TaskEvent}}
                <xdw:taskEvent>
                    <xdw:id>{{.ID}}</xdw:id>
                    <xdw:eventTime>{{.EventTime}}</xdw:eventTime>
                    <xdw:identifier>{{.Identifier}}</xdw:identifier>
                    <xdw:eventType>{{.EventType}}</xdw:eventType>
                    <xdw:status>{{.Status}}</xdw:status>
                </xdw:taskEvent>
                {{- end}}
            </xdw:taskEventHistory>           
        </xdw:XDWTask>
        {{end}}
    </xdw:TaskList>
</xdw:WorkflowDocument>
{{end}}]
2022/11/02 12:42:40.759666 main.go:193: Loaded pixquery.xml 
2022/11/02 12:42:40.759695 main.go:153: Persisting XML Template pixquery.xml
2022/11/02 12:42:40.759739 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) pixquery]
2022/11/02 12:42:40.761112 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixquery %!s(bool=true) {{define "pixquery"}}
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
  <S:Body>
    <ns2:queryPatients xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
      <arg0>
        <stateID>{{.StateID}}</stateID>
        <requestData>
          <pid>
            <domain>
              <authUniversalID>{{.PIDOid}}</authUniversalID>
            </domain>
            <patientID>{{.PID}}</patientID>
          </pid>
        </requestData>
        <xcpd>false</xcpd>
      </arg0>
    </ns2:queryPatients>
  </S:Body>
</S:Envelope>
{{end}}]
2022/11/02 12:42:40.767824 main.go:193: Loaded subscribe.xml 
2022/11/02 12:42:40.767863 main.go:153: Persisting XML Template subscribe.xml
2022/11/02 12:42:40.767894 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/02 12:42:40.770069 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/02 12:42:40.772191 main.go:193: Loaded tswsrst.xml 
2022/11/02 12:42:40.772219 main.go:153: Persisting XML Template tswsrst.xml
2022/11/02 12:42:40.772248 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [tswsrst %!s(bool=true)]
2022/11/02 12:42:40.774990 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [tswsrst %!s(bool=true) {{define "tswsrst"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:rem="http://remoting.ws.ehr.spirit.com/">
   <soap:Header/>
   <soap:Body>
      <rem:requestSTS>
         <arg0>
            <claims>{{.ClaimDialect}}</claims>
            <endpoint>{{.ClaimValue}}</endpoint>
            <organization>{{.Organisation}}</organization>
            <organizationID>urn:oid:{{mappedid .Organisation}}</organizationID>
            <password>{{.Password}}</password>
            <purposeOfUse>{{.POU}}</purposeOfUse>
            <role>{{.Role}}</role>
            <subjectID>{{.User}}</subjectID>
            <username>{{.User}}</username>
         </arg0>
      </rem:requestSTS>
   </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 12:42:40.777241 main.go:193: Loaded brokerack.xml 
2022/11/02 12:42:40.777270 main.go:153: Persisting XML Template brokerack.xml
2022/11/02 12:42:40.777298 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/02 12:42:40.779421 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/02 12:42:40.782164 main.go:193: Loaded cancel.xml 
2022/11/02 12:42:40.782194 main.go:153: Persisting XML Template cancel.xml
2022/11/02 12:42:40.782222 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/02 12:42:40.786013 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 12:42:40.791040 main.go:193: Loaded stsrst.xml 
2022/11/02 12:42:40.791075 main.go:153: Persisting XML Template stsrst.xml
2022/11/02 12:42:40.791104 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/02 12:42:40.792281 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/02 12:42:40.794458 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/02 12:42:40.794491 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/02 12:42:40.794519 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/02 12:42:40.797550 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/02 12:42:40.800297 main.go:193: Loaded xdsodd.xml 
2022/11/02 12:42:40.800332 main.go:153: Persisting XML Template xdsodd.xml
2022/11/02 12:42:40.800367 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/02 12:42:40.802320 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}} xdsodd]
2022/11/02 12:42:40.807163 main.go:193: Loaded submitDocument.xml 
2022/11/02 12:42:40.807202 main.go:153: Persisting XML Template submitDocument.xml
2022/11/02 12:42:40.807237 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [submitDocument %!s(bool=true)]
2022/11/02 12:42:40.809266 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [submitDocument %!s(bool=true) {{define "submitDocument"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
   <soap:Header/>
   <soap:Body>
      <rem:submit xmlns:rem="http://remoting.ws.ehr.spirit.com/">
         <arg0>
            <stateID>{{.StateID}}</stateID>
            <patient>
               <allowRemoteSubmit>false</allowRemoteSubmit>
               <birthdate>{{.PatientDetails.BirthDate}}</birthdate>
               <deathIndicator>false</deathIndicator>
               <familyName>{{.PatientDetails.FamilyName}}</familyName>
               <givenName>{{.PatientDetails.GivenName}}</givenName>
               <multipleBirth>false</multipleBirth>
               <nameTypeCode>L</nameTypeCode>
               <patientFlags>
                  <entry>
                     <key xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">NHS</key>
                     <value xsi:type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">9999999468</value>
                  </entry>
               </patientFlags>
               <pid>
                  <domain>
                     <authNamespaceID>NHS</authNamespaceID>
                     <authUniversalID>2.16.840.1.113883.2.1.4.1</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>32</ehrPIDType>
                  <patientID>{{.NHSId}}</patientID>
                  <patientIDType>HC</patientIDType>
               </pid>
               <pid>
                  <domain>
                     <authNamespaceID>{{mappedid .PIDOid}}</authNamespaceID>
                     <authUniversalID>{{.PIDOid}}</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>6</ehrPIDType>
                  <patientID>{{.PID}}</patientID>
                  <patientIDType>PI</patientIDType>
               </pid>
               <pid>
                  <domain>
                     <authNamespaceID>{{mappedid .REGOid}}</authNamespaceID>
                     <authUniversalID>{{.REGOid}}</authUniversalID>
                     <authUniversalIDType>ISO</authUniversalIDType>
                  </domain>
                  <ehrPIDType>1048</ehrPIDType>
                  <patientID>{{.REGId}}</patientID>
                  <patientIDType>RRI</patientIDType>
               </pid>
               <sex>F</sex>
               <subsetPatIdBehavior>2</subsetPatIdBehavior>
            </patient>
            <useHL7v3Style>false</useHL7v3Style>
            <encrypted>false</encrypted>
            <signed>false</signed>
            <srcSubmission>
               <documents>
                  <author>
                     <institution>{{.EventServices.EventService.Org}}</institution>
                     <person>{{.EventServices.EventService.User}}</person>
                  </author>
                  <bytes>{{.Base64EncodedFile}}</bytes>
                  <classCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Classcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Classcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Classcodevalue}}</value>
                  </classCode>
                  <confidentialityCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Confcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Confcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Confcodevalue}}</value>
                  </confidentialityCode>
                  <description>{{.XDSDocumentMeta.Docdesc}}</description>
                  <formatCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Formatcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Formatcodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Formatcodevalue}}</value>
                  </formatCode>
                  <healthcareFacilityCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Facilitycode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Facilitycodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Facilitycodevalue}}</value>
                  </healthcareFacilityCode>
                  <languageCode>{{.XDSDocumentMeta.Languagecode}}</languageCode>
                  <mimeType>{{.XDSDocumentMeta.Mimetype}}</mimeType>
                  <name>{{.XDSDocumentMeta.Docname}}</name>
                  <practiceSettingCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Practicesettingcode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Practicesettingscheme}}</schema>
                     <value>{{.XDSDocumentMeta.Practicesettingvalue}}</value>
                  </practiceSettingCode>
                  <typeCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Typecode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Typecodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Typecodevalue}}</value>
                  </typeCode>
               </documents>
               <submissionSet>
                  <author>
                     <institution>{{.EventServices.EventService.Org}}</institution>
                     <person>{{.EventServices.EventService.User}}</person>
                  </author>
                  <contentTypeCode>
                     <nodeRepresentation>{{.XDSDocumentMeta.Typecode}}</nodeRepresentation>
                     <schema>{{.XDSDocumentMeta.Typecodescheme}}</schema>
                     <value>{{.XDSDocumentMeta.Typecodevalue}}</value>
                  </contentTypeCode>
                  <!-- <intendedRecipient>
                     <INet>whatever</INet>
                     <organisation>whatever</organisation>
                     <person>A00005</person>
                  </intendedRecipient> -->
                  <description>{{.XDSDocumentMeta.Docdesc}}</description>
                  <name>{{.XDSDocumentMeta.Docname}}</name>
               </submissionSet>
            </srcSubmission>
         </arg0>
      </rem:submit>
   </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 12:42:40.811526 main.go:193: Loaded samllogin.xml 
2022/11/02 12:42:40.811557 main.go:153: Persisting XML Template samllogin.xml
2022/11/02 12:42:40.811589 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [samllogin %!s(bool=true)]
2022/11/02 12:42:40.817231 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "samllogin"}}
<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope">
   <env:Header/>
   <S:Body>
      <ns2:loginIdentityAssertion xmlns:ns2="http://remoting.ws.ehr.spirit.com/">
         <arg0>
            <assertion>{{.B64SAML}}</assertion>
         </arg0>
      </ns2:loginIdentityAssertion>
   </S:Body>
</S:Envelope>
{{end}} samllogin %!s(bool=true)]
2022/11/02 12:42:40.821399 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/02 12:42:40.821430 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/02 12:42:40.821463 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/02 12:42:40.823816 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/02 12:42:40.825931 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/02 12:42:40.825962 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/02 12:42:40.826003 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/02 12:42:40.828038 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/02 12:42:40.832995 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/02 12:42:40.833025 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/02 12:42:40.833053 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/02 12:42:40.835767 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{mappedid .EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/02 12:42:40.839168 main.go:193: Loaded pathwayoptions.html 
2022/11/02 12:42:40.839200 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/02 12:42:40.839228 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/02 12:42:40.841140 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}{{template "header"}}{{$pw := .Pathway}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{mappedid .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{mappedid .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/02 12:42:40.843290 main.go:193: Loaded pixmpatient.html 
2022/11/02 12:42:40.843319 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/02 12:42:40.843345 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/02 12:42:40.845312 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{mappedid (mappedid (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/02 12:42:40.850913 main.go:193: Loaded subscriptions.html 
2022/11/02 12:42:40.850948 main.go:171: Persisting HTML Template subscriptions.html
2022/11/02 12:42:40.850978 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/02 12:42:40.854205 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "subscriptions"}} {{ template "header" .}}{{$url := .EventServices.EventService.EventUrl}}{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{mappedid $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
{{ template "footer"}} {{end}} subscriptions %!s(bool=false)]
2022/11/02 12:42:40.858883 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/02 12:42:40.858915 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/02 12:42:40.858990 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/02 12:42:40.861174 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/02 12:42:40.866749 main.go:193: Loaded workflowtasks.html 
2022/11/02 12:42:40.866785 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/02 12:42:40.866817 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/02 12:42:40.871297 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/02 12:42:40.875853 main.go:193: Loaded dashboardwidget.html 
2022/11/02 12:42:40.875882 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/02 12:42:40.875910 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/02 12:42:40.878032 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{mappedid .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/02 12:42:40.888878 main.go:193: Loaded snip_workflow_header.html 
2022/11/02 12:42:40.888913 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/02 12:42:40.888943 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/02 12:42:40.891312 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/02 12:42:40.894320 main.go:193: Loaded notificationwidget.html 
2022/11/02 12:42:40.894356 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/02 12:42:40.894390 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/02 12:42:40.898937 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget]
2022/11/02 12:42:40.901821 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/02 12:42:40.901856 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/02 12:42:40.901883 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/02 12:42:40.905190 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{mappedid .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/02 12:42:40.911041 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/02 12:42:40.911075 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/02 12:42:40.911111 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 12:42:40.913463 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}} snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 12:42:40.917165 main.go:193: Loaded workflows.html 
2022/11/02 12:42:40.917221 main.go:171: Persisting HTML Template workflows.html
2022/11/02 12:42:40.917261 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/02 12:42:40.921754 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{mappedid $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{mappedid .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/02 12:42:40.925034 main.go:193: Loaded adminspawidget.html 
2022/11/02 12:42:40.925062 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/02 12:42:40.925091 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/02 12:42:40.927434 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 12:42:40.932445 main.go:193: Loaded spawidget.html 
2022/11/02 12:42:40.932479 main.go:171: Persisting HTML Template spawidget.html
2022/11/02 12:42:40.932515 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/02 12:42:40.936114 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}{{$url:= .EventServices.EventService.EventUrl}}{{$pwy:= .Pathway}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{mappedid .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 12:42:40.937993 main.go:193: Loaded newworkflow.html 
2022/11/02 12:42:40.938025 main.go:171: Persisting HTML Template newworkflow.html
2022/11/02 12:42:40.938051 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/02 12:42:40.940589 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{mappedid .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
{{template "footer" .}} {{end}}]
2022/11/02 12:42:40.944114 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/02 12:42:40.944151 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/02 12:42:40.944180 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/02 12:42:40.945459 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/02 12:42:40.948537 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/02 12:42:40.948578 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/02 12:42:40.948613 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/02 12:42:40.950731 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{mappedid .EventType}}</p>
</div>
{{end}}]
2022/11/02 12:42:40.953525 main.go:193: Loaded footer.html 
2022/11/02 12:42:40.953564 main.go:171: Persisting HTML Template footer.html
2022/11/02 12:42:40.953604 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/02 12:42:40.955851 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/02 12:42:40.958450 main.go:193: Loaded events.html 
2022/11/02 12:42:40.958482 main.go:171: Persisting HTML Template events.html
2022/11/02 12:42:40.958508 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/02 12:42:40.960814 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} {{ template "header" .}}{{$url := .EventServices.EventService.EventUrl}}{{$usr := .EventServices.EventService.User}}{{$org := .EventServices.EventService.Org}}{{$role := .EventServices.EventService.Role}}{{$pw:=.Pathway}}{{$exp:=.Expression}}{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{mappedid .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/02 12:42:40.964705 main.go:193: Loaded header.html 
2022/11/02 12:42:40.964742 main.go:171: Persisting HTML Template header.html
2022/11/02 12:42:40.964776 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/02 12:42:40.966990 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}} header]
2022/11/02 12:42:40.969078 main.go:193: Loaded pixpatient.html 
2022/11/02 12:42:40.969108 main.go:171: Persisting HTML Template pixpatient.html
2022/11/02 12:42:40.969143 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/02 12:42:40.971645 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}{{template "header" .}} {{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{mappedid .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/02 12:42:40.974210 main.go:193: Loaded horizontalline.html 
2022/11/02 12:42:40.974239 main.go:171: Persisting HTML Template horizontalline.html
2022/11/02 12:42:40.974265 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/02 12:42:40.976125 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/02 12:42:40.978096 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/02 12:42:40.978124 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/02 12:42:40.978150 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_link_events]
2022/11/02 12:42:40.980188 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events %!s(bool=false)]
2022/11/02 12:42:40.982200 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/02 12:42:40.982229 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/02 12:42:40.982256 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 12:42:40.984258 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}} snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 12:42:40.986726 main.go:193: Loaded workflow.html 
2022/11/02 12:42:40.986757 main.go:171: Persisting HTML Template workflow.html
2022/11/02 12:42:40.986784 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/02 12:42:40.988026 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}{{$event := .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/02 12:42:40.990114 main.go:193: Loaded usereventform.html 
2022/11/02 12:42:40.990143 main.go:171: Persisting HTML Template usereventform.html
2022/11/02 12:42:40.990169 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/02 12:42:40.992125 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}} usereventform %!s(bool=false)]
2022/11/02 12:42:40.994390 main.go:193: Loaded wfconfig.html 
2022/11/02 12:42:40.994419 main.go:171: Persisting HTML Template wfconfig.html
2022/11/02 12:42:40.994445 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/02 12:42:40.996479 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}} wfconfig]
2022/11/02 12:42:40.998774 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/02 12:42:40.998804 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/02 12:42:40.998830 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/02 12:42:41.002209 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/02 12:42:41.005559 main.go:193: Loaded timelinewidget.html 
2022/11/02 12:42:41.005586 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/02 12:42:41.005624 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/02 12:42:41.007734 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{mappedid .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "CREATED"}}
                                    <p style="color:rgb(4, 164, 192)">Last Updated By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:green">COMPLETED {{lasttaskcompletetime $event $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:rgb(214, 23, 198)">{{$t.TaskData.TaskDetails.Status}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "CREATED"}}
                                    <p>Workflow Task Not Started</p>
                                {{end}}
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/02 13:29:45.218788 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 13:29:45.220524 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 13:29:45.220590 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 13:29:45.220685 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 13:29:45.220711 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 13:29:45.220813 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/02 13:29:45.233078 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 13:29:45.233152 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 13:29:45.234177 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 13:29:45.234225 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 13:29:45.234255 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 13:29:45.235217 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 13:29:45.235301 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 13:29:45.236088 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 13:29:45.237010 tukdbint.go:917: Created Prepared Statement INSERT INTO events (facilitycode, org, role, pathway, version, docname, formatcode, xdspid, repositoryuniqueid, comments, taskid, classcode, authors, user, topic, confcode, practicecode, expression, xdsdocentryuid, nhsid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Social Care lth Clinical pathalert %!s(int=0) PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc NA ODD User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=1) Workflow Management Clinical pbradley pbradley $XDSDocumentEntryTypeCode N LAC-PS1 Path_Anomaly_Identified urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468]
2022/11/02 13:29:45.240689 tukxdw.go:738: Created Event ID :  = 104
2022/11/02 13:29:45.240754 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 13:29:45.240806 tukxdw.go:474: Created Output Part - Path_Anomaly_Identified
2022/11/02 13:29:45.240830 tukxdw.go:474: Created Output Part - Path1^^TypeCode_LPRES_2022
2022/11/02 13:29:45.240865 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 13:29:45.240890 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 13:29:45.241022 tukdbint.go:917: Created Prepared Statement INSERT INTO events (xdspid, role, topic, user, classcode, formatcode, repositoryuniqueid, practicecode, nhsid, org, pathway, version, docname, confcode, facilitycode, taskid, comments, expression, authors, xdsdocentryuid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [NA Clinical $XDSDocumentEntryTypeCode pbradley Workflow Management urn:ihe:iti:xdw:2011:workflowDoc ODD LAC-PS1 9999999468 lth pathalert %!s(int=0) PATHALERT-9999999468 N Social Care %!s(int=2) User pbradley from lth in the role of Clinical created new pathalert Workflow Path_Anomily_Claimed Clinical pbradley urn:ihe:iti:xdw:2013:workflowInstanceId]
2022/11/02 13:29:45.246637 tukxdw.go:738: Created Event ID :  = 105
2022/11/02 13:29:45.246683 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 13:29:45.246701 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 13:29:45.246716 tukxdw.go:464: Created Input Part - Path1^^TypeCode_LPRES_2022
2022/11/02 13:29:45.246729 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 13:29:45.246743 tukxdw.go:474: Created Output Part - Path2^^TypeCode_LPRES_2022
2022/11/02 13:29:45.246757 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 13:29:45.246770 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 13:29:45.246835 tukdbint.go:917: Created Prepared Statement INSERT INTO events (docname, confcode, formatcode, xdsdocentryuid, nhsid, expression, authors, repositoryuniqueid, topic, comments, facilitycode, practicecode, xdspid, role, version, taskid, classcode, user, org, pathway) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT-9999999468 N urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 Path_Results Clinical pbradley ODD $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow Social Care LAC-PS1 NA Clinical %!s(int=0) %!s(int=3) Workflow Management pbradley lth pathalert]
2022/11/02 13:29:45.249263 tukxdw.go:738: Created Event ID :  = 106
2022/11/02 13:29:45.249362 tukxdw.go:444: Creating Workflow Task ID - 3 Name - Path_Results
2022/11/02 13:29:45.249407 tukxdw.go:464: Created Input Part - Path_Anomaly_Claimed
2022/11/02 13:29:45.249438 tukxdw.go:464: Created Input Part - Path2^^TypeCode_LPRES_2022
2022/11/02 13:29:45.249459 tukxdw.go:474: Created Output Part - Path3^^TypeCode_LPRES_2022
2022/11/02 13:29:45.249490 tukxdw.go:484: Set Workflow Task Event 3 create status to COMPLETE
2022/11/02 13:29:45.249509 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 13:29:45.249930 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 13:29:45.250262 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (pathway, nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211132945236.21815 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211132945236.21815" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T13:29:45.236902Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211132945236.21815^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>3</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T13:29:45.236902Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T13:29:45.236902Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <output>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>104</id>
          <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T13:29:45.236902Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T13:29:45.236902Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>105</id>
          <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>TASK</taskType>
          <name>Path_Results</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T13:29:45.236902Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T13:29:45.236902Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Provider Claimed Health Assessment E-Referral</description>
        <input>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path3^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path3^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>106</id>
          <eventTime>2022-11-02T13:29:45.236902Z</eventTime>
          <identifier>3</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(1)","startbytime":"hour(1)","completebytime":"hour(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Identified)"}},{"completion":{"condition":"output(Path1^^TypeCode_LPRES_2022)"}}],"output":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(1)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(LAC2^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Path_Results","description":"Provider Claimed Health Assessment E-Referral","actualowner":"","expirationtime":"day(2)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path3^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path3^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(int=0) %!s(bool=false)]
2022/11/02 13:29:45.254938 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/02 14:09:01.971413 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 14:09:01.972590 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 14:09:01.972658 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 14:09:01.972758 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 14:09:01.972785 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 14:09:01.972888 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/02 14:09:01.981623 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 14:09:01.981689 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 14:09:01.983004 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 14:09:01.983057 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 14:09:01.983089 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 14:09:01.983943 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 14:09:01.984025 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 14:09:01.984761 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 14:09:01.985763 tukdbint.go:917: Created Prepared Statement INSERT INTO events (user, org, topic, comments, taskid, classcode, xdspid, xdsdocentryuid, practicecode, version, pathway, docname, authors, role, expression, repositoryuniqueid, nhsid, confcode, formatcode, facilitycode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pbradley lth $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=1) Workflow Management NA urn:ihe:iti:xdw:2013:workflowInstanceId LAC-PS1 %!s(int=0) pathalert PATHALERT-9999999468 Clinical pbradley Clinical Path_Anomaly_Identified ODD 9999999468 N urn:ihe:iti:xdw:2011:workflowDoc Social Care]
2022/11/02 14:09:01.988239 tukxdw.go:738: Created Event ID :  = 108
2022/11/02 14:09:01.988280 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 14:09:01.988338 tukxdw.go:474: Created Output Part - Path_Anomaly_Identified
2022/11/02 14:09:01.988355 tukxdw.go:474: Created Output Part - Path1^^TypeCode_LPRES_2022
2022/11/02 14:09:01.988379 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 14:09:01.988397 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 14:09:01.988496 tukdbint.go:917: Created Prepared Statement INSERT INTO events (user, role, comments, version, taskid, confcode, xdspid, nhsid, authors, pathway, docname, formatcode, facilitycode, xdsdocentryuid, repositoryuniqueid, org, topic, classcode, practicecode, expression) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [pbradley Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow %!s(int=0) %!s(int=2) N NA 9999999468 Clinical pbradley pathalert PATHALERT-9999999468 urn:ihe:iti:xdw:2011:workflowDoc Social Care urn:ihe:iti:xdw:2013:workflowInstanceId ODD lth $XDSDocumentEntryTypeCode Workflow Management LAC-PS1 Path_Anomily_Claimed]
2022/11/02 14:09:01.990383 tukxdw.go:738: Created Event ID :  = 109
2022/11/02 14:09:01.990421 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 14:09:01.990438 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 14:09:01.990454 tukxdw.go:464: Created Input Part - Path1^^TypeCode_LPRES_2022
2022/11/02 14:09:01.990468 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 14:09:01.990481 tukxdw.go:474: Created Output Part - Path2^^TypeCode_LPRES_2022
2022/11/02 14:09:01.990496 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 14:09:01.990510 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 14:09:01.990578 tukdbint.go:917: Created Prepared Statement INSERT INTO events (taskid, confcode, facilitycode, expression, org, role, topic, comments, practicecode, authors, nhsid, user, pathway, classcode, formatcode, xdsdocentryuid, repositoryuniqueid, docname, xdspid, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [%!s(int=3) N Social Care Path_Results lth Clinical $XDSDocumentEntryTypeCode User pbradley from lth in the role of Clinical created new pathalert Workflow LAC-PS1 Clinical pbradley 9999999468 pbradley pathalert Workflow Management urn:ihe:iti:xdw:2011:workflowDoc urn:ihe:iti:xdw:2013:workflowInstanceId ODD PATHALERT-9999999468 NA %!s(int=0)]
2022/11/02 14:09:01.992492 tukxdw.go:738: Created Event ID :  = 110
2022/11/02 14:09:01.992556 tukxdw.go:444: Creating Workflow Task ID - 3 Name - Path_Results
2022/11/02 14:09:01.992592 tukxdw.go:464: Created Input Part - Path_Anomaly_Claimed
2022/11/02 14:09:01.992615 tukxdw.go:464: Created Input Part - Path2^^TypeCode_LPRES_2022
2022/11/02 14:09:01.992631 tukxdw.go:474: Created Output Part - Path3^^TypeCode_LPRES_2022
2022/11/02 14:09:01.992652 tukxdw.go:484: Set Workflow Task Event 3 create status to COMPLETE
2022/11/02 14:09:01.992666 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 14:09:01.993164 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 14:09:01.993493 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (pathway, nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211140901985.97065 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211140901985.97065" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T14:09:01.985654Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211140901985.97065^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>3</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T14:09:01.985654Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T14:09:01.985654Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <output>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>108</id>
          <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T14:09:01.985654Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T14:09:01.985654Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>109</id>
          <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>TASK</taskType>
          <name>Path_Results</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T14:09:01.985654Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T14:09:01.985654Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Provider Claimed Health Assessment E-Referral</description>
        <input>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path3^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path3^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>110</id>
          <eventTime>2022-11-02T14:09:01.985654Z</eventTime>
          <identifier>3</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(1)","startbytime":"hour(1)","completebytime":"hour(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Identified)"}},{"completion":{"condition":"output(Path1^^TypeCode_LPRES_2022)"}}],"output":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(1)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(LAC2^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Path_Results","description":"Provider Claimed Health Assessment E-Referral","actualowner":"","expirationtime":"day(2)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path3^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path3^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(int=0) %!s(bool=false)]
2022/11/02 14:09:01.995404 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/02 15:16:58.521491 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 15:16:58.522759 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 15:16:58.522829 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 15:16:58.522924 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 15:16:58.522950 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 15:16:58.523051 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE isxdsmeta= ? AND name= ? - Values [%!s(bool=true) pathalert_meta]
2022/11/02 15:16:58.541776 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 15:16:58.541853 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 15:16:58.542946 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 15:16:58.543003 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 15:16:58.543038 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 15:16:58.544193 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 15:16:58.544291 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 15:16:58.546497 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 15:16:58.547499 tukdbint.go:917: Created Prepared Statement INSERT INTO events (docname, practicecode, repositoryuniqueid, nhsid, org, pathway, confcode, xdspid, user, taskid, classcode, formatcode, expression, authors, comments, facilitycode, xdsdocentryuid, role, topic, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [PATHALERT-9999999468 LAC-PS1 ODD 9999999468 lth pathalert N NA pbradley %!s(int=1) Workflow Management urn:ihe:iti:xdw:2011:workflowDoc Path_Anomaly_Identified Clinical pbradley User pbradley from lth in the role of Clinical created new pathalert Workflow Social Care urn:ihe:iti:xdw:2013:workflowInstanceId Clinical $XDSDocumentEntryTypeCode %!s(int=0)]
2022/11/02 15:16:58.556771 tukxdw.go:738: Created Event ID :  = 113
2022/11/02 15:16:58.556814 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 15:16:58.556863 tukxdw.go:474: Created Output Part - Path_Anomaly_Identified
2022/11/02 15:16:58.556880 tukxdw.go:474: Created Output Part - Path1^^TypeCode_LPRES_2022
2022/11/02 15:16:58.556906 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 15:16:58.556924 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 15:16:58.557023 tukdbint.go:917: Created Prepared Statement INSERT INTO events (nhsid, role, formatcode, practicecode, xdsdocentryuid, repositoryuniqueid, docname, org, taskid, comments, classcode, confcode, facilitycode, authors, pathway, version, expression, xdspid, user, topic) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [9999999468 Clinical urn:ihe:iti:xdw:2011:workflowDoc LAC-PS1 urn:ihe:iti:xdw:2013:workflowInstanceId ODD PATHALERT-9999999468 lth %!s(int=2) User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management N Social Care Clinical pbradley pathalert %!s(int=0) Path_Anomily_Claimed NA pbradley $XDSDocumentEntryTypeCode]
2022/11/02 15:16:58.560005 tukxdw.go:738: Created Event ID :  = 114
2022/11/02 15:16:58.560043 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 15:16:58.560061 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 15:16:58.560076 tukxdw.go:464: Created Input Part - Path1^^TypeCode_LPRES_2022
2022/11/02 15:16:58.560090 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 15:16:58.560104 tukxdw.go:474: Created Output Part - Path2^^TypeCode_LPRES_2022
2022/11/02 15:16:58.560119 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 15:16:58.560147 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 15:16:58.560208 tukdbint.go:917: Created Prepared Statement INSERT INTO events (facilitycode, practicecode, xdspid, xdsdocentryuid, user, pathway, classcode, formatcode, version, topic, taskid, authors, org, nhsid, docname, expression, role, comments, confcode, repositoryuniqueid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Social Care LAC-PS1 NA urn:ihe:iti:xdw:2013:workflowInstanceId pbradley pathalert Workflow Management urn:ihe:iti:xdw:2011:workflowDoc %!s(int=0) $XDSDocumentEntryTypeCode %!s(int=3) Clinical pbradley lth 9999999468 PATHALERT-9999999468 Path_Results Clinical User pbradley from lth in the role of Clinical created new pathalert Workflow N ODD]
2022/11/02 15:16:58.565698 tukxdw.go:738: Created Event ID :  = 115
2022/11/02 15:16:58.565742 tukxdw.go:444: Creating Workflow Task ID - 3 Name - Path_Results
2022/11/02 15:16:58.565762 tukxdw.go:464: Created Input Part - Path_Anomaly_Claimed
2022/11/02 15:16:58.565778 tukxdw.go:464: Created Input Part - Path2^^TypeCode_LPRES_2022
2022/11/02 15:16:58.565792 tukxdw.go:474: Created Output Part - Path3^^TypeCode_LPRES_2022
2022/11/02 15:16:58.565823 tukxdw.go:484: Set Workflow Task Event 3 create status to COMPLETE
2022/11/02 15:16:58.565838 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 15:16:58.566152 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 15:16:58.566417 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (pathway, nhsid, xdw_key, xdw_uid, xdw_doc, xdw_def, version, published) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211151658547.52074 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211151658547.52074" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T15:16:58.54738Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211151658547.52074^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>3</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T15:16:58.54738Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T15:16:58.54738Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <output>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>113</id>
          <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T15:16:58.54738Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T15:16:58.54738Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path1^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path1^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
        <output>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>114</id>
          <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>3</id>
          <taskType>TASK</taskType>
          <name>Path_Results</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T15:16:58.54738Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T15:16:58.54738Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Provider Claimed Health Assessment E-Referral</description>
        <input>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="Path2^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path2^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path3^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path3^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>115</id>
          <eventTime>2022-11-02T15:16:58.54738Z</eventTime>
          <identifier>3</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(2)","completionBehavior":[{"completion":{"condition":"task(3)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(1)","startbytime":"hour(1)","completebytime":"hour(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Identified)"}},{"completion":{"condition":"output(Path1^^TypeCode_LPRES_2022)"}}],"output":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(1)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(LAC2^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path1^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Path_Results","description":"Provider Claimed Health Assessment E-Referral","actualowner":"","expirationtime":"day(2)","startbytime":"","completebytime":"day(2)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path3^^TypeCode_EPUT_2018)"}}],"input":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"},{"name":"Path2^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path3^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]} %!s(int=0) %!s(bool=false)]
2022/11/02 15:16:58.568402 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/02 17:17:46.706143 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 17:17:46.707533 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 17:17:46.707619 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 17:17:46.708696 main.go:193: Loaded subscribe.xml 
2022/11/02 17:17:46.708757 main.go:153: Persisting XML Template subscribe.xml
2022/11/02 17:17:46.708866 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/02 17:17:46.738429 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/02 17:17:46.755530 main.go:193: Loaded brokerack.xml 
2022/11/02 17:17:46.755577 main.go:153: Persisting XML Template brokerack.xml
2022/11/02 17:17:46.755618 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/02 17:17:46.757646 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack %!s(bool=true)]
2022/11/02 17:17:46.760277 main.go:193: Loaded cancel.xml 
2022/11/02 17:17:46.760315 main.go:153: Persisting XML Template cancel.xml
2022/11/02 17:17:46.760350 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/02 17:17:46.763606 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 17:17:46.765698 main.go:193: Loaded stsrst.xml 
2022/11/02 17:17:46.765731 main.go:153: Persisting XML Template stsrst.xml
2022/11/02 17:17:46.765777 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) stsrst]
2022/11/02 17:17:46.767583 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}} stsrst %!s(bool=true)]
2022/11/02 17:17:46.772451 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/02 17:17:46.772495 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/02 17:17:46.772543 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) PRPA_IN201305UV02]
2022/11/02 17:17:46.776274 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/02 17:17:46.779063 main.go:193: Loaded xdsodd.xml 
2022/11/02 17:17:46.779103 main.go:153: Persisting XML Template xdsodd.xml
2022/11/02 17:17:46.779146 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) xdsodd]
2022/11/02 17:17:46.781264 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/02 17:17:46.784200 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/02 17:17:46.784233 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/02 17:17:46.784263 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/02 17:17:46.787679 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/02 17:17:46.791733 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/02 17:17:46.791767 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/02 17:17:46.791814 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/02 17:17:46.794631 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/02 17:17:46.798710 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/02 17:17:46.798742 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/02 17:17:46.798770 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/02 17:17:46.801144 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/02 17:17:46.805587 main.go:193: Loaded pathwayoptions.html 
2022/11/02 17:17:46.805687 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/02 17:17:46.805762 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/02 17:17:46.807322 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedID .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedID .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:17:46.810454 main.go:193: Loaded pixmpatient.html 
2022/11/02 17:17:46.810483 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/02 17:17:46.810509 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/02 17:17:46.813011 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedID ($event.GetMappedID (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/02 17:17:46.819181 main.go:193: Loaded subscriptions.html 
2022/11/02 17:17:46.819401 main.go:171: Persisting HTML Template subscriptions.html
2022/11/02 17:17:46.819500 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/02 17:17:46.823557 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedID $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/02 17:17:46.827493 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/02 17:17:46.827518 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/02 17:17:46.827560 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/02 17:17:46.829449 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/02 17:17:46.834749 main.go:193: Loaded workflowtasks.html 
2022/11/02 17:17:46.834786 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/02 17:17:46.834829 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/02 17:17:46.837259 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/02 17:17:46.841565 main.go:193: Loaded dashboardwidget.html 
2022/11/02 17:17:46.841594 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/02 17:17:46.841622 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/02 17:17:46.844335 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/02 17:17:46.848091 main.go:193: Loaded snip_workflow_header.html 
2022/11/02 17:17:46.848121 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/02 17:17:46.848157 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/02 17:17:46.850597 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/02 17:17:46.853675 main.go:193: Loaded notificationwidget.html 
2022/11/02 17:17:46.853719 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/02 17:17:46.853754 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/02 17:17:46.855613 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/02 17:17:46.859719 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/02 17:17:46.859751 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/02 17:17:46.859780 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/02 17:17:46.865737 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}} snip_workflow_col_patient %!s(bool=false)]
2022/11/02 17:17:46.869147 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/02 17:17:46.869186 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/02 17:17:46.869223 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 17:17:46.871738 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/02 17:17:46.875527 main.go:193: Loaded workflows.html 
2022/11/02 17:17:46.875564 main.go:171: Persisting HTML Template workflows.html
2022/11/02 17:17:46.875620 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/02 17:17:46.878067 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflows %!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}}]
2022/11/02 17:17:46.884642 main.go:193: Loaded adminspawidget.html 
2022/11/02 17:17:46.884687 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/02 17:17:46.884735 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) adminspawidget]
2022/11/02 17:17:46.888660 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 17:17:46.892708 main.go:193: Loaded spawidget.html 
2022/11/02 17:17:46.892735 main.go:171: Persisting HTML Template spawidget.html
2022/11/02 17:17:46.892775 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) spawidget]
2022/11/02 17:17:46.895370 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedID .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 17:17:46.899236 main.go:193: Loaded newworkflow.html 
2022/11/02 17:17:46.899271 main.go:171: Persisting HTML Template newworkflow.html
2022/11/02 17:17:46.899305 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/02 17:17:46.901663 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/02 17:17:46.904231 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/02 17:17:46.904268 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/02 17:17:46.904324 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/02 17:17:46.906934 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/02 17:17:46.909236 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/02 17:17:46.909262 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/02 17:17:46.909305 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/02 17:17:46.913234 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/02 17:17:46.915759 main.go:193: Loaded footer.html 
2022/11/02 17:17:46.915801 main.go:171: Persisting HTML Template footer.html
2022/11/02 17:17:46.915836 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/02 17:17:46.918020 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/02 17:17:46.922082 main.go:193: Loaded events.html 
2022/11/02 17:17:46.922110 main.go:171: Persisting HTML Template events.html
2022/11/02 17:17:46.922139 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/02 17:17:46.926162 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/02 17:17:46.927887 main.go:193: Loaded header.html 
2022/11/02 17:17:46.927919 main.go:171: Persisting HTML Template header.html
2022/11/02 17:17:46.927957 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/02 17:17:46.929199 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/02 17:17:46.931184 main.go:193: Loaded pixpatient.html 
2022/11/02 17:17:46.931210 main.go:171: Persisting HTML Template pixpatient.html
2022/11/02 17:17:46.931242 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/02 17:17:46.933296 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedID .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/02 17:17:46.935853 main.go:193: Loaded horizontalline.html 
2022/11/02 17:17:46.935903 main.go:171: Persisting HTML Template horizontalline.html
2022/11/02 17:17:46.935930 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/02 17:17:46.937988 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}} horizontalline]
2022/11/02 17:17:46.940809 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/02 17:17:46.940839 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/02 17:17:46.940876 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/02 17:17:46.942595 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/02 17:17:46.944736 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/02 17:17:46.944767 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/02 17:17:46.944794 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 17:17:46.947617 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/02 17:17:46.950202 main.go:193: Loaded workflow.html 
2022/11/02 17:17:46.950233 main.go:171: Persisting HTML Template workflow.html
2022/11/02 17:17:46.950261 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/02 17:17:46.952587 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/02 17:17:46.954746 main.go:193: Loaded usereventform.html 
2022/11/02 17:17:46.954782 main.go:171: Persisting HTML Template usereventform.html
2022/11/02 17:17:46.954812 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/02 17:17:46.956382 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/02 17:17:46.958679 main.go:193: Loaded wfconfig.html 
2022/11/02 17:17:46.958709 main.go:171: Persisting HTML Template wfconfig.html
2022/11/02 17:17:46.958737 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) wfconfig]
2022/11/02 17:17:46.960678 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:17:46.963416 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/02 17:17:46.963447 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/02 17:17:46.963474 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/02 17:17:46.964847 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}} snip_workflow_link_timeline]
2022/11/02 17:17:46.967457 main.go:193: Loaded timelinewidget.html 
2022/11/02 17:17:46.967488 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/02 17:17:46.967516 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/02 17:17:46.969438 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{else}}
                                   <p style="color:darkgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                    <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/02 17:20:05.596160 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 17:20:05.596463 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 17:20:05.596527 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 17:20:05.604230 main.go:193: Loaded subscribe.xml 
2022/11/02 17:20:05.604276 main.go:153: Persisting XML Template subscribe.xml
2022/11/02 17:20:05.604408 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/02 17:20:05.624740 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}} subscribe]
2022/11/02 17:20:05.643654 main.go:193: Loaded brokerack.xml 
2022/11/02 17:20:05.643698 main.go:153: Persisting XML Template brokerack.xml
2022/11/02 17:20:05.643734 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/02 17:20:05.644480 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}} brokerack]
2022/11/02 17:20:05.647669 main.go:193: Loaded cancel.xml 
2022/11/02 17:20:05.647708 main.go:153: Persisting XML Template cancel.xml
2022/11/02 17:20:05.647756 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [cancel %!s(bool=true)]
2022/11/02 17:20:05.649054 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 17:20:05.651377 main.go:193: Loaded stsrst.xml 
2022/11/02 17:20:05.651412 main.go:153: Persisting XML Template stsrst.xml
2022/11/02 17:20:05.651648 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/02 17:20:05.652255 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/02 17:20:05.659110 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/02 17:20:05.659149 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/02 17:20:05.659209 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/02 17:20:05.659852 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}} PRPA_IN201305UV02]
2022/11/02 17:20:05.665673 main.go:193: Loaded xdsodd.xml 
2022/11/02 17:20:05.665708 main.go:153: Persisting XML Template xdsodd.xml
2022/11/02 17:20:05.665738 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/02 17:20:05.666405 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/02 17:20:05.674442 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/02 17:20:05.674477 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/02 17:20:05.674525 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_status]
2022/11/02 17:20:05.675118 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/02 17:20:05.680437 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/02 17:20:05.680467 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/02 17:20:05.680640 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_completeby %!s(bool=false)]
2022/11/02 17:20:05.683829 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}} snip_workflow_col_completeby]
2022/11/02 17:20:05.689705 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/02 17:20:05.689740 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/02 17:20:05.689781 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_section_docevents %!s(bool=false)]
2022/11/02 17:20:05.690559 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_section_docevents %!s(bool=false) {{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}}]
2022/11/02 17:20:05.696018 main.go:193: Loaded pathwayoptions.html 
2022/11/02 17:20:05.696086 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/02 17:20:05.696184 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/02 17:20:05.697090 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedID .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedID .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:20:05.701332 main.go:193: Loaded pixmpatient.html 
2022/11/02 17:20:05.701361 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/02 17:20:05.701390 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/02 17:20:05.702474 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedID ($event.GetMappedID (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/02 17:20:05.706559 main.go:193: Loaded subscriptions.html 
2022/11/02 17:20:05.706588 main.go:171: Persisting HTML Template subscriptions.html
2022/11/02 17:20:05.706618 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/02 17:20:05.707190 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedID $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/02 17:20:05.713169 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/02 17:20:05.713242 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/02 17:20:05.713275 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_col_status %!s(bool=false)]
2022/11/02 17:20:05.714105 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}} snip_workflow_task_col_status]
2022/11/02 17:20:05.717104 main.go:193: Loaded workflowtasks.html 
2022/11/02 17:20:05.717335 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/02 17:20:05.717463 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/02 17:20:05.718072 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/02 17:20:05.721670 main.go:193: Loaded dashboardwidget.html 
2022/11/02 17:20:05.721862 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/02 17:20:05.721907 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/02 17:20:05.723259 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/02 17:20:05.729636 main.go:193: Loaded snip_workflow_header.html 
2022/11/02 17:20:05.729673 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/02 17:20:05.729778 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_header %!s(bool=false)]
2022/11/02 17:20:05.730410 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}} snip_workflow_header %!s(bool=false)]
2022/11/02 17:20:05.735011 main.go:193: Loaded notificationwidget.html 
2022/11/02 17:20:05.735052 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/02 17:20:05.735086 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/02 17:20:05.736344 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}} notificationwidget %!s(bool=false)]
2022/11/02 17:20:05.742373 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/02 17:20:05.742405 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/02 17:20:05.742440 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/02 17:20:05.743181 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/02 17:20:05.746576 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/02 17:20:05.746612 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/02 17:20:05.746645 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event_header %!s(bool=false)]
2022/11/02 17:20:05.748153 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/02 17:20:05.753336 main.go:193: Loaded workflows.html 
2022/11/02 17:20:05.753379 main.go:171: Persisting HTML Template workflows.html
2022/11/02 17:20:05.753418 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/02 17:20:05.754158 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows %!s(bool=false)]
2022/11/02 17:20:05.758236 main.go:193: Loaded adminspawidget.html 
2022/11/02 17:20:05.758270 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/02 17:20:05.758341 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/02 17:20:05.759300 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [adminspawidget %!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 17:20:05.763205 main.go:193: Loaded spawidget.html 
2022/11/02 17:20:05.763239 main.go:171: Persisting HTML Template spawidget.html
2022/11/02 17:20:05.763270 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/02 17:20:05.763983 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedID .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 17:20:05.770318 main.go:193: Loaded newworkflow.html 
2022/11/02 17:20:05.770349 main.go:171: Persisting HTML Template newworkflow.html
2022/11/02 17:20:05.770379 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/02 17:20:05.771099 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/02 17:20:05.775408 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/02 17:20:05.775445 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/02 17:20:05.775482 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_elapsedtime]
2022/11/02 17:20:05.776822 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/02 17:20:05.786310 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/02 17:20:05.786344 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/02 17:20:05.786373 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/02 17:20:05.787544 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event %!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}}]
2022/11/02 17:20:05.794072 main.go:193: Loaded footer.html 
2022/11/02 17:20:05.794106 main.go:171: Persisting HTML Template footer.html
2022/11/02 17:20:05.794140 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/02 17:20:05.794943 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [footer %!s(bool=false) {{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}}]
2022/11/02 17:20:05.800614 main.go:193: Loaded events.html 
2022/11/02 17:20:05.800649 main.go:171: Persisting HTML Template events.html
2022/11/02 17:20:05.800692 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/02 17:20:05.801510 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/02 17:20:05.809031 main.go:193: Loaded header.html 
2022/11/02 17:20:05.809065 main.go:171: Persisting HTML Template header.html
2022/11/02 17:20:05.809100 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/02 17:20:05.809801 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/02 17:20:05.816671 main.go:193: Loaded pixpatient.html 
2022/11/02 17:20:05.816705 main.go:171: Persisting HTML Template pixpatient.html
2022/11/02 17:20:05.816754 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/02 17:20:05.817447 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedID .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/02 17:20:05.825296 main.go:193: Loaded horizontalline.html 
2022/11/02 17:20:05.825358 main.go:171: Persisting HTML Template horizontalline.html
2022/11/02 17:20:05.825393 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/02 17:20:05.826056 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/02 17:20:05.835469 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/02 17:20:05.835527 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/02 17:20:05.835557 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/02 17:20:05.837866 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_events %!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}}]
2022/11/02 17:20:05.842608 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/02 17:20:05.842645 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/02 17:20:05.842675 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 17:20:05.843580 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/02 17:20:05.851671 main.go:193: Loaded workflow.html 
2022/11/02 17:20:05.851850 main.go:171: Persisting HTML Template workflow.html
2022/11/02 17:20:05.851884 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflow %!s(bool=false)]
2022/11/02 17:20:05.853087 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}} workflow]
2022/11/02 17:20:05.867171 main.go:193: Loaded usereventform.html 
2022/11/02 17:20:05.867205 main.go:171: Persisting HTML Template usereventform.html
2022/11/02 17:20:05.867257 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) usereventform]
2022/11/02 17:20:05.868025 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/02 17:20:05.876218 main.go:193: Loaded wfconfig.html 
2022/11/02 17:20:05.876253 main.go:171: Persisting HTML Template wfconfig.html
2022/11/02 17:20:05.876298 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/02 17:20:05.877190 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:20:05.884208 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/02 17:20:05.884238 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/02 17:20:05.884273 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/02 17:20:05.887830 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/02 17:20:05.893146 main.go:193: Loaded timelinewidget.html 
2022/11/02 17:20:05.893180 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/02 17:20:05.893248 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/02 17:20:05.896020 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [timelinewidget %!s(bool=false) {{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{else}}
                                   <p style="color:darkgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                    <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}}]
2022/11/02 17:24:24.587287 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 17:24:24.588327 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 17:24:24.588405 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 17:24:24.590181 main.go:193: Loaded subscribe.xml 
2022/11/02 17:24:24.590228 main.go:153: Persisting XML Template subscribe.xml
2022/11/02 17:24:24.590374 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscribe %!s(bool=true)]
2022/11/02 17:24:24.603724 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscribe %!s(bool=true) {{define "subscribe"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:s="http://www.w3.org/2001/XMLSchema"
    xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <SOAP-ENV:Header>
        <wsa:Action SOAP-ENV:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action>
        <wsa:MessageID>urn:uuid:{{newuuid}}</wsa:MessageID>
        <wsa:ReplyTo SOAP-ENV:mustUnderstand="true">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To>{{.EventServices.BrokerService.Scheme}}://{{.EventServices.BrokerService.Host}}:{{.EventServices.BrokerService.Port}}/{{.EventServices.BrokerService.Url}}</wsa:To>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <wsnt:Subscribe xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
            xmlns:a="http://www.w3.org/2005/08/addressing"
            xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0"
            xmlns:wsa="http://www.w3.org/2005/08/addressing">
            <wsnt:ConsumerReference>
                <wsa:Address>{{.EventServices.EventService.Scheme}}://{{.EventServices.EventService.Host}}:{{.EventServices.EventService.Port}}/{{.EventServices.EventService.BaseURLPath}}/{{.EventServices.EventService.EventUrl}}</wsa:Address>
            </wsnt:ConsumerReference>
            <wsnt:Filter>
                <wsnt:TopicExpression Dialect="http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple">ihe:FullDocumentEntry</wsnt:TopicExpression>
                <!-- <rim:AdhocQuery id="urn:uuid:14d4debf-8f97-4251-9a74-a90016b0af0d"> -->
                <rim:AdhocQuery id="urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79">
                    <rim:Slot name="$XDSDocumentEntryTypeCode">
                        <rim:ValueList>
                            <rim:Value>('{{.Expression}}')</rim:Value>
                        </rim:ValueList>
                    </rim:Slot>
                </rim:AdhocQuery>           
                </wsnt:Filter>
            </wsnt:Subscribe>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope>
{{end}}]
2022/11/02 17:24:24.616009 main.go:193: Loaded brokerack.xml 
2022/11/02 17:24:24.616046 main.go:153: Persisting XML Template brokerack.xml
2022/11/02 17:24:24.616088 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [brokerack %!s(bool=true)]
2022/11/02 17:24:24.619405 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [brokerack %!s(bool=true) {{define "brokerack"}}
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <SOAP-ENV:Body/>
</SOAP-ENV:Envelope>
{{end}}]
2022/11/02 17:24:24.625122 main.go:193: Loaded cancel.xml 
2022/11/02 17:24:24.625162 main.go:153: Persisting XML Template cancel.xml
2022/11/02 17:24:24.625197 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=true) cancel]
2022/11/02 17:24:24.627825 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [cancel %!s(bool=true) {{define "cancel"}}
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header>
        <Action xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">http://docs.oasis-open.org/wsn/bw-2/SubscriptionManager/UnsubscribeRequest</Action>
        <MessageID xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">urn:uuid:{{newuuid}}</MessageID>
        <To xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">{{.BrokerRef}}</To>
        <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="true">
            <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
        </ReplyTo>
    </soap:Header>
    <soap:Body>
        <Unsubscribe xmlns="http://docs.oasis-open.org/wsn/b-2" xmlns:ns2="http://www.w3.org/2005/08/addressing" xmlns:ns3="http://docs.oasis-open.org/wsrf/bf-2" xmlns:ns4="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0" xmlns:ns5="urn:oasis:names:tc:ebxml-regrep:xsd:rs:3.0" xmlns:ns6="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0" xmlns:ns7="http://docs.oasis-open.org/wsn/t-1" xmlns:ns8="http://docs.oasis-open.org/wsrf/r-2"/>
    </soap:Body>
</soap:Envelope>
{{end}}]
2022/11/02 17:24:24.631441 main.go:193: Loaded stsrst.xml 
2022/11/02 17:24:24.631478 main.go:153: Persisting XML Template stsrst.xml
2022/11/02 17:24:24.631518 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [stsrst %!s(bool=true)]
2022/11/02 17:24:24.634334 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [stsrst %!s(bool=true) {{define "stsrst"}}
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" xmlns:trs="urn:tiani-spirit:sts">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security soapenv:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsse:UsernameToken wsu:Id="UsernameToken-{{newuuid}}">
        <wsse:Username>{{.EventServices.STSService.User}}</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">{{.EventServices.STSService.Password}}</wsse:Password>
        <wsu:Created>{{newzulu}}</wsu:Created>
      </wsse:UsernameToken>
    </wsse:Security>
    <wsa:To>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:To>
    <wsa:MessageID>{{newuuid}}</wsa:MessageID>
    <wsa:Action>http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue</wsa:Action>
  </soapenv:Header>
  <soapenv:Body>
    <wst:RequestSecurityToken xmlns:wst="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
      <wst:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{newzulu}}</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">{{new30mfuturezulu}}</wsu:Expires>
      </wst:Lifetime>
      <wst:RequestType>http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue</wst:RequestType>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <wsa:EndpointReference xmlns:wsa="http://www.w3.org/2005/08/addressing">
          <wsa:Address>{{.EventServices.STSService.Scheme}}://{{.EventServices.STSService.Host}}:{{.EventServices.STSService.Port}}/{{.EventServices.STSService.Url}}</wsa:Address>
        </wsa:EndpointReference>
      </wsp:AppliesTo>
      <wst:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</wst:TokenType>
      <wst:Claims Dialect="urn:{{.EventServices.STSService.ClaimDialect}}">
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-role">
          <trs:ClaimValue>{{.EventServices.STSService.Role}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-purpose-of-use">
          <trs:ClaimValue>{{.EventServices.STSService.POU}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-subject-id">
          <trs:ClaimValue>{{.EventServices.STSService.User}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#string" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization">
          <trs:ClaimValue>{{.EventServices.STSService.Org}}</trs:ClaimValue>
        </trs:ClaimType>
        <trs:ClaimType DataType="http://www.w3.org/2001/XMLSchema#anyURI" name="urn:{{.EventServices.STSService.ClaimDialect}}:requested-organization-id">
          <trs:ClaimValue>{{.EventServices.STSService.ClaimValue}}</trs:ClaimValue>
        </trs:ClaimType>
      </wst:Claims>
    </wst:RequestSecurityToken>
  </soapenv:Body>
</soapenv:Envelope>
{{end}}]
2022/11/02 17:24:24.637777 main.go:193: Loaded PRPA_IN201305UV02.xml 
2022/11/02 17:24:24.637812 main.go:153: Persisting XML Template PRPA_IN201305UV02.xml
2022/11/02 17:24:24.637849 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [PRPA_IN201305UV02 %!s(bool=true)]
2022/11/02 17:24:24.640322 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [PRPA_IN201305UV02 %!s(bool=true) {{define "PRPA_IN201305UV02"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <S:Header xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
    <wsse:Security S:mustUnderstand="true" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      {{.SAML}}
    </wsse:Security>
    <To xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">{{.IHEPIXSrvc.Scheme}}://{{.IHEPIXSrvc.Host}}:{{.IHEPIXSrvc.Port}}/{{.IHEPIXSrvc.Url}}</To>
    <Action S:mustUnderstand="true" xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">urn:hl7-org:v3:PRPA_IN201305UV02</Action>
    <ReplyTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </ReplyTo>
    <FaultTo xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>
    </FaultTo>
    <MessageID xmlns="http://www.w3.org/2005/08/addressing" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">uuid:{{.ContextID}}</MessageID>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx" xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:stctx="com.spirit.transaction.ctx">
      <context-identifier>urn:uuid:{{.ContextID}}</context-identifier>
    </stctx:context>
  </S:Header>
  <S:Body xmlns:S="http://www.w3.org/2003/05/soap-envelope">
    <PRPA_IN201305UV02 ITSVersion="XML_1.0" xmlns="urn:hl7-org:v3">
      <id extension="{{.ContextID}}" root="2.76.43.7.43.23"/>
      <creationTime value="{{newdatetime}}"/>
      <versionCode code="V3PR1"/>
      <interactionId extension="PRPA_IN201305UV02" root="2.16.840.1.113883.1.6"/>
      <processingCode code="P"/>
      <processingModeCode code="T"/>
      <acceptAckCode code="AL"/>
      <receiver typeCode="RCV">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.2"/>
            </representedOrganization>
          </asAgent>
        </device>
      </receiver>
      <sender typeCode="SND">
        <device classCode="DEV" determinerCode="INSTANCE">
          <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.1"/>
          <asAgent classCode="AGNT">
            <representedOrganization classCode="ORG" determinerCode="INSTANCE">
              <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1"/>
            </representedOrganization>
          </asAgent>
        </device>
      </sender>
      <controlActProcess classCode="CACT" moodCode="EVN">
        <code code="PRPA_TE201305UV02" codeSystem="2.16.840.1.113883.1.6"/>
        <authorOrPerformer typeCode="AUT">
          <assignedPerson classCode="ASSIGNED">
            <id displayable="false" extension="1" root="1.2.40.0.34.99.10.1.10.1.2"/>
          </assignedPerson>
        </authorOrPerformer>
        <queryByParameter>
          <queryId extension="1639746943061" root="1.3.6.1.4.1.21998.2.1.10.15"/>
          <statusCode code="new"/>
          <responseModalityCode code="R"/>
          <responsePriorityCode code="I"/>
          <matchCriterionList>
            <matchAlgorithm>
              <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ST">QARD</value>
              <semanticsText>MatchAlgorithm</semanticsText>
            </matchAlgorithm>
          </matchCriterionList>
          <parameterList>
            <livingSubjectId>
              <value extension="{{.PID}}" root="{{.PIDOid}}"/>
              <semanticsText>LivingSubject.id</semanticsText>
            </livingSubjectId>
            <patientStatusCode>
              <value code="active" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="CS"/>
              <semanticsText>Patient.statusCode</semanticsText>
            </patientStatusCode>
          </parameterList>
        </queryByParameter>
      </controlActProcess>
    </PRPA_IN201305UV02>
  </S:Body>
</env:Envelope>
{{end}}]
2022/11/02 17:24:24.642306 main.go:193: Loaded xdsodd.xml 
2022/11/02 17:24:24.642338 main.go:153: Persisting XML Template xdsodd.xml
2022/11/02 17:24:24.642434 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [xdsodd %!s(bool=true)]
2022/11/02 17:24:24.646138 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [xdsodd %!s(bool=true) {{define "xdsodd"}}
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <env:Header xmlns:addressing="http://www.w3.org/2005/08/addressing" xmlns:stctx="com.spirit.transaction.ctx">
    <addressing:To env:mustUnderstand="1">{{.EventServices.XDSRepService.Scheme}}://{{.EventServices.XDSRepService.Host}}:{{.EventServices.XDSRepService.Port}}/{{.EventServices.XDSRepService.Url}}</addressing:To>
    <addressing:Action env:mustUnderstand="1">urn:ihe:iti:2007:RegisterDocumentSet-b</addressing:Action>
    <addressing:MessageID>{{newuuid}}</addressing:MessageID>
    <addressing:ReplyTo>
      <addressing:Address>http://www.w3.org/2005/08/addressing/anonymous</addressing:Address>
    </addressing:ReplyTo>
    <stctx:context xmlns="http://docs.oasis-open.org/ws-caf/2005/10/wsctx">
      <context-identifier>{{newuuid}}</context-identifier>
    </stctx:context>
  </env:Header>
  <env:Body>
    <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
      <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
        <rim:ExtrinsicObject id="theDocument0" mimeType="{{.XDSOnDemandDocument.Mimetype}}" objectType="{{.XDSOnDemandDocument.Objecttype}}">
          <Slot name="repositoryUniqueId" xmlns="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
            <ValueList>
              <Value>{{.XDSOnDemandDocument.Repositoryuniqueid}}</Value>
            </ValueList>
          </Slot>
          <rim:Slot name="languageCode">
            <rim:ValueList>
              <rim:Value>{{.XDSOnDemandDocument.Languagecode}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientId">
            <rim:ValueList>
              <rim:Value>{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="serviceStartTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Slot name="sourcePatientInfo">
            <rim:ValueList>
              <rim:Value>PID-3|{{.REGId}}^^^&amp;{{.REGOid}}&amp;ISO</rim:Value>
              <rim:Value>PID-5|Test5^Patient5</rim:Value>
              <rim:Value>PID-7|05052017</rim:Value>
              <rim:Value>PID-8|F</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:93606bcf-9494-43ec-9b4e-a7748d1a838d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:41a5887f-8865-4c09-adf7-e362475b143a" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Classcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Classcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Classcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f0306f51-975f-434e-a61c-c59651d33983" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:cccf5598-8b07-4b77-a05e-ae952c785ead" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Practicesettingcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Practicesettingscheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Practicesettingvalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f4f85eac-e6cb-4883-b524-f2705394840f" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Confcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Confcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Confcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:f33fb8ac-18af-42cc-ae0e-ed0b0bdb91e1" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Facilitycode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Facilitycodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Facilitycodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:a09d5840-386c-46f2-b5ad-9c3699a4309d" classifiedObject="theDocument0" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Formatcode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Formatcodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Formatcodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:58a6f841-87b3-4a3e-92fd-a8ffeff98427" registryObject="theDocument0" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:2e82c1f6-a085-4c72-9da3-8640a32e42ab" registryObject="theDocument0" value="{{.XDSOnDemandDocument.DocID}}">
            <rim:Name>
              <rim:LocalizedString value="XDSDocumentEntry.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:ExtrinsicObject>
        <rim:RegistryPackage id="SubmissionSet" objectType="urn:oasis:names:tc:ebxml-regrep:ObjectType:RegistryObject:RegistryPackage">
          <rim:Slot name="submissionTime">
            <rim:ValueList>
              <rim:Value>{{newdatetime}}</rim:Value>
            </rim:ValueList>
          </rim:Slot>
          <rim:Name>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docname}}"/>
          </rim:Name>
          <rim:Description>
            <rim:LocalizedString value="{{.XDSOnDemandDocument.Docdesc}}"/>
          </rim:Description>
          <rim:Classification classificationScheme="urn:uuid:a7058bb9-b4e4-4307-ba5b-e3f0ab85e12d" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="">
            <rim:Slot name="authorInstitution">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorinstitution}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Slot name="authorPerson">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Authorperson}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
          </rim:Classification>
          <rim:Classification classificationScheme="urn:uuid:aa543740-bdda-424e-8c96-df4873be8500" classifiedObject="SubmissionSet" id="{{newid}}" nodeRepresentation="{{.XDSOnDemandDocument.Typecode}}">
            <rim:Slot name="codingScheme">
              <rim:ValueList>
                <rim:Value>{{.XDSOnDemandDocument.Typecodescheme}}</rim:Value>
              </rim:ValueList>
            </rim:Slot>
            <rim:Name>
              <rim:LocalizedString value="{{.XDSOnDemandDocument.Typecodevalue}}"/>
            </rim:Name>
          </rim:Classification>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:96fdda7c-d067-4183-912e-bf5ee74998a8" registryObject="SubmissionSet" value="{{newuuid}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.uniqueId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:6b5aea1a-874d-4603-a4bc-96a0a7b38446" registryObject="SubmissionSet" value="{{.REGId}}">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.patientId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
          <rim:ExternalIdentifier id="{{newid}}" identificationScheme="urn:uuid:554ac39e-e3fe-47fe-b233-965d2a147832" registryObject="SubmissionSet" value="2.16.840.1.113883.2.1.3.31.2.15.1.1.1.9">
            <rim:Name>
              <rim:LocalizedString value="XDSSubmissionSet.sourceId"/>
            </rim:Name>
          </rim:ExternalIdentifier>
        </rim:RegistryPackage>
        <rim:Classification classificationNode="urn:uuid:a54d6aa5-d40d-43f9-88c5-b4633d873bdd" classifiedObject="SubmissionSet" id="{{newid}}"/>
        <rim:Association associationType="urn:oasis:names:tc:ebxml-regrep:AssociationType:HasMember" id="as:{{newid}}" sourceObject="SubmissionSet" targetObject="theDocument0">
          <rim:Slot name="SubmissionSetStatus">
            <rim:ValueList>
              <rim:Value>Original</rim:Value>
            </rim:ValueList>
          </rim:Slot>
        </rim:Association>
      </rim:RegistryObjectList>
    </lcm:SubmitObjectsRequest>
  </env:Body>
</env:Envelope>
{{end}}]
2022/11/02 17:24:24.651091 main.go:193: Loaded snip_workflow_col_status.html 
2022/11/02 17:24:24.651121 main.go:171: Persisting HTML Template snip_workflow_col_status.html
2022/11/02 17:24:24.651151 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_status %!s(bool=false)]
2022/11/02 17:24:24.653289 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_status %!s(bool=false) {{define "snip_workflow_col_status"}} {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: rgb(239, 126, 220);" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-start" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: grey;" id="wfstatus" name="wfstatus"><i class="fa fa-bars" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: orange;" id="wfstatus" name="wfstatus"><i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
<a href="#" onclick="toggleWorkflowStatus()">
    <p style="color: green;" id="wfstatus" name="wfstatus"><i class="fa fa-hourglass-end" aria-hidden="true"></i> {{.XDWWorkflowDocument.WorkflowStatus}}</p>
</a>
{{end}} {{end}}]
2022/11/02 17:24:24.655302 main.go:193: Loaded snip_workflow_col_completeby.html 
2022/11/02 17:24:24.655330 main.go:171: Persisting HTML Template snip_workflow_col_completeby.html
2022/11/02 17:24:24.655371 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_col_completeby]
2022/11/02 17:24:24.657406 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_completeby %!s(bool=false) {{define "snip_workflow_col_completeby"}}
<label style="color: darkblue" for="completeby">Complete By</label> {{if overdue .}}
<p style="color: red;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{else}}
<p style="color: green;" id="completeby" name="completeby">{{completiontime .}}</p>
{{template "snip_workflow_col_elapsedtime" .}} {{end}} {{end}}]
2022/11/02 17:24:24.660911 main.go:193: Loaded snip_workflow_section_docevents.html 
2022/11/02 17:24:24.660939 main.go:171: Persisting HTML Template snip_workflow_section_docevents.html
2022/11/02 17:24:24.660976 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_section_docevents]
2022/11/02 17:24:24.663611 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "snip_workflow_section_docevents"}}
<div class="container-fluid">
    <div class="center-block">
    {{range .XDWWorkflowDocument.WorkflowStatusHistory.DocumentEvent}}
    <div class="row" id="workflowStatusDIV">
        <div class="col-sm-3">
            <label style="color: darkblue;" for="astatus">Current Status</label> {{if eq .ActualStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .ActualStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.ActualStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="pstatus">Previous Status</label> {{if eq .PreviousStatus "CREATED"}}
            <p style="color: grey;" id="astatus" name="pstatus">{{.PreviousStatus}} <i class="fa fa-bars" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "READY"}}
            <p style="color: rgb(238, 255, 0);" id="pstatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-start" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "IN_PROGRESS"}}
            <p style="color: orange;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
            </p>
            {{end}} {{if eq .PreviousStatus "COMPLETE"}}
            <p style="color: green;" id="astatus" name="astatus">{{.PreviousStatus}} <i class="fa fa-hourglass-end" aria-hidden="true"></i>
            </p>
            {{end}}
        </div>
        <div class="col-sm-3">
            <label style="color: darkblue;" for="evtime">Event Time</label>
            <p id="evtime" name="evtime">{{.EventTime}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Event Type</label>
            <p id="evtype" name="evtype">{{.EventType}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color: darkblue;" for="evtype">Author</label>
            <p id="author" name="author">{{.Author}}</p>
        </div>
    </div>
    {{end}}
    </div>
</div>
{{end}} snip_workflow_section_docevents %!s(bool=false)]
2022/11/02 17:24:24.666603 main.go:193: Loaded pathwayoptions.html 
2022/11/02 17:24:24.666633 main.go:171: Persisting HTML Template pathwayoptions.html
2022/11/02 17:24:24.666678 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pathwayoptions %!s(bool=false)]
2022/11/02 17:24:24.668572 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pathwayoptions %!s(bool=false) {{define "pathwayoptions"}}
{{template "header"}}
{{$pw := .Pathway}}
{{$event := .}}
<div class="form-group">
    <label for="pathway">Pathway</label>
    <select class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
        {{range .EventServices.Pathways.Pathways}}
        {{if eq . $pw}}
        <option selected>{{$event.GetMappedId .}}</option>
        {{end}}
        {{if ne . $pw}}
        <option>{{$event.GetMappedId .}}</option>
        {{end}}
        {{end}}
    </select>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:24:24.672627 main.go:193: Loaded pixmpatient.html 
2022/11/02 17:24:24.672657 main.go:171: Persisting HTML Template pixmpatient.html
2022/11/02 17:24:24.672686 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixmpatient %!s(bool=false)]
2022/11/02 17:24:24.676825 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixmpatient %!s(bool=false) {{define "pixmpatient"}}
{{template "header" .}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    {{if ne (len .PIXmResponse.Entry) 0}} 
    {{range $entry:= .PIXmResponse.Entry}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{range $entry.Resource.Name}}{{.Family}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{range $entry.Resource.Name}}{{.Given}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nameuse">Use</label>
            <p id="nameuse" name="nameuse">{{range $entry.Resource.Name}}{{.Use}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$entry.Resource.BirthDate}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="pc" name="pc">{{$entry.Resource.Gender}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="pc">PC</label>
            <p id="pc" name="pc">{{range $entry.Resource.Address}}{{.PostalCode}} {{end}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="addr">Address</label>
            <p id="addr" name="addr">{{range $entry.Resource.Address}}{{.Line}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{range $entry.Resource.Address}}{{.City}} {{end}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="addruse">Use</label>
            <p id="addruse" name="addruse">{{range $entry.Resource.Address}}{{.Use}} {{end}}</p>
        </div>
    </div>
    {{end}}
    {{template "horizontalline"}}
    <div class="row" style="color:blue;">
        <div class="col-sm-3">
            <label for="pid">Patient ID</label>
        </div>
        <div class="col-sm-9">
            <label for="authuid">ID Type</label>
        </div>
    </div>
    {{range $entry:= .PIXmResponse.Entry}} 
    {{range $entry.Resource.Identifier}}
    <div class="row">
         <div class="col-sm-3">
            <p id="pid" name="pid">{{.Value}}</p>
        </div>
        <div class="col-sm-9">
            <p id="authuid" name="authuid">{{$event.GetMappedId ($event.GetMappedId (splitfhiroid .System))}}</p>
        </div>
    </div>
    {{end}}
    {{end}}
    {{else}}
    <h3>Unable to connect to Patient Service. Some Patient Demographics are not available</h3>
    {{end}}
</div>
</body>
{{template "footer"}}
{{end}}]
2022/11/02 17:24:24.682232 main.go:193: Loaded subscriptions.html 
2022/11/02 17:24:24.682258 main.go:171: Persisting HTML Template subscriptions.html
2022/11/02 17:24:24.682296 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [subscriptions %!s(bool=false)]
2022/11/02 17:24:24.684317 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [subscriptions %!s(bool=false) {{define "subscriptions"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$event:= .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h4 style="color: blue; text-align:center">Event Service Broker Subscriptions</h3>
        </div>
    </div>
    {{template "horizontalline"}} 
    {{range $k,$v := .DBSubscriptions.Subscriptions}}
    {{ if ne $k 0 }}
    <div class="row">
        <div class="col-sm-2">
            <label for="expression">Created</label>
            <p id="expression" name="expression">{{$v.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Pathway</label>
            <p id="expression" name="expression">{{$event.GetMappedId $v.Pathway}}</p>
        </div>
        <div class="col-sm-2">
            <label for="expression">Expression</label>
            <p id="expression" name="expression">{{$v.Expression}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-mb-2">
            <a href="{{$url}}?act=subscriber&task=cancel&id={{$v.Id}}&saml={{$event.SAML}}">
                <span><button class="btn btn-outline-primary btn-sm" type="button"></span>Cancel Subscription</button>
                </span>
            </a>
        </div>
        <div class="col-sm-10">
            <p id="expression" name="expression">{{$v.BrokerRef}}</p>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
    {{end}}
</div>
</body>
{{ template "footer"}} 
{{end}}]
2022/11/02 17:24:24.686738 main.go:193: Loaded snip_workflow_task_col_status.html 
2022/11/02 17:24:24.686768 main.go:171: Persisting HTML Template snip_workflow_task_col_status.html
2022/11/02 17:24:24.686796 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_col_status]
2022/11/02 17:24:24.687893 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_col_status %!s(bool=false) {{define "snip_workflow_task_col_status"}}
<label style="color: darkblue;" for="tstatus" onclick="toggleWorkflowStatus()">Status</label> {{if eq .TaskData.TaskDetails.Status "CREATED"}}
<i class="fa fa-bars" aria-hidden="true"></i>
<p style="color: grey;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if or (eq .TaskData.TaskDetails.Status "READY") (eq .TaskData.TaskDetails.Status "REQUESTED") }}
<i class="fa fa-hourglass-start" aria-hidden="true"></i>
<p style="color: rgb(239, 126, 220);" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "IN_PROGRESS"}}
<i class="fa fa-cog fa-spin fa-1x fa-fw" aria-hidden="true"></i>
<p style="color: orange;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{if eq .TaskData.TaskDetails.Status "COMPLETE"}}
<i class="fa fa-thumbs-up" style="color: green;" aria-hidden="true"></i>
<p style="color: green;" id="tstatus" name="tstatus">{{.TaskData.TaskDetails.Status}}</p>
{{end}} {{end}}]
2022/11/02 17:24:24.691396 main.go:193: Loaded workflowtasks.html 
2022/11/02 17:24:24.691424 main.go:171: Persisting HTML Template workflowtasks.html
2022/11/02 17:24:24.691452 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflowtasks %!s(bool=false)]
2022/11/02 17:24:24.693727 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflowtasks %!s(bool=false) {{define "workflowtasks"}}
    {{$event := .}}
    {{$nhsid := .NHSId}}
    {{$url := .EventServices.EventService.EventUrl}}
    {{$usr := .EventServices.EventService.User}}
    {{$org := .EventServices.EventService.Org}}
    {{$role := .EventServices.EventService.Role}}
    {{$pw:=.Pathway}}
    {{$exp:=.Expression}}
    {{$top:=.Topic}}
    {{template "header" .}} 
        <div id="tasksDIV">
            {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                <div class="row">
                    <div class="col-sm-1">
                        <h5 style="color: blue;text-align: center;">Task {{.TaskData.TaskDetails.ID}}</h5>
                    </div>
                    <div class="col-sm-11">
                        <h5 style="color: blue;">{{.TaskData.Description}}</h5>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-1">
                        {{template "snip_workflow_task_col_status" $t}}
                    </div>
                    <div class="col-sm-1">
                        <label style="text-align: center;color: darkblue" for="user">Overdue</label>
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="oversue" name="overdue">YES</p>
                        {{else}}
                        <p style="color: green;" id="overdue" name="overdue">NO</p>
                        {{end}}
                    </div>
                    <div class="col-sm-2">
                        <label style="text-align: center;color: darkblue" for="created">Complete By</label> 
                        {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                        <p style="color: red;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{else}}
                        <p style="color: green;" id="completeby" name="completeby">{{taskcompletiontime $event $t.TaskData.TaskDetails.ID}}</p>
                        {{end}}
                    </div>
                    <div class="col-sm-3">
                        <label style="text-align: center;color: darkblue" for="created">
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}Completed On
                        {{else}}Last Update
                        {{end}}
                        </label>
                        {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                        <p style="color: green;">{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{else}}
                        <p>{{$t.TaskData.TaskDetails.LastModifiedTime}}</p>
                        {{end}}
                    </div>
                </div>
                {{template "horizontalline"}}
                {{if $t.TaskData.Input}} 
                    {{range $t.TaskData.Input}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="inputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}} 
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="inputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}"> 
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea> 
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
                </br>
                {{if $t.TaskData.Output}}
                    {{range $t.TaskData.Output}}
                        <div class="row">
                            {{if isbrokerexpression .Part.AttachmentInfo.Name}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="outputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} Actioned By {{.Part.AttachmentInfo.AttachedBy}} On {{.Part.AttachmentInfo.AttachedTime}}</p>
                                    {{else}}
                                        <label style="color: darkblue;" for="outputexpression"><i class="fa-solid fa-envelope-open"></i> Waiting for EHR Generated Event - {{.Part.AttachmentInfo.Name}}</label>
                                    {{end}}
                                </div>
                            {{else}}
                                <div class="col-sm-8">
                                    {{if eq $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                        <p id="inputexpression" name="outputexpression" style="color:darkgreen">{{.Part.AttachmentInfo.Name}} is Actioned</p>
                                    {{else}} 
                                        <form action="{{$url}}" target="workflowItem">
                                            <input type="hidden" class="form-control" id="taskid" name="taskid" value={{$t.TaskData.TaskDetails.ID}}>
                                            <input type="hidden" class="form-control" id="vers" name="vers" value={{$event.Vers}}>
                                            <input type="hidden" class="form-control" id="saml" name="saml" value={{$event.SAML}}>
                                            <input type="hidden" class="form-control" id="act" name="act" value="events">
                                            <input type="hidden" class="form-control" id="task" name="task" value="create">
                                            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{$event.Pathway}}">
                                            <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{$event.NHSId}}">
                                            <input type="hidden" class="form-control" id="user" name="user" value="{{$event.EventServices.EventService.User}}">
                                            <input type="hidden" class="form-control" id="org" name="org" value="{{$event.EventServices.EventService.Org}}">
                                            <input type="hidden" class="form-control" id="role" name="role" value="{{$event.EventServices.EventService.Role}}">
                                            <input type="hidden" class="form-control" id="topic" name="topic" value="addComment">
                                            <input type="hidden" class="form-control" id="expression" name="expression" value="{{.Part.AttachmentInfo.Name}}">
                                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-person-circle-check"></i> Create Event - {{.Part.AttachmentInfo.Name}} </button>
                                            <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes">{{$event.TaskNotes $t.TaskData.TaskDetails.ID}}</textarea>
                                        </form>
                                        </br>
                                    {{end}}
                                </div>
                            {{end}}
                        </div>
                    {{end}}
                {{end}}
            {{template "horizontalline"}}
            {{end}}
        </div>
    </body>
    {{template "footer"}}
{{end}}]
2022/11/02 17:24:24.699212 main.go:193: Loaded dashboardwidget.html 
2022/11/02 17:24:24.699242 main.go:171: Persisting HTML Template dashboardwidget.html
2022/11/02 17:24:24.699270 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [dashboardwidget %!s(bool=false)]
2022/11/02 17:24:24.701681 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [dashboardwidget %!s(bool=false) {{define "dashboardwidget"}}
{{template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <img class="img-fluid left-block" src="/nhs-essex-trust-logo.jpeg" /></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1 style="color:darkblue;text-align: center;" class="center-block">{{.GetMappedId .Pathway}} Dashboard </h1>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row text-center">
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-medkit fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Total}}" data-speed="1500"></h2>
                <a href="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" target="dashboardItem">
                    <p class="count-text">Total</p>
                </a>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-user-md fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.InProgress}}" data-speed="1500"></h2>
                <p class="count-text ">In Progress</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-thumbs-up fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Complete}}" data-speed="1500"></h2>
                <p class="count-text ">Completed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullseye fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMet}}" data-speed="1500"></h2>
                <p class="count-text ">Target Met</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bell fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.TargetMissed}}" data-speed="1500"></h2>
                <p class="count-text ">Target Missed</p>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="counter">
                <i class="fa fa-bullhorn fa-2x"></i>
                <h2 class="timer count-title count-number" data-to="{{.Dashboard.Escalated}}" data-speed="1500"></h2>
                <p class="count-text ">Require Escalation</p>
            </div>
        </div>
    </div>
    <div id="dashboardItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="150px" width="100%" id="dashboardItem" name="dashboardItem" src="{{$url}}?act=widget&task=xdws&pathway={{.Pathway}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}"></iframe>
    </div>
    <div id="workflowItemDIV">
        <iframe scrolling="auto" margin="0" frameBorder="0" height="500px" width="100%" id="workflowItem" name="workflowItem"></iframe>
    </div>
</body>
    <script>
        (function($) {
            $.fn.countTo = function(options) {
                options = options || {};

                return $(this).each(function() {
                    // set options for current element
                    var settings = $.extend({}, $.fn.countTo.defaults, {
                        from: $(this).data('from'),
                        to: $(this).data('to'),
                        speed: $(this).data('speed'),
                        refreshInterval: $(this).data('refresh-interval'),
                        decimals: $(this).data('decimals')
                    }, options);

                    // how many times to update the value, and how much to increment the value on each update
                    var loops = Math.ceil(settings.speed / settings.refreshInterval),
                        increment = (settings.to - settings.from) / loops;

                    // references & variables that will change with each update
                    var self = this,
                        $self = $(this),
                        loopCount = 0,
                        value = settings.from,
                        data = $self.data('countTo') || {};

                    $self.data('countTo', data);

                    // if an existing interval can be found, clear it first
                    if (data.interval) {
                        clearInterval(data.interval);
                    }
                    data.interval = setInterval(updateTimer, settings.refreshInterval);

                    // initialize the element with the starting value
                    render(value);

                    function updateTimer() {
                        value += increment;
                        loopCount++;

                        render(value);

                        if (typeof(settings.onUpdate) == 'function') {
                            settings.onUpdate.call(self, value);
                        }

                        if (loopCount >= loops) {
                            // remove the interval
                            $self.removeData('countTo');
                            clearInterval(data.interval);
                            value = settings.to;

                            if (typeof(settings.onComplete) == 'function') {
                                settings.onComplete.call(self, value);
                            }
                        }
                    }

                    function render(value) {
                        var formattedValue = settings.formatter.call(self, value, settings);
                        $self.html(formattedValue);
                    }
                });
            };

            $.fn.countTo.defaults = {
                from: 0, // the number the element should start at
                to: 0, // the number the element should end at
                speed: 1000, // how long it should take to count between the target numbers
                refreshInterval: 100, // how often the element should be updated
                decimals: 0, // the number of decimal places to show
                formatter: formatter, // handler for formatting the value before rendering
                onUpdate: null, // callback method for every time the element is updated
                onComplete: null // callback method for when the element finishes updating
            };

            function formatter(value, settings) {
                return value.toFixed(settings.decimals);
            }
        }(jQuery));

        jQuery(function($) {
            // custom formatting example
            $('.count-number').data('countToOptions', {
                formatter: function(value, options) {
                    return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
                }
            });

            // start all the timers
            $('.timer').each(count);

            function count(options) {
                var $this = $(this);
                options = $.extend({}, options || {}, $this.data('countToOptions') || {});
                $this.countTo(options);
            }
        });
    </script>
    <script>
        window.setInterval('refresh()', '{{.Op}}');

        function refresh() {
            window.location.reload();
        }
    </script>
{{template "footer" .}}
{{end}}]
2022/11/02 17:24:24.706133 main.go:193: Loaded snip_workflow_header.html 
2022/11/02 17:24:24.706160 main.go:171: Persisting HTML Template snip_workflow_header.html
2022/11/02 17:24:24.706188 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_header]
2022/11/02 17:24:24.708304 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_header %!s(bool=false) {{define "snip_workflow_header"}}
<div class="container-fluid">
    <div class="center-block">
        <div class="row">
            <div class="col-sm-1">
                <label style="text-align: center;color: blue" for="user">Conf Code</label>
                <p id="user" name="user">{{.WorkflowDefinition.Confidentialitycode}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="user">Opened By</label>
                <p id="user" name="user">{{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Prefix}} {{.XDWWorkflowDocument.Author.AssignedAuthor.AssignedPerson.Name.Family}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="lupdt">Last Update</label>
                <p id="lupdt" name="lupdt">{{lastupdatetime .}}</p>
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Complete By</label>
                <p id="comby" name="comby">{{completiontime .}}</p>
            </div>
            <div class="col-sm-1">
                {{if overdue .}}
                <label style="text-align: center;color: rgb(255, 170, 0)" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: rgb(255, 170, 0)"><i class="fa fa-thumbs-down"></i> {{overdue .}}</p>
                {{else}}
                <label style="text-align: center;color: blue" for="overdue">Overdue</label>
                <p id="overdue" name="overdue" style="color: green"><i class="fa fa-thumbs-up"></i> {{overdue .}}</p>
                {{end}}
            </div>
            <div class="col-sm-2">
                <label style="text-align: center;color: blue" for="comby">Time Remaining</label>
                <p id="comby" name="comby">{{workflowtimeremaining .}}</p>
            </div>
        </div>
    </div>
</div>

{{end}}]
2022/11/02 17:24:24.713144 main.go:193: Loaded notificationwidget.html 
2022/11/02 17:24:24.713176 main.go:171: Persisting HTML Template notificationwidget.html
2022/11/02 17:24:24.713204 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [notificationwidget %!s(bool=false)]
2022/11/02 17:24:24.717456 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [notificationwidget %!s(bool=false) {{define "notificationwidget"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}{{$newevents
:= minus (len .DBEvents.Events) (len .DBEventAcks.EventAck)}}

<div class="row">
    <div class="container-fluid">
        <div class="col-sm-2 left-block-flex">
            <a title="List and acknowledge {{.Pathway}} Pathway Notifications" href="{{$url}}?act=events&task=list&pathway={{.Pathway}}&saml={{.SAML}}"><span>
                <button
                    class="btn btn-success btn-lg btn-block" type="button">{{if ne $newevents "0"}}<div style="color:black">{{$newevents}}</div>{{end}}{{if eq $newevents "0"}}<div style="color:white">{{$newevents}}</div>{{end}}<i class="fa fa-flag" aria-hidden="true"></i> New {{.Pathway}} Notifications </button></span></a>
        </div>
    </div>
</div>

{{template "footer"}}{{end}}]
2022/11/02 17:24:24.719946 main.go:193: Loaded snip_workflow_col_patient.html 
2022/11/02 17:24:24.719976 main.go:171: Persisting HTML Template snip_workflow_col_patient.html
2022/11/02 17:24:24.720004 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_patient %!s(bool=false)]
2022/11/02 17:24:24.722272 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_patient %!s(bool=false) {{define "snip_workflow_col_patient"}}
<h3 class="text-center" style="color: darkblue;">{{.GetMappedId .Pathway}}</h3>
<a href="#" onclick="togglePatient()">
    {{if eq .XDWWorkflowDocument.WorkflowStatus "COMPLETE"}}
    <h5 class="text-center" style="color: green;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "IN_PROGRESS"}}
    <h5 class="text-center" style="color: rgb(255, 174, 0);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "CREATED"}}
    <h5 class="text-center" style="color: gray;">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}} 
    {{if eq .XDWWorkflowDocument.WorkflowStatus "READY"}}
    <h5 class="text-center" style="color: rgb(239, 126, 220);">{{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}}</h5>
    {{end}}
</a>
<div class="text-center">
    {{template "snip_workflow_col_status" .}}
</div>
{{end}}]
2022/11/02 17:24:24.725332 main.go:193: Loaded snip_workflow_task_event_header.html 
2022/11/02 17:24:24.725368 main.go:171: Persisting HTML Template snip_workflow_task_event_header.html
2022/11/02 17:24:24.725404 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) snip_workflow_task_event_header]
2022/11/02 17:24:24.728919 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_task_event_header %!s(bool=false) {{define "snip_workflow_task_event_header"}}
<div class="row">
    <div class="col-sm-8"></div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtime">Task Event Time</label>
    </div>
    <div class="col-sm-2">
        <label style="color: darkblue;" for="eventtype">Task Event Type</label>
    </div>
</div>
{{end}}]
2022/11/02 17:24:24.732173 main.go:193: Loaded workflows.html 
2022/11/02 17:24:24.732200 main.go:171: Persisting HTML Template workflows.html
2022/11/02 17:24:24.732228 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [workflows %!s(bool=false)]
2022/11/02 17:24:24.734309 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "workflows"}} 
{{ template "header" .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$saml:= .SAML}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw := .Pathway}}
{{$nhsid := .NHSId}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 style="text-align:center;color:darkblue">{{.GetMappedId $pw}} Workflows {{$nhsid}}</h3>
        </div>
    </div>
    {{range .XDWDocuments}}
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue" for="nhsid">NHS ID</label>
            <p id="nhsid" name="nhsid">{{.NHSId}}</p>
        </div>
       <div class="col-sm-2">
            <label style="color:blue" for="pwy">Pathway</label>
            <p id="pwy" name="pwy">{{$event.GetMappedId .Pathway}}</p>
        </div>
         <div class="col-sm-2">
            <label style="color:blue" for="created">Opened</label>
            <p id="created" name="created">{{.Created}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="xdwkey">XDW Key</label>
            <p id="xdwkey" name="xdwkey">{{.XDW_Key}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="published">Published</label>
            <p id="published" name="published">{{.Published}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="version">Version</label>
            <a href="{{$url}}?act=widget&task=xdw&pathway={{.Pathway}}&nhs={{.NHSId}}&vers={{.Version}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="workflowItem"><p id="version" name="version">{{.Version}}</p></a>
        </div>
    </div>
    {{template "horizontalline"}}
    {{end}}
</div>    
</tbody>
{{ template "footer"}} 
{{end}} workflows]
2022/11/02 17:24:24.736960 main.go:193: Loaded adminspawidget.html 
2022/11/02 17:24:24.736989 main.go:171: Persisting HTML Template adminspawidget.html
2022/11/02 17:24:24.737017 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [adminspawidget %!s(bool=false)]
2022/11/02 17:24:24.738346 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "adminspawidget"}}{{$saml := .SAML}}{{$url:= .EventServices.EventService.EventUrl}}{{$nhsid:=.NHSId}}{{$usr:=.EventServices.EventService.User}}{{$org:=.EventServices.EventService.Org}}{{$role:=.EventServices.EventService.Role}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center"
                        target="iadmin" onclick="togglesidebar()">Pathways Dashboard</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=subscriber&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" target="iadmin" onclick="togglesidebar()">Manage Subscriptions</a>
                </li>
                <hr></hr>
                <li>
                    <a href="{{$url}}?act=admin&task=restart&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}" style="text-align:center" onclick="togglesidebar()">Re-Initialise Event Service</a>
                </li>
                <hr></hr>
                <li>
                    <a href="#configsrvcsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Services</a>
                    <ul class="collapse list-unstyled" id="configsrvcsmenu">
                        {{range .EventServices.ServiceConfigs}}
                        <li><a href="{{$url}}?act=services&task=get&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxmlmsgmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Messages</a>
                    <ul class="collapse list-unstyled" id="configxmlmsgmenu">
                        {{range .EventServices.XMLMessages}}
                        <li><a href="{{$url}}?act=services&task=getxml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configwidgetmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure HTML</a>
                    <ul class="collapse list-unstyled" id="configwidgetmenu">
                        {{range .EventServices.HTMLWidgets}}
                        <li><a href="{{$url}}?act=services&task=gethtml&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdwmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure Pathways</a>
                    <ul class="collapse list-unstyled" id="configxdwmenu">
                        {{range .EventServices.WorkflowDefinitions}}
                        <li><a href="{{$url}}?act=services&task=getxdw&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li>
                    <a href="#configxdsmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Configure XDS Meta</a>
                    <ul class="collapse list-unstyled" id="configxdsmenu">
                        {{range .EventServices.WorkflowXDWMeta}}
                        <li><a href="{{$url}}?act=services&task=getmeta&op={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}&saml={{$saml}}" target="iadmin" onclick="togglesidebar()">{{.}}</a></li>
                        {{end}}
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i> Admin                       
                    </button>
                </div>
            </nav>
        </div>
        <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" frameborder="0" onload="resizeIframe(this)" style="width:100%;height: 100%;" name="iadmin" id="iadmin"></iframe>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        $('#sidebar').toggleClass('active');
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #7386D5;
        color: #fff;
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #6d7fcc;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #47748b;
    }
    
    #sidebar ul p {
        color: #fff;
        padding: 10px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #7386D5;
        background: #fff;
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: #fff;
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #6d7fcc;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}} adminspawidget]
2022/11/02 17:24:24.742059 main.go:193: Loaded spawidget.html 
2022/11/02 17:24:24.742089 main.go:171: Persisting HTML Template spawidget.html
2022/11/02 17:24:24.742117 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [spawidget %!s(bool=false)]
2022/11/02 17:24:24.744579 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [spawidget %!s(bool=false) {{define "spawidget"}}
{{$url:= .EventServices.EventService.EventUrl}}
{{$pwy:= .Pathway}}
{{$nhsid:=.NHSId}}
{{$usr:=.EventServices.EventService.User}}
{{$org:=.EventServices.EventService.Org}}
{{$role:=.EventServices.EventService.Role}}
{{$event := .}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/style.css">

    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js" integrity="sha512-yFjZbTYRCJodnuyGlsKamNE/LlEaEAxSUDe5+u61mV8zzqJVFOH7TnULE2/PP/l5vKWpUNnF4VGVkXh3MjgLsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <nav id="sidebar">
            <ul class="list-unstyled components">
                <li>
                    <a href="#pathwaymenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Select Pathway</a>
                    <ul class="collapse list-unstyled" id="pathwaymenu">
                        {{range .EventServices.ActivePathways}}
                        <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&op=600000&pathway={{.}}&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">{{$event.GetMappedId .}}</a></li>
                        {{end}}
                    </ul>
                </li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=widget&task=dashboard&vers=-1&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">ICS Dashboard</a></li>
                <li onclick="togglesidebar()"><a href="{{$url}}?act=admin&op=600000&user={{$usr}}&org={{$org}}&role={{$role}}" target="spacontent">Admin</a></li>
            </ul>
        </nav>
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <button type="button" id="sidebarCollapse" class="btn btn-outline-primary btn-sm"><i class="fa fa-bars"></i></button>
                </div>
            </nav>
        </div>
         <div class="col-sm-12">
            <iframe onload="window.top.scrollTo(0,0);" width="100%" height="100%" frameborder="0" name="spacontent" title="spacontent" id="spacontent" src="{{$url}}?act=widget&task=dashboard&pathway={{.Pathway}}&vers=-1&op=600000&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{$event.SAML}}"></iframe>
        </div>
    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

<script>
    $(document).ready(function() {
        $('#sidebarCollapse').on('click', function() {
            $('#sidebar').toggleClass('active');
        });
        togglesidebar()
    });
</script>
<script>
    function togglesidebar() {
        $('#sidebar').toggleClass('active');
    }
</script>
<style>
    .wrapper {
        display: flex;
        align-items: stretch;
    }
    
    #sidebar {
        min-width: 250px;
        max-width: 250px;
        min-height: 100vh;
        background: #d8dbe7;
        color: rgb(0, 0, 0);
        transition: all 0.3s;
    }
    
    #sidebar.active {
        margin-left: -250px;
    }
    
    #sidebar .sidebar-header {
        padding: 20px;
        background: #cfd6f3;
    }
    
    #sidebar ul.components {
        padding: 20px 0;
        border-bottom: 1px solid #96acb8;
    }
    
    #sidebar ul p {
        color: rgb(5, 5, 5);
        padding: 3px;
    }
    
    #sidebar ul li a {
        padding: 10px;
        font-size: 1.1em;
        display: block;
    }
    
    #sidebar ul li a:hover {
        color: #f6f7fa;
        background: rgb(72, 179, 250);
    }
    
    #sidebar ul li.active>a,
    a[aria-expanded="true"] {
        color: rgb(2, 2, 2);
        background: #6d7fcc;
    }
    
    ul ul a {
        font-size: 0.9em !important;
        padding-left: 30px !important;
        background: #b0b9e0;
    }
    
    a[data-toggle="collapse"] {
        position: relative;
    }
    
    .dropdown-toggle::after {
        display: block;
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
    }
    
    @media (max-width: 768px) {
        #sidebar {
            margin-left: -250px;
        }
        #sidebar.active {
            margin-left: 0;
        }
    }
</style>

</html>
{{end}}]
2022/11/02 17:24:24.749082 main.go:193: Loaded newworkflow.html 
2022/11/02 17:24:24.749109 main.go:171: Persisting HTML Template newworkflow.html
2022/11/02 17:24:24.749136 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [newworkflow %!s(bool=false)]
2022/11/02 17:24:24.751471 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [newworkflow %!s(bool=false) {{define "newworkflow"}}
{{template "header" .}}
<div class="col-sm-6">
    <h3>Patient is not on an Active {{.GetMappedId .Pathway}} Pathway</h3>
</div>
{{template "horizontalline"}}
<div class="col-sm-12">
    {{if eq .EventServices.EventService.PatientSrvc "pixmsrvc"}} {{template "pixmpatient" .}} {{else}} {{template "pixpatient" .}} {{end}}
</div>
</body>
{{template "footer" .}}
{{end}}]
2022/11/02 17:24:24.755671 main.go:193: Loaded snip_workflow_col_elapsedtime.html 
2022/11/02 17:24:24.755703 main.go:171: Persisting HTML Template snip_workflow_col_elapsedtime.html
2022/11/02 17:24:24.755735 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_elapsedtime %!s(bool=false)]
2022/11/02 17:24:24.758359 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_elapsedtime %!s(bool=false) {{define "snip_workflow_col_elapsedtime"}}
<label style="text-align: center;color: darkblue" for="elapsedtime">Elapsed Time</label> {{if overdue .}}
<p style="color: red;" id="elapsedtime" name="elapsedtime">{{ elapsedtime .}}</p>
{{else}}
<p style="color: green;" id="elapsedtime" name="elaspedtime">{{ elapsedtime .}}</p>
{{end}} {{end}}]
2022/11/02 17:24:24.763911 main.go:193: Loaded snip_workflow_task_event.html 
2022/11/02 17:24:24.763941 main.go:171: Persisting HTML Template snip_workflow_task_event.html
2022/11/02 17:24:24.763975 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_task_event %!s(bool=false)]
2022/11/02 17:24:24.766594 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_task_event"}}
<div class="col-sm-8">
</div>
<div class="col-sm-2">
    <p id="eventtime" name="eventtime">{{.EventTime}}</p>
</div>
<div class="col-sm-2">
    <p id="eventtype" name="eventtype">{{.EventType}}</p>
</div>
{{end}} snip_workflow_task_event]
2022/11/02 17:24:24.770715 main.go:193: Loaded footer.html 
2022/11/02 17:24:24.770752 main.go:171: Persisting HTML Template footer.html
2022/11/02 17:24:24.770787 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [footer %!s(bool=false)]
2022/11/02 17:24:24.773466 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "footer"}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script>
    function resizeIframe(obj) {
        obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
    }
</script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }
</script>

</body>
<style>
    /* Timeline */
    
    .timeline,
    .timeline-horizontal {
        list-style: none;
        padding: 10px;
        position: relative;
    }
    
    .timeline:before {
        top: 20px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 3px;
        background-color: #eeeeee;
        left: 50%;
        margin-left: -1.5px;
    }
    
    .timeline .timeline-item {
        margin-bottom: 10px;
        position: relative;
    }
    
    .timeline .timeline-item:before,
    .timeline .timeline-item:after {
        content: "";
        display: table;
    }
    
    .timeline .timeline-item:after {
        clear: both;
    }
    
    .timeline .timeline-item .timeline-badge {
        color: #fff;
        width: 54px;
        height: 54px;
        line-height: 52px;
        font-size: 12px;
        text-align: center;
        position: absolute;
        top: 18px;
        left: 50%;
        margin-left: -25px;
        background-color: #7c7c7c;
        border: 3px solid #ffffff;
        z-index: 100;
        border-top-right-radius: 50%;
        border-top-left-radius: 50%;
        border-bottom-right-radius: 50%;
        border-bottom-left-radius: 50%;
    }
    
    .timeline .timeline-item .timeline-badge i,
    .timeline .timeline-item .timeline-badge .fa,
    .timeline .timeline-item .timeline-badge .glyphicon {
        top: 2px;
        left: 2px;
    }
    
    .timeline .timeline-item .timeline-badge.primary {
        background-color: #1f9eba;
    }
    
    .timeline .timeline-item .timeline-badge.info {
        background-color: #5bc0de;
    }
    
    .timeline .timeline-item .timeline-badge.success {
        background-color: #59ba1f;
    }
    
    .timeline .timeline-item .timeline-badge.warning {
        background-color: #d1bd10;
    }
    
    .timeline .timeline-item .timeline-badge.danger {
        background-color: #ba1f1f;
    }
    
    .timeline .timeline-item .timeline-panel {
        position: relative;
        width: 35%;
        float: left;
        right: 10px;
        border: 1px solid #c0c0c0;
        background: #ffffff;
        border-radius: 2px;
        padding: 10px;
        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.175);
    }
    
    .timeline .timeline-item .timeline-panel:before {
        position: absolute;
        top: 26px;
        right: -16px;
        display: inline-block;
        border-top: 16px solid transparent;
        border-left: 16px solid #c0c0c0;
        border-right: 0 solid #c0c0c0;
        border-bottom: 16px solid transparent;
        content: " ";
    }
    
    .timeline .timeline-item .timeline-panel .timeline-title {
        margin-top: 5px;
        color: inherit;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p,
    .timeline .timeline-item .timeline-panel .timeline-body>ul {
        margin-bottom: 0;
        margin-left: 10px;
    }
    
    .timeline .timeline-item .timeline-panel .timeline-body>p+p {
        margin-top: 5px;
    }
    
    .timeline .timeline-item:last-child:nth-child(even) {
        float: none;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel {
        float: right;
        left: 5px;
    }
    
    .timeline .timeline-item:nth-child(even) .timeline-panel:before {
        border-left-width: 0;
        border-right-width: 14px;
        left: -14px;
        right: auto;
    }
    
    .timeline-horizontal {
        list-style: none;
        position: relative;
        padding: 5px 0px 5px 0px;
        display: inline-block;
    }
    
    .timeline-horizontal:before {
        height: 3px;
        top: auto;
        bottom: 26px;
        left: 16px;
        right: 0;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item {
        display: table-cell;
        height: 280px;
        width: 20%;
        min-width: 320px;
        float: none !important;
        padding-left: 0px;
        padding-right: 20px;
        margin: 0 auto;
        vertical-align: bottom;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel {
        top: auto;
        bottom: 64px;
        display: inline-block;
        float: none !important;
        left: 0 !important;
        right: 0 !important;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .timeline-horizontal .timeline-item .timeline-panel:before {
        top: auto;
        bottom: -16px;
        left: 28px !important;
        right: auto;
        border-right: 16px solid transparent !important;
        border-top: 16px solid #c0c0c0 !important;
        border-bottom: 0 solid #c0c0c0 !important;
        border-left: 16px solid transparent !important;
    }
    
    .timeline-horizontal .timeline-item:before,
    .timeline-horizontal .timeline-item:after {
        display: none;
    }
    
    .timeline-horizontal .timeline-item .timeline-badge {
        top: auto;
        bottom: 0px;
        left: 43px;
    }
    
    .counter {
        background-color: #f5f5f5;
        padding: 10px 0;
        border-radius: 5px;
    }
    
    .count-title {
        font-size: 30px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .count-text {
        font-size: 20px;
        font-weight: normal;
        margin-top: 10px;
        margin-bottom: 0;
        text-align: center;
    }
    
    .fa-2x {
        margin: 0 auto;
        float: none;
        display: table;
        color: #4ad1e5;
    }
    
    .loader-wrapper {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-color: #242f3f;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .loader {
        display: inline-block;
        width: 100px;
        height: 100px;
        position: relative;
        border: 4px solid #Fff;
        animation: loader 2s infinite ease;
    }
    
    .loader-inner {
        vertical-align: top;
        display: inline-block;
        width: 100%;
        background-color: #fff;
        animation: loader-inner 2s infinite ease-in;
    }
    
    @keyframes loader {
        0% {
            transform: rotate(0deg);
        }
        25% {
            transform: rotate(180deg);
        }
        50% {
            transform: rotate(180deg);
        }
        75% {
            transform: rotate(360deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
    
    @keyframes loader-inner {
        0% {
            height: 0%;
        }
        25% {
            height: 0%;
        }
        50% {
            height: 100%;
        }
        75% {
            height: 100%;
        }
        100% {
            height: 0%;
        }
    }
    
    .sidenav {
        display: none;
        height: 100%;
        width: 0;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: #111;
        overflow-x: hidden;
        transition: 0.5s;
        padding-top: 60px;
    }
    
    .sidenav a {
        padding: 8px 8px 8px 32px;
        text-decoration: none;
        font-size: 25px;
        color: #818181;
        display: block;
        transition: 0.3s;
    }
    
    .sidenav a:hover {
        color: #f1f1f1;
    }
    
    .sidenav .closebtn {
        position: absolute;
        top: 0;
        right: 15px;
        font-size: 36px;
        margin-left: 50px;
    }
    
    @media screen and (max-height: 450px) {
        .sidenav {
            padding-top: 15px;
        }
        .sidenav a {
            font-size: 18px;
        }
    }
    
    .item .item-content {
        padding: 30px 35px
    }
    
    .image-upload {
        width: 100%;
        height: 100px;
        border: 1px dashed #ddd;
        border-radius: 5px;
        margin-bottom: 20px;
        position: relative;
        text-align: center;
        background: #f8f8f9;
        color: #666;
        overflow: hidden
    }
    
    .item-wrapper form img {
        margin-bottom: 20px;
        width: auto;
        height: auto;
        max-height: 400px;
        width: auto;
        border-radius: 5px;
        overflow: hidden
    }
    
    .image-upload img {
        height: 100% !important;
        width: auto !important;
        border-radius: 0px;
        margin: 0 auto
    }
    
    .image-upload i {
        font-size: 6em;
        color: rgb(62, 25, 133)
    }
    
    .image-upload input {
        cursor: pointer;
        opacity: 0;
        height: 100%;
        width: 100%;
        z-index: 10;
        position: absolute;
        top: 0;
        left: 0
    }
    
    .item-wrapper input {
        height: 43px;
        line-height: 43px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px
    }
    
    .wrapper {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: stretch;
        justify-content: center;
    }
    
    .file-upload {
        height: 200px;
        width: 300px;
        border-radius: 100px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 4px solid #FFFFFF;
        overflow: hidden;
        background-image: linear-gradient(to bottom, #2590EB 50%, #FFFFFF 50%);
        background-size: 100% 200%;
        transition: all 1s;
        color: #0bd659;
        font-size: 75px;
    }
    
    .hidden {
        display: none;
    }
</style>

</html>{{end}} footer %!s(bool=false)]
2022/11/02 17:24:24.777056 main.go:193: Loaded events.html 
2022/11/02 17:24:24.777090 main.go:171: Persisting HTML Template events.html
2022/11/02 17:24:24.777131 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [events %!s(bool=false)]
2022/11/02 17:24:24.781386 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [events %!s(bool=false) {{define "events"}} 
{{ template "header" .}}
{{$event := .}}
{{$url := .EventServices.EventService.EventUrl}}
{{$usr := .EventServices.EventService.User}}
{{$org := .EventServices.EventService.Org}}
{{$role := .EventServices.EventService.Role}}
{{$pw:=.Pathway}}
{{$exp:=.Expression}}
{{$top:=.Topic}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-10">
            {{if eq (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notification</h3>
            {{end}} {{if ne (len .DBEvents.Events) 1}}
            <h3 style="text-align:center;color:darkblue">{{len .DBEvents.Events }} Notifications</h3>
            {{end}}
        </div>
    </div>
    {{range .DBEvents.Events}}
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue" for="subscriber">Notify</label>
            <p id="subscriber" name="subscriber">
                {{.User}} {{.Org}}
            </p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="expression">Event</label>
            <p id="expression" name="expression">{{.Expression}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="topic">Task</label>
            <p id="topic" name="topic">{{$event.GetMappedId .Topic}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="authors">Created By</label>
            <p id="authors" name="authors">{{.Authors}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue" for="nhs">For Patient</label>
            <p id="nhs" name="nhs">{{.NhsId}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue" for="created">Created</label>
            <p id="created" name="created">{{.CreationTime}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <label style="color:blue" for="notes">Notes</label>
            <textarea disabled id="notes" name="notes">{{.Notes}}</textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            {{$ackstatus:= hasack .Id}} {{if ne $ackstatus "Acknowledged"}}
            <a href="{{$url}}?act=events&task=ack&id={{.Id}}&nhs={{.NhsId}}&user={{.User}}&org={{.Org}}&role={{.Role}}&pathway={{.Pathway}}&saml={{.SAML}}"><span><button
                        class="btn btn-outline-warning btn-sm" type="button"><span class="glyphicon glyphicon-thumbs-up"></span>Acknowledge</button></span></a> {{end}} {{if eq $ackstatus "Acknowledged"}}
            <a href="#"><span><button
                                    class="btn btn-outline-primary btn-sm" type="button">ACK'd</button></span></a> {{end}}
        </div>
        <div class="col-sm-10">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <hr></hr>
        </div>
    </div>
    {{end}}
    </tbody>
    {{ template "footer"}} {{end}}]
2022/11/02 17:24:24.785048 main.go:193: Loaded header.html 
2022/11/02 17:24:24.785077 main.go:171: Persisting HTML Template header.html
2022/11/02 17:24:24.785113 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [header %!s(bool=false)]
2022/11/02 17:24:24.787787 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [header %!s(bool=false) {{define "header"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ICS Event Service</title>

    <link rel="stylesheet" href="/eventservice.css">
    <script src="https://cdn.ravenjs.com/3.17.0/raven.min.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/solid.min.css" integrity="sha512-LUxUs00S05YspUb2HCuUTBqTqbjJm2uNvwRXVTcl/jkr9ygYZptXhfknc52iBnPUNgHHHC9ivU4RV6UFxLxhfg==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" integrity="sha512-10/jx2EXwxxWqCLX/hHth/vu2KY3jCF70dCQB8TSgNjbCVAC/8vai53GfMDrO2Emgwccf2pJqxct9ehpzG+MTw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js" integrity="sha512-Cvxz1E4gCrYKQfz6Ne+VoDiiLrbFBvc6BPh4iyKo2/ICdIodfgc5Q9cBjRivfQNUXBCEnQWcEInSXsvlNHY/ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/solid.js " integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ " crossorigin="anonymous "></script>
    <script defer src="https://use.fontawesome.com/releases/v6.0.1/js/fontawesome.js " integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY " crossorigin="anonymous "></script> -->

    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js "></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js "></script>
</head>

<body>

    {{end}}]
2022/11/02 17:24:24.791299 main.go:193: Loaded pixpatient.html 
2022/11/02 17:24:24.791332 main.go:171: Persisting HTML Template pixpatient.html
2022/11/02 17:24:24.791366 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [pixpatient %!s(bool=false)]
2022/11/02 17:24:24.796485 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [pixpatient %!s(bool=false) {{define "pixpatient"}}
{{template "header" .}} 
{{$pat := .PDQv3Response.Body.PRPAIN201306UV02.ControlActProcess.Subject.RegistrationEvent.Subject1.Patient}}
{{template "horizontalline"}}
{{$event := .}}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <a href="#" onclick="togglePatient()"><i class="fa fa-bars">Toggle</i></a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-1">
            <label style="color:blue;" for="givenname">Given</label>
            <p id="givenname" name="givenname">{{$pat.PatientPerson.Name.Given}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="familyname">Family</label>
            <p id="familyname" name="familyname">{{$pat.PatientPerson.Name.Family}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="dob">Birth Date</label>
            <p id="dob" name="dob">{{$pat.PatientPerson.BirthTime}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="gender">Gender</label>
            <p id="gender" name="gender">{{$pat.PatientPerson.AdministrativeGenderCode.Code}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="maritalStatusCode">Marital Status</label>
            <p id="maritalStatusCode" name="maritalStatusCode">{{$pat.PatientPerson.MaritalStatusCode.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="twin">Twin</label>
            <p id="twin" name="twin">{{$pat.PatientPerson.MultipleBirthInd}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="telecom">Telcom</label>
            {{range $pat.PatientPerson.Telecom}}
            <p id="telecom" name="telecom">{{.Value}}</p>
            {{end}}
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="updated">Last Updated</label>
            <p id="updated" name="updated">{{$pat.EffectiveTime.Value}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="address">Address</label>
            <p id="address" name="address">{{$pat.PatientPerson.Addr.StreetAddressLine}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="city">City</label>
            <p id="city" name="city">{{$pat.PatientPerson.Addr.City}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="state">State</label>
            <p id="state" name="state">{{$pat.PatientPerson.Addr.State}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="zip">ZIP</label>
            <p id="zip" name="zip">{{$pat.PatientPerson.Addr.PostalCode}}</p>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="deceased">Deceased</label>
            <p id="deceased" name="deceased">{{$pat.PatientPerson.DeceasedInd}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="nat">Nat</label>
            <p id="nat" name="nat">{{$pat.PatientPerson.AsCitizen.PoliticalNation.Code.Code}}</p>
        </div>
        <div class="col-sm-1">
            <label style="color:blue;" for="birthplace">Birth Place</label>
            <p id="birthplace" name="birthplace">{{$pat.PatientPerson.BirthPlace.Addr.City}}</p>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <label style="color:blue;" for="pid">Patient ID</label>
        </div>
        <div class="col-sm-2">
            <label style="color:blue;" for="idtype">ID Type</label>
        </div>
    </div>
    {{range $pat.ID}}
    <div class="row">
        <div class="col-sm-2">
            <p id="pid" name="pid">{{.Extension}}</p>
        </div>
        <div class="col-sm-2">
            <p id="idtype" name="idtype">{{$event.GetMappedId .AssigningAuthorityName}}</p>
        </div>
    </div>
    {{end}} 
</div>
{{template "footer"}} {{end}}]
2022/11/02 17:24:24.799765 main.go:193: Loaded horizontalline.html 
2022/11/02 17:24:24.799794 main.go:171: Persisting HTML Template horizontalline.html
2022/11/02 17:24:24.799824 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [horizontalline %!s(bool=false)]
2022/11/02 17:24:24.806019 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [horizontalline %!s(bool=false) {{define "horizontalline"}}
<div class="row">
    <div class="col-sm-12">
        <hr></hr>
    </div>
</div>
{{end}}]
2022/11/02 17:24:24.812158 main.go:193: Loaded snip_workflow_link_events.html 
2022/11/02 17:24:24.812191 main.go:171: Persisting HTML Template snip_workflow_link_events.html
2022/11/02 17:24:24.812221 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_events %!s(bool=false)]
2022/11/02 17:24:24.817157 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (isxml, template, name) VALUES (?, ?, ?) - Values [%!s(bool=false) {{define "snip_workflow_link_events"}}
<div class="col-sm-2">
    <a onclick="toggleEvents()" href="{{.EventServices.EventService.EventUrl}}?act=events&task=list&nhs={{.NHSId}}&pathway={{.Pathway}}&saml={{.SAML}}" target="ievents">
        <i class="fas fa-bullhorn" style="color: rgb(77, 10, 71);"></i> Notifications
    </a>
</div>
{{end}} snip_workflow_link_events]
2022/11/02 17:24:24.821286 main.go:193: Loaded snip_workflow_col_overdue.html 
2022/11/02 17:24:24.821318 main.go:171: Persisting HTML Template snip_workflow_col_overdue.html
2022/11/02 17:24:24.821353 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_col_overdue %!s(bool=false)]
2022/11/02 17:24:24.823946 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_col_overdue %!s(bool=false) {{define "snip_workflow_col_overdue"}}
<label style="color: darkblue" for="overdue">On Schedule</label> {{if overdue .}}
<p style="color: red;" id="oversue" name="overdue"><i class="fa fa-thumbs-down" aria-hidden="true"></i> NO</p>{{else}}
<p style="color: green;" id="overdue" name="overdue"><i class="fa fa-thumbs-up" aria-hidden="true"></i> YES</p>{{end}} {{end}}]
2022/11/02 17:24:24.827919 main.go:193: Loaded workflow.html 
2022/11/02 17:24:24.827953 main.go:171: Persisting HTML Template workflow.html
2022/11/02 17:24:24.827982 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE isxml= ? AND name= ? - Values [%!s(bool=false) workflow]
2022/11/02 17:24:24.833369 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [workflow %!s(bool=false) {{define "workflow"}}{{template "header" .}}
{{template "snip_workflow_header" .}}
{{template "timelinewidget" .}}
</tbody>
<script>
    $(document).ready(function() {
        
    });
</script>
<script>
    function toggleXDW() {
        var x = document.getElementById("xdwDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("timelineDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
<script>
    function toggleTimeline() {
        var x = document.getElementById("timelineDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("patientDIV").style.display = "none"
            document.getElementById("xdwDIV").style.display = "none"
        } else {
            x.style.display = "none";
        }
    }
</script>
{{template "footer" .}}{{end}}]
2022/11/02 17:24:24.837005 main.go:193: Loaded usereventform.html 
2022/11/02 17:24:24.837039 main.go:171: Persisting HTML Template usereventform.html
2022/11/02 17:24:24.837070 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [usereventform %!s(bool=false)]
2022/11/02 17:24:24.839305 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [usereventform %!s(bool=false) {{define "usereventform"}}{{$url := .EventServices.EventService.EventUrl}}
<form action="{{$url}}" target="results">
    <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
    <input type="hidden" class="form-control" id="act" name="act" value="events">
    <input type="hidden" class="form-control" id="task" name="task" value="create">
    <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
    <input type="hidden" class="form-control" id="nhs" name="nhs" value="{{.NHSId}}">
    <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
    <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
    <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
    <textarea type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="notes"></textarea>
    <button type="submit" class="btn btn-primary sm-4">Create User Event</button>
</form>
{{template "footer"}}{{end}}]
2022/11/02 17:24:24.843210 main.go:193: Loaded wfconfig.html 
2022/11/02 17:24:24.843242 main.go:171: Persisting HTML Template wfconfig.html
2022/11/02 17:24:24.843271 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [wfconfig %!s(bool=false)]
2022/11/02 17:24:24.847283 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [wfconfig %!s(bool=false) {{define "wfconfig"}}{{template "header"}}{{$url := .EventServices.EventService.EventUrl}}
<div class="container-fluid">
    <h3>{{.Op}} {{if eq .Task "get"}} Service {{end}} {{if eq .Task "getxdw"}} Pathway {{end}} {{if eq .Task "getmeta"}} XDS Meta {{end}}{{if eq .Task "gethtml"}} HTML Widget {{end}} Configuration</h3>
    <form action="{{$url}}" target="iadmin">
        <div class="row">
            <input type="hidden" class="form-control" id="saml" name="saml" value={{.SAML}}>
            <input type="hidden" class="form-control" id="act" name="act" value="{{.Act}}"> {{if eq .Task "get"}}
            <input type="hidden" class="form-control" id="task" name="task" value="set"> {{end}} {{if eq .Task "getmeta"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setmeta"> {{end}}{{if eq .Task "getxdw"}}
            <input type="hidden" class="form-control" id="task" name="task" value="setxdw"> {{end}}{{if eq .Task "gethtml"}}
            <input type="hidden" class="form-control" id="task" name="task" value="sethtml"> {{end}}
            <input type="hidden" class="form-control" id="op" name="op" value="{{.Op}}">
            <input type="hidden" class="form-control" id="pathway" name="pathway" value="{{.Pathway}}">
            <input type="hidden" class="form-control" id="user" name="user" value="{{.EventServices.EventService.User}}">
            <input type="hidden" class="form-control" id="org" name="org" value="{{.EventServices.EventService.Org}}">
            <input type="hidden" class="form-control" id="role" name="role" value="{{.EventServices.EventService.Role}}">
        </div>
        <div class="row">
            <div class="col-sm-12 ">
                <hr></hr>
            </div>
        </div>
        <textarea type="input" class="form-control" id="config" name="config" rows="25">{{.ConfigStr}}</textarea>
        <p> </p>
        <button type="submit" class="btn btn-primary sm-2">Update</button>
    </form>
</div>
{{template "footer"}}{{end}}]
2022/11/02 17:24:24.853073 main.go:193: Loaded snip_workflow_link_timeline.html 
2022/11/02 17:24:24.853103 main.go:171: Persisting HTML Template snip_workflow_link_timeline.html
2022/11/02 17:24:24.853130 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [snip_workflow_link_timeline %!s(bool=false)]
2022/11/02 17:24:24.854286 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (name, isxml, template) VALUES (?, ?, ?) - Values [snip_workflow_link_timeline %!s(bool=false) {{define "snip_workflow_link_timeline"}}
<div class="col-sm-2">
    <a href="{{.EventServices.EventService.EventUrl}}?act=widget&task=timeline&pathway={{.Pathway}}&nhs={{.NHSId}}&user={{.EventServices.EventService.User}}&org={{.EventServices.EventService.Org}}&role={{.EventServices.EventService.Role}}&saml={{.SAML}}"
        target="itimeline" onclick="toggleTimeline()">
        <i class="fa fa-clock" style="color: rgb(77, 10, 71);"></i> Timeline
    </a>
</div>
{{end}}]
2022/11/02 17:24:24.858341 main.go:193: Loaded timelinewidget.html 
2022/11/02 17:24:24.858369 main.go:171: Persisting HTML Template timelinewidget.html
2022/11/02 17:24:24.858396 tukdbint.go:917: Created Prepared Statement DELETE FROM templates WHERE name= ? AND isxml= ? - Values [timelinewidget %!s(bool=false)]
2022/11/02 17:24:24.863078 tukdbint.go:917: Created Prepared Statement INSERT INTO templates (template, name, isxml) VALUES (?, ?, ?) - Values [{{define "timelinewidget"}}
{{$event := .}}
<div class="center-block">
    <div class="row">
        <div class="col-sm-12">
            <h5 style="text-align:center;color:darkblue">{{.GetMappedId .Pathway}} Timeline for {{.PatientDetails.GivenName}} {{.PatientDetails.FamilyName}} {{.NHSId}} Version {{.Vers}}</h5>
        </div>
    </div>
    {{template "horizontalline"}}
    <div class="row">
        <div class="col-sm-12">
            <div style="display:inline-block;width:100%;overflow-y:auto;margin-left: 2%;">
                <ul class="timeline">
                    {{range $k,$t := .XDWWorkflowDocument.TaskList.XDWTask}}
                    <li class="timeline-item">
                        <a href="{{$event.EventServices.EventService.EventUrl}}?act=widget&task=xdw&taskid={{$t.TaskData.TaskDetails.ID}}&pathway={{$event.Pathway}}&nhs={{$event.NHSId}}&user={{$event.EventServices.EventService.User}}&org={{$event.EventServices.EventService.Org}}&role={{$event.EventServices.EventService.Role}}"
                            target="workflowItem">
                       {{if taskoverdue $event $t.TaskData.TaskDetails.ID}}
                            <div class="timeline-badge warning"><i class="fa fa-thumbs-down"></i></div>
                        {{else}}
                            <div class="timeline-badge success"><i class="fa fa-thumbs-up"></i></div>
                        {{end}}
                        </a>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h5><small class="text-muted">Task Duration {{taskduration $event $t.TaskData.TaskDetails.ID}}</small></h5>
                            </div>
                            <div class="timeline-body">
                                <h5 class="timeline-title">Task {{$t.TaskData.TaskDetails.ID}} {{$t.TaskData.Description}}</h5>
                                {{if ne $t.TaskData.TaskDetails.Status "COMPLETE"}}
                                    <p style="color:darkgreen">Completed By {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{else}}
                                   <p style="color:darkgreen">Current Owner {{$t.TaskData.TaskDetails.ActualOwner}}</p>
                                {{end}}
                                {{if eq $t.TaskData.TaskDetails.Status "IN_PROGRESS"}}
                                    <p style="color:lightgreen">Last Update {{$event.GetLatestTaskEventTime $t.TaskData.TaskDetails.ID}}</p>
                                {{end}} 
                            </div>
                        </div>
                    </li>
                    {{end}}
                </ul>
            </div>
        </div>
    </div>
</div>
{{end}} timelinewidget %!s(bool=false)]
2022/11/02 19:02:31.662669 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 19:02:31.664023 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 19:02:31.664091 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 19:02:31.664172 main.go:112: Processing XDW Config Files
2022/11/02 19:02:31.665942 main.go:193: Loaded pathalert_meta.json 
2022/11/02 19:02:31.666012 tukxdw.go:1129: Persisting Workflow XDS Meta
2022/11/02 19:02:31.666144 tukdbint.go:917: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/02 19:02:31.689994 tukxdw.go:1189: Deleted Existing XDS Meta for Pathway pathalert
2022/11/02 19:02:31.690113 tukdbint.go:917: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert_meta %!s(bool=true) {
    "id": "pathalert_publish",
    "repositoryuniqueid": "",
    "registryoid": "",
    "languagecode": "en-GB",
    "docname": "Completed Pathology Alert Workflow",
    "docdesc": "Pathology Alert Workflow",
    "DocID": "",
    "Authorinstitution": "",
    "Authorperson": "",
    "classcode": "Workflow Management",
    "classcodescheme": "LPRES ClassCode",
    "classcodevalue": "Workflow Management",
    "typecode": "PathAlert_100",
    "typecodescheme": "TypeCode_LPRES_2018",
    "typecodevalue": "Patholgy Alert",
    "practicesettingcode": "Path-PS1",
    "practicesettingscheme": "PracticeSettingCode LPRES",
    "practicesettingvalue": "Path-PS1",
    "confcode": "N",
    "confcodescheme": "LPRES Confidentiality Codes",
    "confcodevalue": "Normal",
    "facilitycode": "path",
    "facilitycodescheme": "Healthcare Facility LPRES",
    "facilitycodevalue": "Pathology",
    "formatcode": "urn:ihe:iti:xdw:2011:workflowDoc",
    "formatcodescheme": "IHE",
    "formatcodevalue": "ITI XDW",
    "mimetype": "application/xml",
    "objecttype": "urn:uuid:34268e47-fdf5-41a6-ba33-82133c465248"
}]
2022/11/02 19:02:31.694183 tukxdw.go:1194: Persisted Workflow XDS Meta for Pathway pathalert
2022/11/02 19:02:31.694713 main.go:193: Loaded pathalert_def.json 
2022/11/02 19:02:31.694753 tukxdw.go:1132: Registering Workflow Definition
2022/11/02 19:02:31.695138 tukdsub.go:187: Processing Cancel Subscriptions
2022/11/02 19:02:31.695185 tukdbint.go:917: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [pathalert]
2022/11/02 19:02:31.705714 tukxdw.go:1146: Cleaned Event Service Subscriptions for Pathway pathalert
2022/11/02 19:02:31.705797 tukdbint.go:917: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 19:02:31.707704 tukxdw.go:1205: Deleted Existing XDW Definition for Pathway pathalert
2022/11/02 19:02:31.707775 tukdbint.go:917: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [pathalert %!s(bool=false) {
    "ref": "pathalert",
    "name": "Pathology Alert Workflow",
    "confidentialitycode": "Normal",
    "startbytime": "hour(1)",
    "completebytime": "day(1)",
    "expirationtime": "day(2)",
    "completionBehavior": [{
        "completion": {
            "condition": "task(2)"
        }
    }],
    "tasks": [
        {   "id": "1",
            "tasktype": "NOTIFICATION",
            "name": "Path_Anomaly_Identified",
            "description": "Notifyification of Pathology Result Anomaly",
            "expirationtime": "day(2)",
            "startbytime": "hour(1)",
            "completebytime": "day(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "input(Path_Anomaly_Identified)"
                }}
            ],
            "input": [{
                "name": "Path_Anomaly_Identified",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }],
            "output": [{
                "name": "PathResult^^TypeCode_LPRES_2022",
                "contenttype": "application/pdf",
                "accesstype": "urn:ihe:iti:xdw:2011:XDSregistered"
            }]
        },
        {   "id": "2",
            "tasktype": "Notification",
            "name": "Path_Anomily_Claimed",
            "description": "Pathology Result Anomaly Claimed",
            "expirationtime": "day(2)",
            "startbytime": "day(1)",
            "completebytime": "day(1)",
            "isskipable": false,
            "completionBehavior": [{
                "completion": {
                    "condition": "output(Path_Anomaly_Claimed)"
                }
            }],
            "input": [{
                "name": "Path_Anomaly_Identified",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            },
            {
                "name": "PathResult^^TypeCode_LPRES_2022",
                "contenttype": "application/pdf",
                "accesstype": "urn:ihe:iti:xdw:2011:XDSregistered"
            }],
            "output": [{
                "name": "Path_Anomaly_Claimed",
                "contenttype": "text/plain",
                "accesstype": "MIME"
            }]
        }
    ]
}]
2022/11/02 19:02:31.710485 tukxdw.go:1210: Persisted New XDW Definition for Pathway pathalert
2022/11/02 19:02:31.710524 tukxdw.go:1149: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/11/02 19:02:31.710541 tukxdw.go:1152: Checking Input Task Path_Anomaly_Identified
2022/11/02 19:02:31.710568 tukxdw.go:1157: Input Task Path_Anomaly_Identified does not require a dsub broker subscription
2022/11/02 19:02:31.710583 tukxdw.go:1161: Checking Output Task PathResult^^TypeCode_LPRES_2022
2022/11/02 19:02:31.710602 tukxdw.go:1164: Task 1 Path_Anomaly_Identified task output PathResult^^TypeCode_LPRES_2022 included in potential DSUB Broker subscriptions
2022/11/02 19:02:31.710616 tukxdw.go:1152: Checking Input Task Path_Anomaly_Identified
2022/11/02 19:02:31.710634 tukxdw.go:1157: Input Task Path_Anomaly_Identified does not require a dsub broker subscription
2022/11/02 19:02:31.710647 tukxdw.go:1152: Checking Input Task PathResult^^TypeCode_LPRES_2022
2022/11/02 19:02:31.710659 tukxdw.go:1155: Task 2 Path_Anomily_Claimed task input PathResult^^TypeCode_LPRES_2022 included in potential DSUB Broker subscriptions
2022/11/02 19:02:31.710671 tukxdw.go:1161: Checking Output Task Path_Anomaly_Claimed
2022/11/02 19:02:31.710682 tukxdw.go:1166: Output Task Path_Anomaly_Claimed does not require a dsub broker subscription
2022/11/02 19:02:31.710708 tukxdw.go:1171: Found 1 potential DSUB Broker Subscriptions - map[PathResult^^TypeCode_LPRES_2022:pathalert]
2022/11/02 19:02:31.710723 tukdsub.go:184: Processing Create Subscriptions
2022/11/02 19:02:31.710740 tukdsub.go:387: Checking for existing Subscriptions for Expression PathResult^^TypeCode_LPRES_2022
2022/11/02 19:02:31.710771 tukdbint.go:917: Created Prepared Statement SELECT * FROM subscriptions WHERE expression= ? AND pathway= ? AND topic= ? - Values [PathResult^^TypeCode_LPRES_2022 pathalert $XDSDocumentEntryTypeCode]
2022/11/02 19:02:31.711538 tukdsub.go:402: No Subscription for Pathway pathalert Topic $XDSDocumentEntryTypeCode Expression PathResult^^TypeCode_LPRES_2022 found
2022/11/02 19:02:31.711819 tukdsub.go:425: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/11/02 19:02:31.711916 tukhttp.go:215: SOAP Request Headers
2022/11/02 19:02:31.712000 tukutil.go:166: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/11/02 19:02:31.712028 tukhttp.go:217: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:7cad8218-c969-4724-a11d-47a7e65f0db5</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('PathResult^^TypeCode_LPRES_2022')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/11/02 19:02:36.712575 tukdsub.go:428: Post "http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub": context deadline exceeded
2022/11/02 19:02:36.712705 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 19:02:36.712785 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 19:02:36.712846 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert_meta %!s(bool=true)]
2022/11/02 19:02:36.715594 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 19:02:36.715666 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 19:02:36.716893 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 19:02:36.716961 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 19:02:36.717004 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 19:02:36.719330 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 19:02:36.719435 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 19:02:36.722980 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 19:02:36.724033 tukdbint.go:917: Created Prepared Statement INSERT INTO events (topic, taskid, formatcode, facilitycode, repositoryuniqueid, user, role, docname, xdsdocentryuid, nhsid, confcode, org, version, pathway, comments, classcode, practicecode, expression, authors, xdspid) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [$XDSDocumentEntryTypeCode %!s(int=1) urn:ihe:iti:xdw:2011:workflowDoc path ODD pbradley Clinical PATHALERT-9999999468 urn:ihe:iti:xdw:2013:workflowInstanceId 9999999468 N lth %!s(int=0) pathalert User pbradley from lth in the role of Clinical created new pathalert Workflow Workflow Management Path-PS1 Path_Anomaly_Identified Clinical pbradley NA]
2022/11/02 19:02:36.726035 tukxdw.go:738: Created Event ID :  = 121
2022/11/02 19:02:36.726073 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 19:02:36.726102 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 19:02:36.726118 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/02 19:02:36.726144 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 19:02:36.726163 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 19:02:36.726266 tukdbint.go:917: Created Prepared Statement INSERT INTO events (formatcode, practicecode, xdspid, org, role, topic, docname, confcode, comments, nhsid, user, pathway, expression, authors, xdsdocentryuid, taskid, classcode, facilitycode, repositoryuniqueid, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [urn:ihe:iti:xdw:2011:workflowDoc Path-PS1 NA lth Clinical $XDSDocumentEntryTypeCode PATHALERT-9999999468 N User pbradley from lth in the role of Clinical created new pathalert Workflow 9999999468 pbradley pathalert Path_Anomily_Claimed Clinical pbradley urn:ihe:iti:xdw:2013:workflowInstanceId %!s(int=2) Workflow Management path ODD %!s(int=0)]
2022/11/02 19:02:36.728297 tukxdw.go:738: Created Event ID :  = 122
2022/11/02 19:02:36.728342 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 19:02:36.728361 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 19:02:36.728380 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/02 19:02:36.728395 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 19:02:36.728411 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 19:02:36.728424 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 19:02:36.728704 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 19:02:36.728895 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (xdw_def, version, published, pathway, nhsid, xdw_key, xdw_uid, xdw_doc) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [{"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211190236723.66204 <XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211190236723.66204" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T19:02:36.723895Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211190236723.66204^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T19:02:36.723895Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T19:02:36.723895Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T19:02:36.723895Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T19:02:36.723895Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>121</id>
          <eventTime>2022-11-02T19:02:36.723895Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T19:02:36.723895Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T19:02:36.723895Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>122</id>
          <eventTime>2022-11-02T19:02:36.723895Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument>]
2022/11/02 19:02:36.730735 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
2022/11/02 19:28:43.627912 tukutil.go:139: -----------------------------------------------------------------------------------
2022/11/02 19:28:43.629431 main.go:199: Loaded log file - ./logs/2022/1102.log
2022/11/02 19:28:43.629498 tukdbint.go:233: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/11/02 19:28:43.629597 tukxdw.go:347: Creating New Workflow for Pathway pathalert NHS ID 9999999468
2022/11/02 19:28:43.629622 tukxdw.go:358: Obtaining XDS Meta for Pathway pathalert
2022/11/02 19:28:43.629722 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE isxdsmeta= ? AND name= ? - Values [%!s(bool=true) pathalert_meta]
2022/11/02 19:28:43.650132 tukxdw.go:366: Loaded XDS Meta for Pathway pathalert
2022/11/02 19:28:43.650193 tukdbint.go:917: Created Prepared Statement SELECT * FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [pathalert %!s(bool=false)]
2022/11/02 19:28:43.651029 tukxdw.go:373: Loaded XDW definition for Pathway pathalert
2022/11/02 19:28:43.651075 tukxdw.go:390: Deprecating any current pathalert Workflow for NHS ID 9999999468
2022/11/02 19:28:43.651105 tukdbint.go:917: Created Prepared Statement UPDATE workflows SET version = version + 1 WHERE xdw_key=? - Values [pathalert9999999468]
2022/11/02 19:28:43.658206 tukxdw.go:396: Deprecating any current pathalert Workflow events for NHS ID 9999999468
2022/11/02 19:28:43.658371 tukdbint.go:917: Created Prepared Statement UPDATE events SET version = version + 1 WHERE pathway=? AND nhsid=? - Values [pathalert 9999999468]
2022/11/02 19:28:43.666152 tukdbint.go:917: Created Prepared Statement SELECT * FROM idmaps WHERE mid= ? - Values [lth]
2022/11/02 19:28:43.667033 tukdbint.go:917: Created Prepared Statement INSERT INTO events (classcode, facilitycode, expression, authors, xdspid, org, xdsdocentryuid, role, version, taskid, practicecode, repositoryuniqueid, topic, docname, confcode, formatcode, nhsid, user, pathway, comments) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Workflow Management path Path_Anomaly_Identified Clinical pbradley NA lth urn:ihe:iti:xdw:2013:workflowInstanceId Clinical %!s(int=0) %!s(int=1) Path-PS1 ODD $XDSDocumentEntryTypeCode PATHALERT-9999999468 N urn:ihe:iti:xdw:2011:workflowDoc 9999999468 pbradley pathalert User pbradley from lth in the role of Clinical created new pathalert Workflow]
2022/11/02 19:28:43.673690 tukxdw.go:738: Created Event ID :  = 125
2022/11/02 19:28:43.673756 tukxdw.go:444: Creating Workflow Task ID - 1 Name - Path_Anomaly_Identified
2022/11/02 19:28:43.673812 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 19:28:43.673835 tukxdw.go:474: Created Output Part - PathResult^^TypeCode_LPRES_2022
2022/11/02 19:28:43.673851 tukxdw.go:484: Set Workflow Task Event 1 create status to COMPLETE
2022/11/02 19:28:43.673869 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 19:28:43.673929 tukdbint.go:917: Created Prepared Statement INSERT INTO events (role, pathway, formatcode, facilitycode, expression, xdspid, xdsdocentryuid, confcode, user, topic, taskid, classcode, repositoryuniqueid, org, comments, docname, practicecode, authors, nhsid, version) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) - Values [Clinical pathalert urn:ihe:iti:xdw:2011:workflowDoc path Path_Anomily_Claimed NA urn:ihe:iti:xdw:2013:workflowInstanceId N pbradley $XDSDocumentEntryTypeCode %!s(int=2) Workflow Management ODD lth User pbradley from lth in the role of Clinical created new pathalert Workflow PATHALERT-9999999468 Path-PS1 Clinical pbradley 9999999468 %!s(int=0)]
2022/11/02 19:28:43.675907 tukxdw.go:738: Created Event ID :  = 126
2022/11/02 19:28:43.675946 tukxdw.go:444: Creating Workflow Task ID - 2 Name - Path_Anomily_Claimed
2022/11/02 19:28:43.675965 tukxdw.go:464: Created Input Part - Path_Anomaly_Identified
2022/11/02 19:28:43.675980 tukxdw.go:464: Created Input Part - PathResult^^TypeCode_LPRES_2022
2022/11/02 19:28:43.675994 tukxdw.go:474: Created Output Part - Path_Anomaly_Claimed
2022/11/02 19:28:43.676080 tukxdw.go:484: Set Workflow Task Event 2 create status to COMPLETE
2022/11/02 19:28:43.676101 tukxdw.go:492: Created Workflow Document Event Set status to CREATED
2022/11/02 19:28:43.676407 tukxdw.go:497: Created new PATHALERT Workflow for Patient 9999999468
2022/11/02 19:28:43.676705 tukdbint.go:917: Created Prepared Statement INSERT INTO workflows (xdw_doc, xdw_def, version, published, pathway, nhsid, xdw_key, xdw_uid) VALUES (?, ?, ?, ?, ?, ?, ?, ?) - Values [<XDW.WorkflowDocument hl7="urn:hl7-org:v3" ws-ht="http://docs.oasis-open.org/ns/bpel4people/ws-humantask/types/200803" xdw="urn:ihe:iti:xdw:2011" xsi="http://www.w3.org/2001/XMLSchema-instance" schemaLocation="urn:ihe:iti:xdw:2011 XDW-2014-12-23.xsd">
  <id root="urn:ihe:iti:xdw:2013:workflowInstanceId" extension="1.2.40.0.13.1.1.3542466645.202211192843666.62721" assigningAuthorityName="LTH"></id>
  <effectiveTime value="2022-11-02T19:28:43.666888Z"></effectiveTime>
  <confidentialityCode code="Normal"></confidentialityCode>
  <patient>
    <id root="2.16.840.1.113883.2.1.4.1" extension="9999999468" assigningAuthorityName="NHS"></id>
  </patient>
  <author>
    <assignedAuthor>
      <id root="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1" extension="LTH" assigningAuthorityName="2.16.840.1.113883.2.1.3.31.2.2.1.1.3.1.1"></id>
      <assignedPerson>
        <name>
          <family>pbradley</family>
          <prefix>Clinical</prefix>
        </name>
      </assignedPerson>
    </assignedAuthor>
  </author>
  <workflowInstanceId>1.2.40.0.13.1.1.3542466645.202211192843666.62721^^^^urn:ihe:iti:xdw:2013:workflowInstanceId</workflowInstanceId>
  <workflowDocumentSequenceNumber>1</workflowDocumentSequenceNumber>
  <workflowStatus>OPEN</workflowStatus>
  <workflowStatusHistory>
    <documentEvent>
      <eventTime>2022-11-02T19:28:43.666888Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>1</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
    <documentEvent>
      <eventTime>2022-11-02T19:28:43.666888Z</eventTime>
      <eventType>create</eventType>
      <taskEventIdentifier>2</taskEventIdentifier>
      <author>Clinical - pbradley</author>
      <previousStatus>create</previousStatus>
      <actualStatus>CREATED</actualStatus>
    </documentEvent>
  </workflowStatusHistory>
  <workflowDefinitionReference>PATHALERT</workflowDefinitionReference>
  <TaskList>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>1</id>
          <taskType>NOTIFICATION</taskType>
          <name>Path_Anomaly_Identified</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T19:28:43.666888Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T19:28:43.666888Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Notifyification of Pathology Result Anomaly</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>125</id>
          <eventTime>2022-11-02T19:28:43.666888Z</eventTime>
          <identifier>1</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
    <XDWTask>
      <taskData>
        <taskDetails>
          <id>2</id>
          <taskType>Notification</taskType>
          <name>Path_Anomily_Claimed</name>
          <status>CREATED</status>
          <actualOwner></actualOwner>
          <createdTime>2022-11-02T19:28:43.666888Z</createdTime>
          <createdBy>Clinical pbradley</createdBy>
          <activationtime></activationtime>
          <lastModifiedTime>2022-11-02T19:28:43.666888Z</lastModifiedTime>
          <renderingMethodExists>false</renderingMethodExists>
        </taskDetails>
        <description>Pathology Result Anomaly Claimed</description>
        <input>
          <part name="Path_Anomaly_Identified">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Identified</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <input>
          <part name="PathResult^^TypeCode_LPRES_2022">
            <attachmentInfo>
              <identifier></identifier>
              <name>PathResult^^TypeCode_LPRES_2022</name>
              <accessType>urn:ihe:iti:xdw:2011:XDSregistered</accessType>
              <contentType>application/pdf</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </input>
        <output>
          <part name="Path_Anomaly_Claimed">
            <attachmentInfo>
              <identifier></identifier>
              <name>Path_Anomaly_Claimed</name>
              <accessType>MIME</accessType>
              <contentType>text/plain</contentType>
              <contentCategory>http://www.iana.org/assignments/media-types</contentCategory>
              <attachedTime></attachedTime>
              <attachedBy></attachedBy>
              <homeCommunityId></homeCommunityId>
            </attachmentInfo>
          </part>
        </output>
      </taskData>
      <taskEventHistory>
        <taskEvent>
          <id>126</id>
          <eventTime>2022-11-02T19:28:43.666888Z</eventTime>
          <identifier>2</identifier>
          <eventType>create</eventType>
          <status>COMPLETE</status>
        </taskEvent>
      </taskEventHistory>
    </XDWTask>
  </TaskList>
</XDW.WorkflowDocument> {"ref":"pathalert","name":"Pathology Alert Workflow","confidentialitycode":"Normal","startbytime":"hour(1)","completebytime":"day(1)","completionBehavior":[{"completion":{"condition":"task(2)"}}],"tasks":[{"id":"1","tasktype":"NOTIFICATION","name":"Path_Anomaly_Identified","description":"Notifyification of Pathology Result Anomaly","actualowner":"","expirationtime":"day(2)","startbytime":"hour(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"input(Path_Anomaly_Identified)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"}],"output":[{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"Notification","name":"Path_Anomily_Claimed","description":"Pathology Result Anomaly Claimed","actualowner":"","expirationtime":"day(2)","startbytime":"day(1)","completebytime":"day(1)","isskipable":false,"potentialOwners":null,"completionBehavior":[{"completion":{"condition":"output(Path_Anomaly_Claimed)"}}],"input":[{"name":"Path_Anomaly_Identified","contenttype":"text/plain","accesstype":"MIME"},{"name":"PathResult^^TypeCode_LPRES_2022","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"Path_Anomaly_Claimed","contenttype":"text/plain","accesstype":"MIME"}]}]} %!s(int=0) %!s(bool=false) pathalert 9999999468 PATHALERT9999999468 1.2.40.0.13.1.1.3542466645.202211192843666.62721]
2022/11/02 19:28:43.681935 tukxdw.go:705: Persisted Workflow Version 0 for Pathway pathalert NHS ID 9999999468
