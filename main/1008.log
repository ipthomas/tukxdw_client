2022/10/08 19:27:12.309486 main.go:79: -----------------------------------------------------------------------------------
2022/10/08 19:27:12.309558 main.go:80: Loaded log file - /Users/IanThomas/go/src/tukxdw-client/main/1008.log
2022/10/08 19:27:12.309589 tukdbint.go:165: No Database API URL provided. Opening DB Connection to mysql instance via DSN - root:rootPass@tcp(localhost:3306)/tuk?parseTime=true&timeout=60s&readTimeout=2s
2022/10/08 19:27:12.311144 main.go:52: Loaded WF Def for Pathway : toc_xdwdef.json
2022/10/08 19:27:12.311650 tukxdw.go:161: Processing WF Def for Pathway : toc
2022/10/08 19:27:12.311742 tukdbint.go:376: Reflecting Field Name Value toc
2022/10/08 19:27:12.311773 tukdbint.go:376: Reflecting Field IsXDSMeta Value false
2022/10/08 19:27:12.311804 tukdbint.go:380: Obtained 2 Key Values - map[isxdsmeta:%!s(bool=false) name:toc]
2022/10/08 19:27:12.311835 tukdbint.go:434: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [toc %!s(bool=false)]
2022/10/08 19:27:12.347411 tukxdw.go:169: Deleted Existing XDW Definition for Pathway toc
2022/10/08 19:27:12.347552 tukdbint.go:376: Reflecting Field Name Value toc
2022/10/08 19:27:12.347574 tukdbint.go:376: Reflecting Field IsXDSMeta Value false
2022/10/08 19:27:12.347594 tukdbint.go:376: Reflecting Field XDW Value {"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"toc","name":"Transfer of Care","confidentialitycode":"N","completebytime":"day(5)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"TOC_Workflow_Opened","description":"New Transfer of Care Workflow","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Open)"}}],"input":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}]},{"id":"2","tasktype":"TASK","name":"TOC_Request","description":"Issue Transfer Of Care Request to Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(1)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request)"}}],"input":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}]},{"id":"3","tasktype":"TASK","name":"TOC_Request_Accept_Reject","description":"Provider Accepts or Rejects Transfer Of Care Request","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"days(2)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request_Accept)"}}],"input":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request_Reject","contenttype":"text/plain","accesstype":"URL"},{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}]},{"id":"4","tasktype":"TASK","name":"TOC_Schedule_Transport","description":"Schedule Patient Transport for TOC","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Transport_Scheduled)"}}],"input":[{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}]},{"id":"5","tasktype":"TASK","name":"Admit_Patient","description":"Patient Transferred and Admitted by Provider","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"day(4)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Patient_Admitted)"}}],"input":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Patient_Admitted","contenttype":"text/plain","accesstype":"URL"}]},{"id":"6","tasktype":"TASK","name":"TOC_Workflow_Close","description":"Close TOC Pathway for Patient","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(5)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Closed)"}}],"output":[{"name":"TOC_Workflow_Closed","contenttype":"text/plain","accesstype":"URL"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}
2022/10/08 19:27:12.347641 tukdbint.go:380: Obtained 3 Key Values - map[isxdsmeta:%!s(bool=false) name:toc xdw:{"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"toc","name":"Transfer of Care","confidentialitycode":"N","completebytime":"day(5)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"TOC_Workflow_Opened","description":"New Transfer of Care Workflow","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Open)"}}],"input":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}]},{"id":"2","tasktype":"TASK","name":"TOC_Request","description":"Issue Transfer Of Care Request to Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(1)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request)"}}],"input":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}]},{"id":"3","tasktype":"TASK","name":"TOC_Request_Accept_Reject","description":"Provider Accepts or Rejects Transfer Of Care Request","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"days(2)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request_Accept)"}}],"input":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request_Reject","contenttype":"text/plain","accesstype":"URL"},{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}]},{"id":"4","tasktype":"TASK","name":"TOC_Schedule_Transport","description":"Schedule Patient Transport for TOC","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Transport_Scheduled)"}}],"input":[{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}]},{"id":"5","tasktype":"TASK","name":"Admit_Patient","description":"Patient Transferred and Admitted by Provider","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"day(4)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Patient_Admitted)"}}],"input":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Patient_Admitted","contenttype":"text/plain","accesstype":"URL"}]},{"id":"6","tasktype":"TASK","name":"TOC_Workflow_Close","description":"Close TOC Pathway for Patient","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(5)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Closed)"}}],"output":[{"name":"TOC_Workflow_Closed","contenttype":"text/plain","accesstype":"URL"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}]
2022/10/08 19:27:12.347658 tukdbint.go:434: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [toc %!s(bool=false) {"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"toc","name":"Transfer of Care","confidentialitycode":"N","completebytime":"day(5)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"TOC_Workflow_Opened","description":"New Transfer of Care Workflow","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Open)"}}],"input":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}]},{"id":"2","tasktype":"TASK","name":"TOC_Request","description":"Issue Transfer Of Care Request to Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(1)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request)"}}],"input":[{"name":"TOC_Workflow_Open","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}]},{"id":"3","tasktype":"TASK","name":"TOC_Request_Accept_Reject","description":"Provider Accepts or Rejects Transfer Of Care Request","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"days(2)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Request_Accept)"}}],"input":[{"name":"TOC_Request","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Request_Reject","contenttype":"text/plain","accesstype":"URL"},{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}]},{"id":"4","tasktype":"TASK","name":"TOC_Schedule_Transport","description":"Schedule Patient Transport for TOC","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Transport_Scheduled)"}}],"input":[{"name":"TOC_Request_Accept","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}]},{"id":"5","tasktype":"TASK","name":"Admit_Patient","description":"Patient Transferred and Admitted by Provider","owner":"Provider_Referrals","expirationtime":"","startbytime":"","completebytime":"day(4)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Patient_Admitted)"}}],"input":[{"name":"TOC_Transport_Scheduled","contenttype":"text/plain","accesstype":"URL"}],"output":[{"name":"TOC_Patient_Admitted","contenttype":"text/plain","accesstype":"URL"}]},{"id":"6","tasktype":"TASK","name":"TOC_Workflow_Close","description":"Close TOC Pathway for Patient","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"day(5)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(TOC_Workflow_Closed)"}}],"output":[{"name":"TOC_Workflow_Closed","contenttype":"text/plain","accesstype":"URL"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}]
2022/10/08 19:27:12.354322 tukxdw.go:179: Persisted New XDW Definition for Pathway toc
2022/10/08 19:27:12.354362 tukxdw.go:124: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/10/08 19:27:12.354376 tukxdw.go:127: Checking Input Task LAC1^^TypeCode_EPUT_2018
2022/10/08 19:27:12.354392 tukxdw.go:130: Task 1 TOC_Workflow_Opened task input LAC1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:12.354404 tukxdw.go:136: Checking Output Task TOC_Workflow_Open
2022/10/08 19:27:12.354416 tukxdw.go:141: Output Task TOC_Workflow_Open does not require a dsub broker subscription
2022/10/08 19:27:12.354427 tukxdw.go:127: Checking Input Task TOC_Workflow_Open
2022/10/08 19:27:12.354438 tukxdw.go:132: Input Task TOC_Workflow_Open does not require a dsub broker subscription
2022/10/08 19:27:12.354448 tukxdw.go:136: Checking Output Task TOC_Request
2022/10/08 19:27:12.354485 tukxdw.go:141: Output Task TOC_Request does not require a dsub broker subscription
2022/10/08 19:27:12.354497 tukxdw.go:127: Checking Input Task TOC_Request
2022/10/08 19:27:12.354516 tukxdw.go:132: Input Task TOC_Request does not require a dsub broker subscription
2022/10/08 19:27:12.354527 tukxdw.go:136: Checking Output Task TOC_Request_Reject
2022/10/08 19:27:12.354538 tukxdw.go:141: Output Task TOC_Request_Reject does not require a dsub broker subscription
2022/10/08 19:27:12.354548 tukxdw.go:136: Checking Output Task TOC_Request_Accept
2022/10/08 19:27:12.354580 tukxdw.go:141: Output Task TOC_Request_Accept does not require a dsub broker subscription
2022/10/08 19:27:12.354613 tukxdw.go:127: Checking Input Task TOC_Request_Accept
2022/10/08 19:27:12.354627 tukxdw.go:132: Input Task TOC_Request_Accept does not require a dsub broker subscription
2022/10/08 19:27:12.354638 tukxdw.go:136: Checking Output Task TOC_Transport_Scheduled
2022/10/08 19:27:12.354649 tukxdw.go:141: Output Task TOC_Transport_Scheduled does not require a dsub broker subscription
2022/10/08 19:27:12.354660 tukxdw.go:127: Checking Input Task TOC_Transport_Scheduled
2022/10/08 19:27:12.354671 tukxdw.go:132: Input Task TOC_Transport_Scheduled does not require a dsub broker subscription
2022/10/08 19:27:12.354681 tukxdw.go:136: Checking Output Task TOC_Patient_Admitted
2022/10/08 19:27:12.354691 tukxdw.go:141: Output Task TOC_Patient_Admitted does not require a dsub broker subscription
2022/10/08 19:27:12.354702 tukxdw.go:136: Checking Output Task TOC_Workflow_Closed
2022/10/08 19:27:12.354712 tukxdw.go:141: Output Task TOC_Workflow_Closed does not require a dsub broker subscription
2022/10/08 19:27:12.354740 tukxdw.go:146: Found 1 potential DSUB Broker Subscriptions - map[LAC1^^TypeCode_EPUT_2018:toc]
2022/10/08 19:27:12.354758 tukdsub.go:186: Processing Cancel Subscriptions
2022/10/08 19:27:12.354789 tukdbint.go:376: Reflecting Field Pathway Value toc
2022/10/08 19:27:12.354810 tukdbint.go:380: Obtained 1 Key Values - map[pathway:toc]
2022/10/08 19:27:12.354850 tukdbint.go:434: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [toc]
2022/10/08 19:27:12.357054 tukdsub.go:183: Processing Create Subscriptions
2022/10/08 19:27:12.357091 tukdsub.go:381: Checking for existing Subscriptions for Expression LAC1^^TypeCode_EPUT_2018
2022/10/08 19:27:12.357116 tukdbint.go:376: Reflecting Field Pathway Value toc
2022/10/08 19:27:12.357130 tukdbint.go:376: Reflecting Field Topic Value $XDSDocumentEntryTypeCode
2022/10/08 19:27:12.357145 tukdbint.go:376: Reflecting Field Expression Value LAC1^^TypeCode_EPUT_2018
2022/10/08 19:27:12.357163 tukdbint.go:380: Obtained 3 Key Values - map[expression:LAC1^^TypeCode_EPUT_2018 pathway:toc topic:$XDSDocumentEntryTypeCode]
2022/10/08 19:27:12.357178 tukdbint.go:434: Created Prepared Statement SELECT * FROM subscriptions WHERE pathway= ? AND topic= ? AND expression= ? - Values [toc $XDSDocumentEntryTypeCode LAC1^^TypeCode_EPUT_2018]
2022/10/08 19:27:12.357868 tukdsub.go:396: No Subscription for Pathway toc Topic $XDSDocumentEntryTypeCode Expression LAC1^^TypeCode_EPUT_2018 found
2022/10/08 19:27:12.358136 tukdsub.go:419: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/10/08 19:27:12.358214 tukhttp.go:209: SOAP Request Headers
2022/10/08 19:27:12.358278 tukutil.go:188: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/10/08 19:27:12.358298 tukhttp.go:211: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:ac40340d-04ed-4ce8-9aed-c25a2b48908a</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('LAC1^^TypeCode_EPUT_2018')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/10/08 19:27:17.358629 tukdsub.go:422: Post "http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub": dial tcp 54.78.125.68:8081: i/o timeout
2022/10/08 19:27:17.360877 main.go:52: Loaded WF Def for Pathway : lac_xdwdef.json
2022/10/08 19:27:17.361242 tukxdw.go:161: Processing WF Def for Pathway : lac
2022/10/08 19:27:17.361301 tukdbint.go:376: Reflecting Field Name Value lac
2022/10/08 19:27:17.361346 tukdbint.go:376: Reflecting Field IsXDSMeta Value false
2022/10/08 19:27:17.361391 tukdbint.go:380: Obtained 2 Key Values - map[isxdsmeta:%!s(bool=false) name:lac]
2022/10/08 19:27:17.361450 tukdbint.go:434: Created Prepared Statement DELETE FROM xdws WHERE name= ? AND isxdsmeta= ? - Values [lac %!s(bool=false)]
2022/10/08 19:27:17.367978 tukxdw.go:169: Deleted Existing XDW Definition for Pathway lac
2022/10/08 19:27:17.368208 tukdbint.go:376: Reflecting Field Name Value lac
2022/10/08 19:27:17.368250 tukdbint.go:376: Reflecting Field IsXDSMeta Value false
2022/10/08 19:27:17.368298 tukdbint.go:376: Reflecting Field XDW Value {"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"lac","name":"Looked After Child Services","confidentialitycode":"Restricted","completebytime":"day(20)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"LAC_Workflow_Opened","description":"Open Workflow for Looked After Child Identified to Council","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC1^^TypeCode_EPUT_2018)"}},{"completion":{"condition":"task(2)"}}],"output":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"TASK","name":"Send_LAC_Paperwork","description":"LAC paperwork sent to IHA Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"day(2)","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"task(3)"}}],"output":[{"name":"LAC4^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Provider_Accept_Reject_Paperwork","description":"Provider Accepts or Rejects LAC paperwork","owner":"Provider_Referrals","expirationtime":"day(14)","startbytime":"day(3)","completebytime":"day(7)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC5^^TypeCode_EPUT_2018) and latest(LAC5^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC5^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"},{"name":"LAC6^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"4","tasktype":"TASK","name":"IHA_Scheduled","description":"Provider Schedules IHA Appointment","owner":"Provider_Referrals","expirationtime":"day(15)","startbytime":"day(7)","completebytime":"day(8)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC7^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"5","tasktype":"TASK","name":"IHA_Completed","description":"Provider Completed IHA Assessment","owner":"Provider_Referrals","expirationtime":"","startbytime":"day(8)","completebytime":"day(18)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC8^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"6","tasktype":"TASK","name":"LAC_Workflow_Completed","description":"Commissoner Acknowledged IHA Received","owner":"Commissioner_Referrals","expirationtime":"day(25)","startbytime":"day(19)","completebytime":"day(20)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC9^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC9^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}
2022/10/08 19:27:17.368404 tukdbint.go:380: Obtained 3 Key Values - map[isxdsmeta:%!s(bool=false) name:lac xdw:{"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"lac","name":"Looked After Child Services","confidentialitycode":"Restricted","completebytime":"day(20)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"LAC_Workflow_Opened","description":"Open Workflow for Looked After Child Identified to Council","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC1^^TypeCode_EPUT_2018)"}},{"completion":{"condition":"task(2)"}}],"output":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"TASK","name":"Send_LAC_Paperwork","description":"LAC paperwork sent to IHA Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"day(2)","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"task(3)"}}],"output":[{"name":"LAC4^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Provider_Accept_Reject_Paperwork","description":"Provider Accepts or Rejects LAC paperwork","owner":"Provider_Referrals","expirationtime":"day(14)","startbytime":"day(3)","completebytime":"day(7)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC5^^TypeCode_EPUT_2018) and latest(LAC5^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC5^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"},{"name":"LAC6^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"4","tasktype":"TASK","name":"IHA_Scheduled","description":"Provider Schedules IHA Appointment","owner":"Provider_Referrals","expirationtime":"day(15)","startbytime":"day(7)","completebytime":"day(8)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC7^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"5","tasktype":"TASK","name":"IHA_Completed","description":"Provider Completed IHA Assessment","owner":"Provider_Referrals","expirationtime":"","startbytime":"day(8)","completebytime":"day(18)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC8^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"6","tasktype":"TASK","name":"LAC_Workflow_Completed","description":"Commissoner Acknowledged IHA Received","owner":"Commissioner_Referrals","expirationtime":"day(25)","startbytime":"day(19)","completebytime":"day(20)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC9^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC9^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}]
2022/10/08 19:27:17.368476 tukdbint.go:434: Created Prepared Statement INSERT INTO xdws (name, isxdsmeta, xdw) VALUES (?, ?, ?) - Values [lac %!s(bool=false) {"Action":"register","Pathway":"","WorkflowDefinition":{"ref":"lac","name":"Looked After Child Services","confidentialitycode":"Restricted","completebytime":"day(20)","completionBehavior":[{"completion":{"condition":"task(6)"}}],"tasks":[{"id":"1","tasktype":"TASK","name":"LAC_Workflow_Opened","description":"Open Workflow for Looked After Child Identified to Council","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"","completebytime":"","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC1^^TypeCode_EPUT_2018)"}},{"completion":{"condition":"task(2)"}}],"output":[{"name":"LAC1^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"2","tasktype":"TASK","name":"Send_LAC_Paperwork","description":"LAC paperwork sent to IHA Provider","owner":"Commissioner_Referrals","expirationtime":"","startbytime":"day(2)","completebytime":"day(3)","isskipable":false,"completionBehavior":[{"completion":{"condition":"task(3)"}}],"output":[{"name":"LAC4^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"3","tasktype":"TASK","name":"Provider_Accept_Reject_Paperwork","description":"Provider Accepts or Rejects LAC paperwork","owner":"Provider_Referrals","expirationtime":"day(14)","startbytime":"day(3)","completebytime":"day(7)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC5^^TypeCode_EPUT_2018) and latest(LAC5^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC5^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"},{"name":"LAC6^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"4","tasktype":"TASK","name":"IHA_Scheduled","description":"Provider Schedules IHA Appointment","owner":"Provider_Referrals","expirationtime":"day(15)","startbytime":"day(7)","completebytime":"day(8)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC7^^TypeCode_EPUT_2018)"}}],"output":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"5","tasktype":"TASK","name":"IHA_Completed","description":"Provider Completed IHA Assessment","owner":"Provider_Referrals","expirationtime":"","startbytime":"day(8)","completebytime":"day(18)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC8^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC7^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]},{"id":"6","tasktype":"TASK","name":"LAC_Workflow_Completed","description":"Commissoner Acknowledged IHA Received","owner":"Commissioner_Referrals","expirationtime":"day(25)","startbytime":"day(19)","completebytime":"day(20)","isskipable":false,"completionBehavior":[{"completion":{"condition":"output(LAC9^^TypeCode_EPUT_2018)"}}],"input":[{"name":"LAC8^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}],"output":[{"name":"LAC9^^TypeCode_EPUT_2018","contenttype":"application/pdf","accesstype":"urn:ihe:iti:xdw:2011:XDSregistered"}]}]},"DSUB_BrokerURL":"http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub","DSUB_ConsumerURL":"http://tukeventserver.ddns.net:8081/eventservice/event"}]
2022/10/08 19:27:17.375617 tukxdw.go:179: Persisted New XDW Definition for Pathway lac
2022/10/08 19:27:17.375679 tukxdw.go:124: Parsing XDW Tasks for potential DSUB Broker Subscriptions
2022/10/08 19:27:17.375702 tukxdw.go:136: Checking Output Task LAC1^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375761 tukxdw.go:139: Task 1 LAC_Workflow_Opened task output LAC1^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375785 tukxdw.go:136: Checking Output Task LAC4^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375803 tukxdw.go:139: Task 2 Send_LAC_Paperwork task output LAC4^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375820 tukxdw.go:136: Checking Output Task LAC5^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375837 tukxdw.go:139: Task 3 Provider_Accept_Reject_Paperwork task output LAC5^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375853 tukxdw.go:136: Checking Output Task LAC6^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375870 tukxdw.go:139: Task 3 Provider_Accept_Reject_Paperwork task output LAC6^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375885 tukxdw.go:136: Checking Output Task LAC7^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375902 tukxdw.go:139: Task 4 IHA_Scheduled task output LAC7^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375921 tukxdw.go:127: Checking Input Task LAC7^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375946 tukxdw.go:130: Task 5 IHA_Completed task input LAC7^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375964 tukxdw.go:136: Checking Output Task LAC8^^TypeCode_EPUT_2018
2022/10/08 19:27:17.375981 tukxdw.go:139: Task 5 IHA_Completed task output LAC8^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.375999 tukxdw.go:127: Checking Input Task LAC8^^TypeCode_EPUT_2018
2022/10/08 19:27:17.376018 tukxdw.go:130: Task 6 LAC_Workflow_Completed task input LAC8^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.376034 tukxdw.go:136: Checking Output Task LAC9^^TypeCode_EPUT_2018
2022/10/08 19:27:17.376051 tukxdw.go:139: Task 6 LAC_Workflow_Completed task output LAC9^^TypeCode_EPUT_2018 included in potential DSUB Broker subscriptions
2022/10/08 19:27:17.376129 tukxdw.go:146: Found 7 potential DSUB Broker Subscriptions - map[LAC1^^TypeCode_EPUT_2018:lac LAC4^^TypeCode_EPUT_2018:lac LAC5^^TypeCode_EPUT_2018:lac LAC6^^TypeCode_EPUT_2018:lac LAC7^^TypeCode_EPUT_2018:lac LAC8^^TypeCode_EPUT_2018:lac LAC9^^TypeCode_EPUT_2018:lac]
2022/10/08 19:27:17.376158 tukdsub.go:186: Processing Cancel Subscriptions
2022/10/08 19:27:17.376188 tukdbint.go:376: Reflecting Field Pathway Value lac
2022/10/08 19:27:17.376215 tukdbint.go:380: Obtained 1 Key Values - map[pathway:lac]
2022/10/08 19:27:17.376239 tukdbint.go:434: Created Prepared Statement DELETE FROM subscriptions WHERE pathway= ? - Values [lac]
2022/10/08 19:27:17.377265 tukdsub.go:183: Processing Create Subscriptions
2022/10/08 19:27:17.377324 tukdsub.go:381: Checking for existing Subscriptions for Expression LAC5^^TypeCode_EPUT_2018
2022/10/08 19:27:17.377398 tukdbint.go:376: Reflecting Field Pathway Value lac
2022/10/08 19:27:17.377424 tukdbint.go:376: Reflecting Field Topic Value $XDSDocumentEntryTypeCode
2022/10/08 19:27:17.377444 tukdbint.go:376: Reflecting Field Expression Value LAC5^^TypeCode_EPUT_2018
2022/10/08 19:27:17.377474 tukdbint.go:380: Obtained 3 Key Values - map[expression:LAC5^^TypeCode_EPUT_2018 pathway:lac topic:$XDSDocumentEntryTypeCode]
2022/10/08 19:27:17.377525 tukdbint.go:434: Created Prepared Statement SELECT * FROM subscriptions WHERE pathway= ? AND topic= ? AND expression= ? - Values [lac $XDSDocumentEntryTypeCode LAC5^^TypeCode_EPUT_2018]
2022/10/08 19:27:17.382566 tukdsub.go:396: No Subscription for Pathway lac Topic $XDSDocumentEntryTypeCode Expression LAC5^^TypeCode_EPUT_2018 found
2022/10/08 19:27:17.382889 tukdsub.go:419: Sending Subscribe Request to DSUB Broker http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
2022/10/08 19:27:17.382977 tukhttp.go:209: SOAP Request Headers
2022/10/08 19:27:17.383029 tukutil.go:188: {
  "Accept": [
    "*/*"
  ],
  "Connection": [
    "keep-alive"
  ],
  "Content-Type": [
    "application/soap+xml"
  ],
  "Soapaction": [
    "http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest"
  ]
}
2022/10/08 19:27:17.383055 tukhttp.go:211: SOAP Request
URL = http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub
Action = http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest
Timeout = 5

<SOAP-ENV:Envelope xmlns:SOAP-ENV='http://www.w3.org/2003/05/soap-envelope' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:s='http://www.w3.org/2001/XMLSchema' xmlns:wsa='http://www.w3.org/2005/08/addressing'><SOAP-ENV:Header><wsa:Action SOAP-ENV:mustUnderstand='true'>http://docs.oasis-open.org/wsn/bw-2/NotificationProducer/SubscribeRequest</wsa:Action><wsa:MessageID>urn:uuid:6a95245a-8639-4f41-be88-e340241a2639</wsa:MessageID><wsa:ReplyTo SOAP-ENV:mustUnderstand='true'><wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address></wsa:ReplyTo><wsa:To>http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub</wsa:To></SOAP-ENV:Header><SOAP-ENV:Body><wsnt:Subscribe xmlns:wsnt='http://docs.oasis-open.org/wsn/b-2' xmlns:a='http://www.w3.org/2005/08/addressing' xmlns:rim='urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0' xmlns:wsa='http://www.w3.org/2005/08/addressing'><wsnt:ConsumerReference><wsa:Address>http://tukeventserver.ddns.net:8081/eventservice/event</wsa:Address></wsnt:ConsumerReference><wsnt:Filter><wsnt:TopicExpression Dialect='http://docs.oasis-open.org/wsn/t-1/TopicExpression/Simple'>ihe:FullDocumentEntry</wsnt:TopicExpression><rim:AdhocQuery id='urn:uuid:742790e0-aba6-43d6-9f1f-e43ed9790b79'><rim:Slot name='$XDSDocumentEntryTypeCode'><rim:ValueList><rim:Value>('LAC5^^TypeCode_EPUT_2018')</rim:Value></rim:ValueList></rim:Slot></rim:AdhocQuery></wsnt:Filter></wsnt:Subscribe></SOAP-ENV:Body></SOAP-ENV:Envelope>
2022/10/08 19:27:22.384318 tukdsub.go:422: Post "http://spirit-test-01.tianispirit.co.uk:8081/SpiritXDSDsub/Dsub": context deadline exceeded
